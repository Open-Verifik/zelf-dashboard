<div class="w-full max-w-6xl" *transloco="let t">
	<!-- Alert Messages -->
	<div
		*ngIf="showAlert"
		class="mb-6 p-4 rounded-lg"
		[ngClass]="{
			'bg-green-100 text-green-800 border border-green-200': alertType === 'success',
			'bg-red-100 text-red-800 border border-red-200': alertType === 'error',
		}"
	>
		<div class="flex items-center">
			<mat-icon
				class="mr-2"
				[ngClass]="{
					'text-green-600': alertType === 'success',
					'text-red-600': alertType === 'error',
				}"
			>
				{{ alertType === "success" ? "check_circle" : "error" }}
			</mat-icon>
			<span>{{ alertMessage }}</span>
		</div>
	</div>

	<!-- Form -->
	<form [formGroup]="accountForm">
		<!-- Domain Configuration Header -->
		<div class="mb-8">
			<h1 class="text-2xl font-bold text-gray-900 dark:text-white mb-2">{{ t("license.title") }}</h1>
			<p class="text-gray-600 dark:text-gray-300">{{ t("license.subtitle") }}</p>
		</div>

		<!-- Field Restrictions Information -->
		<div class="bg-blue-50 dark:bg-blue-900/20 border border-blue-200 dark:border-blue-700 rounded-lg p-4 mb-6">
			<div class="flex items-start">
				<mat-icon class="text-blue-600 dark:text-blue-400 mr-3 mt-0.5">info</mat-icon>
				<div>
					<h3 class="text-sm font-semibold text-blue-800 dark:text-blue-200 mb-2">Field Restrictions</h3>
					<div class="text-sm text-blue-700 dark:text-blue-300 space-y-1">
						<p><strong>Editable:</strong> Domain name, validation rules, payment settings, pricing, storage options, and metadata</p>
						<p>
							<strong>Read-only:</strong> Start/end dates, status, limits (managed by subscription), Stripe data (managed by webhooks)
						</p>
						<p><strong>Supported Currencies:</strong> BTC, ETH, SOL, USDC, USDT, BDAG, AVAX, ZNS</p>
					</div>
				</div>
			</div>
		</div>

		<!-- Basic Information -->
		<div class="bg-white dark:bg-gray-800 rounded-lg shadow-sm border border-gray-200 dark:border-gray-700 p-6 mb-6">
			<div class="flex items-center mb-4">
				<mat-icon class="text-blue-600 dark:text-blue-400 mr-2">info</mat-icon>
				<h2 class="text-lg font-semibold text-gray-900 dark:text-white">{{ t("license.basic_information.title") }}</h2>
			</div>

			<div class="grid grid-cols-1 md:grid-cols-2 gap-6">
				<div>
					<mat-form-field class="fuse-mat-emphasized-affix w-full" [subscriptSizing]="'dynamic'">
						<mat-label>{{ t("license.basic_information.domain_name") }}</mat-label>
						<span matPrefix>{{ t("license.basic_information.domain_prefix") }}</span>
						<input [formControlName]="'domain'" matInput [placeholder]="t('license.basic_information.domain_placeholder')" />
						<mat-error *ngIf="accountForm.get('domain')?.hasError('required')">
							{{ t("license.basic_information.domain_required") }}
						</mat-error>
						<mat-error *ngIf="accountForm.get('domain')?.hasError('pattern')">
							{{ t("license.basic_information.domain_pattern_error") }}
						</mat-error>
					</mat-form-field>
				</div>

				<div>
					<mat-form-field class="fuse-mat-emphasized-affix w-full" [subscriptSizing]="'dynamic'">
						<mat-label>{{ t("license.basic_information.status") }}</mat-label>
						<input [formControlName]="'status'" matInput readonly />
					</mat-form-field>
				</div>

				<div>
					<mat-form-field class="fuse-mat-emphasized-affix w-full" [subscriptSizing]="'dynamic'">
						<mat-label>{{ t("license.basic_information.owner") }}</mat-label>
						<input [formControlName]="'owner'" matInput [placeholder]="t('license.basic_information.owner_placeholder')" />
					</mat-form-field>
				</div>

				<div>
					<mat-form-field class="fuse-mat-emphasized-affix w-full" [subscriptSizing]="'dynamic'">
						<mat-label>{{ t("license.basic_information.start_date") }}</mat-label>
						<input [formControlName]="'startDate'" matInput type="date" readonly />
						<mat-hint class="text-orange-600 dark:text-orange-400">
							<mat-icon class="text-sm mr-1">info</mat-icon>
							System-managed field
						</mat-hint>
					</mat-form-field>
				</div>

				<div>
					<mat-form-field class="fuse-mat-emphasized-affix w-full" [subscriptSizing]="'dynamic'">
						<mat-label>{{ t("license.basic_information.end_date") }}</mat-label>
						<input [formControlName]="'endDate'" matInput type="date" readonly />
						<mat-hint class="text-orange-600 dark:text-orange-400">
							<mat-icon class="text-sm mr-1">info</mat-icon>
							System-managed field
						</mat-hint>
					</mat-form-field>
				</div>

				<div class="md:col-span-2">
					<mat-form-field class="fuse-mat-emphasized-affix w-full" [subscriptSizing]="'dynamic'">
						<mat-label>{{ t("license.basic_information.description") }}</mat-label>
						<textarea
							[formControlName]="'description'"
							matInput
							[placeholder]="t('license.basic_information.description_placeholder')"
							rows="3"
						></textarea>
					</mat-form-field>
				</div>
			</div>
		</div>

		<!-- Features Configuration -->
		<div class="bg-white dark:bg-gray-800 rounded-lg shadow-sm border border-gray-200 dark:border-gray-700 p-6 mb-6">
			<div class="flex items-center mb-4">
				<mat-icon class="text-green-600 dark:text-green-400 mr-2">extension</mat-icon>
				<h2 class="text-lg font-semibold text-gray-900 dark:text-white">{{ t("license.features.title") }}</h2>
			</div>

			<div class="space-y-4">
				<div class="grid grid-cols-1 md:grid-cols-2 gap-4">
					<div class="border border-gray-200 dark:border-gray-600 rounded-lg p-4">
						<div class="flex items-center justify-between mb-2">
							<h3 class="font-medium text-gray-900 dark:text-white">{{ t("license.features.zns_title") }}</h3>
							<mat-slide-toggle [formControlName]="'znsEnabled'"></mat-slide-toggle>
						</div>
						<p class="text-sm text-gray-600 dark:text-gray-300">{{ t("license.features.zns_description") }}</p>
					</div>

					<div class="border border-gray-200 dark:border-gray-600 rounded-lg p-4">
						<div class="flex items-center justify-between mb-2">
							<h3 class="font-medium text-gray-900 dark:text-white">{{ t("license.features.zelfkeys_title") }}</h3>
							<mat-slide-toggle [formControlName]="'zelfkeysEnabled'"></mat-slide-toggle>
						</div>
						<p class="text-sm text-gray-600 dark:text-gray-300">{{ t("license.features.zelfkeys_description") }}</p>
					</div>
				</div>
			</div>
		</div>

		<!-- ZNS Configuration - Only show when ZNS is enabled -->
		<div *ngIf="accountForm.get('znsEnabled')?.value" class="mb-6 transition-all duration-300 ease-in-out">
			<!-- ZNS Header -->
			<div class="flex items-center mb-6">
				<mat-icon class="text-blue-600 dark:text-blue-400 mr-3 text-2xl">dns</mat-icon>
				<div>
					<h2 class="text-xl font-bold text-gray-900 dark:text-white">{{ t("license.features.zns_title") }}</h2>
					<p class="text-sm text-gray-600 dark:text-gray-400">{{ t("license.features.zns_description") }}</p>
				</div>
				<div
					class="ml-auto px-4 py-2 bg-green-100 dark:bg-green-900/30 text-green-800 dark:text-green-200 text-sm font-medium rounded-full border border-green-200 dark:border-green-700"
				>
					{{ t("license.features.zns_enabled") }}
				</div>
			</div>

			<!-- ZNS Cards Container with Indentation -->
			<div class="ml-6 space-y-4">
				<!-- Validation Rules Card -->
				<div class="bg-white dark:bg-gray-800 rounded-lg shadow-sm border-2 border-orange-200 dark:border-orange-700 p-6">
					<div class="flex items-center mb-4">
						<mat-icon class="text-orange-600 dark:text-orange-400 mr-2">rule</mat-icon>
						<h3 class="text-lg font-semibold text-gray-900 dark:text-white">{{ t("license.validation_rules.title") }}</h3>
					</div>

					<div class="grid grid-cols-1 md:grid-cols-3 gap-6">
						<div>
							<mat-form-field class="fuse-mat-emphasized-affix w-full" [subscriptSizing]="'dynamic'">
								<mat-label>{{ t("license.validation_rules.min_length") }}</mat-label>
								<input
									[formControlName]="'minLength'"
									matInput
									type="number"
									[placeholder]="t('license.validation_rules.min_length_placeholder')"
								/>
							</mat-form-field>
						</div>

						<div>
							<mat-form-field class="fuse-mat-emphasized-affix w-full" [subscriptSizing]="'dynamic'">
								<mat-label>{{ t("license.validation_rules.max_length") }}</mat-label>
								<input
									[formControlName]="'maxLength'"
									matInput
									type="number"
									min="1"
									max="27"
									[placeholder]="t('license.validation_rules.max_length_placeholder')"
								/>
								<mat-hint align="end">{{ t("license.validation_rules.max_length_hint") }}</mat-hint>
								<mat-error *ngIf="accountForm.get('maxLength')?.hasError('max')">
									{{ t("license.validation_rules.max_length_error") }}
								</mat-error>
							</mat-form-field>
						</div>

						<div>
							<mat-form-field class="fuse-mat-emphasized-affix w-full" [subscriptSizing]="'dynamic'">
								<mat-label>{{ t("license.validation_rules.hold_suffix") }}</mat-label>
								<input
									[formControlName]="'holdSuffix'"
									matInput
									[placeholder]="t('license.validation_rules.hold_suffix_placeholder')"
								/>
							</mat-form-field>
						</div>
					</div>

					<!-- Reserved Words -->
					<div class="mt-6">
						<label class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2">{{
							t("license.validation_rules.reserved_words")
						}}</label>
						<div class="flex flex-wrap gap-2">
							<span
								*ngFor="let word of reservedWords"
								class="inline-flex items-center px-3 py-1 rounded-full text-sm bg-red-100 dark:bg-red-900 text-red-800 dark:text-red-200"
							>
								{{ word }}
								<button
									type="button"
									(click)="removeReservedWord(word)"
									class="ml-2 text-red-600 dark:text-red-400 hover:text-red-800 dark:hover:text-red-200"
								>
									<mat-icon class="text-sm">close</mat-icon>
								</button>
							</span>
							<div class="flex items-center">
								<input
									#newReservedWord
									type="text"
									[placeholder]="t('license.validation_rules.add_reserved_word')"
									class="px-3 py-1 border border-gray-300 dark:border-gray-600 rounded-md text-sm bg-white dark:bg-gray-700 text-gray-900 dark:text-white placeholder-gray-500 dark:placeholder-gray-400"
									(keyup.enter)="addReservedWord(newReservedWord.value); newReservedWord.value = ''"
								/>
								<button
									type="button"
									(click)="addReservedWord(newReservedWord.value); newReservedWord.value = ''"
									class="ml-2 text-blue-600 dark:text-blue-400 hover:text-blue-800 dark:hover:text-blue-300"
								>
									<mat-icon class="text-sm">add</mat-icon>
								</button>
							</div>
						</div>
					</div>

					<!-- Inappropriate Words Filter -->
					<div class="mt-4">
						<div class="flex items-center mb-2">
							<mat-icon class="text-red-600 dark:text-red-400 mr-2">block</mat-icon>
							<label class="text-sm font-medium text-gray-700 dark:text-gray-300">{{
								t("license.validation_rules.content_filter")
							}}</label>
							<mat-slide-toggle [formControlName]="'contentFilterEnabled'" class="ml-2"></mat-slide-toggle>
						</div>
						<p class="text-sm text-gray-600 dark:text-gray-300">
							{{ t("license.validation_rules.content_filter_description") }}
						</p>
					</div>
				</div>

				<!-- Payment Configuration Card -->
				<div class="bg-white dark:bg-gray-800 rounded-lg shadow-sm border-2 border-orange-200 dark:border-orange-700 p-6">
					<div class="flex items-center mb-4">
						<mat-icon class="text-green-600 dark:text-green-400 mr-2">payment</mat-icon>
						<h3 class="text-lg font-semibold text-gray-900 dark:text-white">{{ t("license.payment_settings.title") }}</h3>
					</div>

					<div class="space-y-6">
						<!-- Payment Methods -->
						<div>
							<label class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2">{{
								t("license.payment_settings.payment_methods")
							}}</label>
							<div class="grid grid-cols-2 md:grid-cols-4 gap-4">
								<div class="flex items-center" *ngFor="let method of ['coinbase', 'crypto', 'stripe', 'paypal']">
									<mat-checkbox [checked]="isPaymentMethodEnabled(method)" (change)="togglePaymentMethod(method)"></mat-checkbox>
									<span class="ml-2 text-sm text-gray-700 dark:text-gray-300">{{ method | titlecase }}</span>
								</div>
							</div>
							<div class="mt-2 text-xs text-gray-500 dark:text-gray-400">
								Selected methods: {{ getPaymentMethods().join(", ") || "None" }}
							</div>
						</div>

						<!-- Supported Networks -->
						<div>
							<label class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2"> Supported Networks </label>
							<networks-config [networksFormGroup]="networksFormGroup"></networks-config>
						</div>

						<!-- Whitelist Configuration -->
						<div>
							<div class="flex items-center justify-between mb-4">
								<h4 class="text-sm font-medium text-gray-700 dark:text-gray-300">
									{{ t("license.payment_settings.whitelist_title") }}
								</h4>
								<button
									type="button"
									(click)="addWhitelistItem()"
									class="inline-flex items-center px-3 py-1 border border-gray-300 dark:border-gray-600 text-sm font-medium rounded-md text-gray-700 dark:text-gray-300 bg-white dark:bg-gray-700 hover:bg-gray-50 dark:hover:bg-gray-600"
								>
									<mat-icon class="text-sm mr-1">add</mat-icon>
									{{ t("license.payment_settings.add_item") }}
								</button>
							</div>

							<div *ngIf="whitelistItems.length === 0" class="text-center py-8 text-gray-500 dark:text-gray-400">
								<mat-icon class="text-4xl mb-2">inbox</mat-icon>
								<p>{{ t("license.payment_settings.no_items") }}</p>
							</div>

							<div *ngIf="whitelistItems.length > 0" class="space-y-3">
								<div
									*ngFor="let item of whitelistItems; let i = index"
									class="flex items-center space-x-3 p-3 border border-gray-200 dark:border-gray-600 rounded-lg"
								>
									<div class="flex-1">
										<input
											[(ngModel)]="item.domain"
											[ngModelOptions]="{ standalone: true }"
											[placeholder]="t('license.payment_settings.tag_name')"
											class="w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md text-sm bg-white dark:bg-gray-700 text-gray-900 dark:text-white placeholder-gray-500 dark:placeholder-gray-400"
										/>
									</div>
									<div class="flex-1">
										<input
											[(ngModel)]="item.discount"
											[ngModelOptions]="{ standalone: true }"
											type="number"
											[placeholder]="t('license.payment_settings.discount')"
											class="w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md text-sm bg-white dark:bg-gray-700 text-gray-900 dark:text-white placeholder-gray-500 dark:placeholder-gray-400"
										/>
									</div>
									<div class="flex-1">
										<select
											[(ngModel)]="item.type"
											[ngModelOptions]="{ standalone: true }"
											class="w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md text-sm bg-white dark:bg-gray-700 text-gray-900 dark:text-white"
										>
											<option value="percentage">{{ t("license.payment_settings.percentage") }}</option>
											<option value="fixed">{{ t("license.payment_settings.fixed_amount") }}</option>
										</select>
									</div>
									<button
										type="button"
										(click)="removeWhitelistItem(i)"
										class="text-red-600 dark:text-red-400 hover:text-red-800 dark:hover:text-red-200"
									>
										<mat-icon class="text-sm">delete</mat-icon>
									</button>
								</div>
							</div>

							<div class="mt-4 p-3 bg-gray-50 dark:bg-gray-800 rounded-lg">
								<p class="text-sm font-medium text-gray-700 dark:text-gray-300 mb-2">
									{{ t("license.payment_settings.examples") }}
								</p>
								<p class="text-sm text-gray-600 dark:text-gray-400">{{ t("license.payment_settings.example_1") }}</p>
								<p class="text-sm text-gray-600 dark:text-gray-400">{{ t("license.payment_settings.example_2") }}</p>
							</div>
						</div>
					</div>
				</div>

				<!-- Pricing Table Card -->
				<div class="bg-white dark:bg-gray-800 rounded-lg shadow-sm border-2 border-orange-200 dark:border-orange-700 p-6">
					<div class="flex items-center justify-between mb-4">
						<div class="flex items-center">
							<mat-icon class="text-purple-600 dark:text-purple-400 mr-2">table_chart</mat-icon>
							<h3 class="text-lg font-semibold text-gray-900 dark:text-white">{{ t("license.pricing_table.title") }}</h3>
						</div>
						<button
							type="button"
							(click)="resetPricingTable()"
							class="inline-flex items-center px-3 py-2 border border-gray-300 dark:border-gray-600 text-sm font-medium rounded-md text-gray-700 dark:text-gray-300 bg-white dark:bg-gray-700 hover:bg-gray-50 dark:hover:bg-gray-600 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500"
						>
							<mat-icon class="text-sm mr-1">refresh</mat-icon>
							{{ t("license.pricing_table.reset_default") }}
						</button>
					</div>

					<div class="mb-4 p-4 bg-blue-50 dark:bg-blue-900/20 rounded-lg">
						<p class="text-sm text-blue-700 dark:text-blue-300">{{ t("license.pricing_table.description") }}</p>
					</div>

					<div class="overflow-x-auto">
						<table class="min-w-full border border-gray-200 dark:border-gray-700 rounded-lg">
							<thead class="bg-gray-50 dark:bg-gray-800">
								<tr>
									<th class="px-4 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider">
										{{ t("license.pricing_table.length") }}
									</th>
									<th class="px-4 py-3 text-center text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider">
										{{ t("license.pricing_table.one_year") }}
									</th>
									<th class="px-4 py-3 text-center text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider">
										{{ t("license.pricing_table.two_years") }}
									</th>
									<th class="px-4 py-3 text-center text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider">
										{{ t("license.pricing_table.three_years") }}
									</th>
									<th class="px-4 py-3 text-center text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider">
										{{ t("license.pricing_table.four_years") }}
									</th>
									<th class="px-4 py-3 text-center text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider">
										{{ t("license.pricing_table.five_years") }}
									</th>
									<th class="px-4 py-3 text-center text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider">
										{{ t("license.pricing_table.lifetime") }}
									</th>
								</tr>
							</thead>
							<tbody class="bg-white dark:bg-gray-900 divide-y divide-gray-200 dark:divide-gray-700">
								<tr *ngFor="let row of pricingTableRows; let i = index">
									<td class="px-4 py-3 text-sm font-medium text-gray-900 dark:text-white">{{ row.length }}</td>
									<td class="px-4 py-3 text-center">
										<input
											[(ngModel)]="row.oneYear"
											[ngModelOptions]="{ standalone: true }"
											type="number"
											class="w-20 px-2 py-1 text-sm border border-gray-300 dark:border-gray-600 rounded-md bg-white dark:bg-gray-700 text-gray-900 dark:text-white"
										/>
									</td>
									<td class="px-4 py-3 text-center">
										<input
											[(ngModel)]="row.twoYears"
											[ngModelOptions]="{ standalone: true }"
											type="number"
											class="w-20 px-2 py-1 text-sm border border-gray-300 dark:border-gray-600 rounded-md bg-white dark:bg-gray-700 text-gray-900 dark:text-white"
										/>
									</td>
									<td class="px-4 py-3 text-center">
										<input
											[(ngModel)]="row.threeYears"
											[ngModelOptions]="{ standalone: true }"
											type="number"
											class="w-20 px-2 py-1 text-sm border border-gray-300 dark:border-gray-600 rounded-md bg-white dark:bg-gray-700 text-gray-900 dark:text-white"
										/>
									</td>
									<td class="px-4 py-3 text-center">
										<input
											[(ngModel)]="row.fourYears"
											[ngModelOptions]="{ standalone: true }"
											type="number"
											class="w-20 px-2 py-1 text-sm border border-gray-300 dark:border-gray-600 rounded-md bg-white dark:bg-gray-700 text-gray-900 dark:text-white"
										/>
									</td>
									<td class="px-4 py-3 text-center">
										<input
											[(ngModel)]="row.fiveYears"
											[ngModelOptions]="{ standalone: true }"
											type="number"
											class="w-20 px-2 py-1 text-sm border border-gray-300 dark:border-gray-600 rounded-md bg-white dark:bg-gray-700 text-gray-900 dark:text-white"
										/>
									</td>
									<td class="px-4 py-3 text-center">
										<input
											[(ngModel)]="row.lifetime"
											[ngModelOptions]="{ standalone: true }"
											type="number"
											class="w-20 px-2 py-1 text-sm border border-gray-300 dark:border-gray-600 rounded-md bg-white dark:bg-gray-700 text-gray-900 dark:text-white"
										/>
									</td>
								</tr>
							</tbody>
						</table>
					</div>

					<div class="mt-4 p-4 bg-gray-50 dark:bg-gray-800 rounded-lg">
						<h4 class="text-sm font-medium text-gray-700 dark:text-gray-300 mb-2">
							{{ t("license.pricing_table.pricing_info") }}
						</h4>
						<ul class="text-sm text-gray-600 dark:text-gray-400 space-y-1">
							<li>{{ t("license.pricing_table.pricing_info_1") }}</li>
							<li>{{ t("license.pricing_table.pricing_info_2") }}</li>
							<li>{{ t("license.pricing_table.pricing_info_3") }}</li>
							<li>{{ t("license.pricing_table.pricing_info_4") }}</li>
						</ul>
					</div>
				</div>

				<!-- ZNS Storage Options Card -->
				<div class="bg-white dark:bg-gray-800 rounded-lg shadow-sm border-2 border-orange-200 dark:border-orange-700 p-6">
					<div class="flex items-center mb-4">
						<mat-icon class="text-purple-600 dark:text-purple-400 mr-2">storage</mat-icon>
						<h3 class="text-lg font-semibold text-gray-900 dark:text-white">{{ t("license.storage_options.title") }} (ZNS)</h3>
					</div>

					<div class="grid grid-cols-1 md:grid-cols-2 gap-6">
						<div class="space-y-4">
							<div class="border border-gray-200 dark:border-gray-600 rounded-lg p-4">
								<div class="flex items-center justify-between mb-2">
									<div class="flex items-center">
										<mat-icon class="text-blue-600 dark:text-blue-400 mr-2">cloud</mat-icon>
										<h3 class="font-medium text-gray-900 dark:text-white">
											{{ t("license.storage_options.ipfs_title") }}
										</h3>
									</div>
									<mat-slide-toggle [formControlName]="'ipfsEnabled'"></mat-slide-toggle>
								</div>
								<p class="text-sm text-gray-600 dark:text-gray-300">{{ t("license.storage_options.ipfs_description") }}</p>
							</div>

							<div class="border border-gray-200 dark:border-gray-600 rounded-lg p-4">
								<div class="flex items-center justify-between mb-2">
									<div class="flex items-center">
										<mat-icon class="text-green-600 dark:text-green-400 mr-2">archive</mat-icon>
										<h3 class="font-medium text-gray-900 dark:text-white">
											{{ t("license.storage_options.arweave_title") }}
										</h3>
									</div>
									<mat-slide-toggle [formControlName]="'arweaveEnabled'"></mat-slide-toggle>
								</div>
								<p class="text-sm text-gray-600 dark:text-gray-300">
									{{ t("license.storage_options.arweave_description") }}
								</p>
							</div>

							<div class="border border-gray-200 dark:border-gray-600 rounded-lg p-4">
								<div class="flex items-center justify-between mb-2">
									<div class="flex items-center">
										<mat-icon class="text-orange-600 dark:text-orange-400 mr-2">pets</mat-icon>
										<h3 class="font-medium text-gray-900 dark:text-white">
											{{ t("license.storage_options.walrus_title") }}
										</h3>
									</div>
									<mat-slide-toggle [formControlName]="'walrusEnabled'"></mat-slide-toggle>
								</div>
								<p class="text-sm text-gray-600 dark:text-gray-300">{{ t("license.storage_options.walrus_description") }}</p>
							</div>
						</div>

						<div class="space-y-4">
							<div>
								<mat-form-field class="fuse-mat-emphasized-affix w-full" [subscriptSizing]="'dynamic'">
									<mat-label>{{ t("license.storage_options.key_prefix") }}</mat-label>
									<input
										[formControlName]="'keyPrefix'"
										matInput
										[placeholder]="t('license.storage_options.key_prefix_placeholder')"
									/>
								</mat-form-field>
							</div>
						</div>
					</div>
				</div>
			</div>
		</div>

		<!-- ZelfKeys Configuration - Only show when ZelfKeys is enabled -->
		<div *ngIf="accountForm.get('zelfkeysEnabled')?.value" class="mb-6 transition-all duration-300 ease-in-out">
			<!-- ZelfKeys Header -->
			<div class="flex items-center mb-6">
				<mat-icon class="text-blue-600 dark:text-blue-400 mr-3 text-2xl">vpn_key</mat-icon>
				<div>
					<h2 class="text-xl font-bold text-gray-900 dark:text-white">{{ t("license.features.zelfkeys_title") }}</h2>
					<p class="text-sm text-gray-600 dark:text-gray-400">{{ t("license.features.zelfkeys_description") }}</p>
				</div>
				<div
					class="ml-auto px-4 py-2 bg-green-100 dark:bg-green-900/30 text-green-800 dark:text-green-200 text-sm font-medium rounded-full border border-green-200 dark:border-green-700"
				>
					{{ t("license.features.zelfkeys_enabled") }}
				</div>
			</div>

			<!-- ZelfKeys Cards Container with Indentation -->
			<div class="ml-6 space-y-4">
				<!-- ZelfKeys Storage Options Card -->
				<div class="bg-white dark:bg-gray-800 rounded-lg shadow-sm border-2 border-blue-200 dark:border-blue-700 p-6">
					<div class="flex items-center mb-4">
						<mat-icon class="text-purple-600 dark:text-purple-400 mr-2">storage</mat-icon>
						<h3 class="text-lg font-semibold text-gray-900 dark:text-white">{{ t("license.storage_options.title") }} (ZelfKeys)</h3>
					</div>

					<div class="grid grid-cols-1 md:grid-cols-2 gap-6">
						<div class="space-y-4">
							<div class="border border-gray-200 dark:border-gray-600 rounded-lg p-4">
								<div class="flex items-center justify-between mb-2">
									<div class="flex items-center">
										<mat-icon class="text-blue-600 dark:text-blue-400 mr-2">cloud</mat-icon>
										<h3 class="font-medium text-gray-900 dark:text-white">
											{{ t("license.storage_options.ipfs_title") }}
										</h3>
									</div>
									<mat-slide-toggle [formControlName]="'zelfkeysIpfsEnabled'"></mat-slide-toggle>
								</div>
								<p class="text-sm text-gray-600 dark:text-gray-300">{{ t("license.storage_options.ipfs_description") }}</p>
							</div>

							<div class="border border-gray-200 dark:border-gray-600 rounded-lg p-4">
								<div class="flex items-center justify-between mb-2">
									<div class="flex items-center">
										<mat-icon class="text-green-600 dark:text-green-400 mr-2">archive</mat-icon>
										<h3 class="font-medium text-gray-900 dark:text-white">
											{{ t("license.storage_options.arweave_title") }}
										</h3>
									</div>
									<mat-slide-toggle [formControlName]="'zelfkeysArweaveEnabled'"></mat-slide-toggle>
								</div>
								<p class="text-sm text-gray-600 dark:text-gray-300">
									{{ t("license.storage_options.arweave_description") }}
								</p>
							</div>

							<div class="border border-gray-200 dark:border-gray-600 rounded-lg p-4">
								<div class="flex items-center justify-between mb-2">
									<div class="flex items-center">
										<mat-icon class="text-orange-600 dark:text-orange-400 mr-2">pets</mat-icon>
										<h3 class="font-medium text-gray-900 dark:text-white">
											{{ t("license.storage_options.walrus_title") }}
										</h3>
									</div>
									<mat-slide-toggle [formControlName]="'zelfkeysWalrusEnabled'"></mat-slide-toggle>
								</div>
								<p class="text-sm text-gray-600 dark:text-gray-300">{{ t("license.storage_options.walrus_description") }}</p>
							</div>
						</div>

						<div class="space-y-4">
							<div>
								<mat-form-field class="fuse-mat-emphasized-affix w-full" [subscriptSizing]="'dynamic'">
									<mat-label>{{ t("license.storage_options.key_prefix") }}</mat-label>
									<input
										[formControlName]="'zelfkeysKeyPrefix'"
										matInput
										[placeholder]="t('license.storage_options.key_prefix_placeholder')"
									/>
								</mat-form-field>
							</div>
						</div>
					</div>
				</div>
			</div>
		</div>

		<!-- Metadata Configuration -->
		<div class="bg-white dark:bg-gray-800 rounded-lg shadow-sm border border-gray-200 dark:border-gray-700 p-6 mb-6">
			<div class="flex items-center mb-4">
				<mat-icon class="text-indigo-600 dark:text-indigo-400 mr-2">info</mat-icon>
				<h2 class="text-lg font-semibold text-gray-900 dark:text-white">{{ t("license.metadata.title") }}</h2>
			</div>

			<!-- Limits Information -->
			<div class="mb-6 p-4 bg-blue-50 dark:bg-blue-900/20 rounded-lg">
				<div class="flex">
					<div class="flex-shrink-0">
						<mat-icon class="text-blue-400">info</mat-icon>
					</div>
					<div class="ml-3">
						<h3 class="text-sm font-medium text-blue-800 dark:text-blue-200">{{ t("license.limits.info_title") }}</h3>
						<div class="mt-2 text-sm text-blue-700 dark:text-blue-300">
							<p>{{ t("license.limits.info_description") }}</p>
							<p class="mt-1">{{ t("license.limits.info_subscription") }}</p>
						</div>
					</div>
				</div>
			</div>

			<div class="grid grid-cols-1 md:grid-cols-2 gap-6">
				<div>
					<mat-form-field class="fuse-mat-emphasized-affix w-full" [subscriptSizing]="'dynamic'">
						<mat-label>{{ t("license.metadata.launch_date") }}</mat-label>
						<input [formControlName]="'launchDate'" matInput type="date" />
					</mat-form-field>
				</div>

				<div>
					<mat-form-field class="fuse-mat-emphasized-affix w-full" [subscriptSizing]="'dynamic'">
						<mat-label>{{ t("license.metadata.version") }}</mat-label>
						<input [formControlName]="'version'" matInput [placeholder]="t('license.metadata.version_placeholder')" />
					</mat-form-field>
				</div>

				<div>
					<mat-form-field class="fuse-mat-emphasized-affix w-full" [subscriptSizing]="'dynamic'">
						<mat-label>{{ t("license.metadata.documentation_url") }}</mat-label>
						<input [formControlName]="'documentation'" matInput [placeholder]="t('license.metadata.documentation_placeholder')" />
					</mat-form-field>
				</div>

				<div>
					<mat-form-field class="fuse-mat-emphasized-affix w-full" [subscriptSizing]="'dynamic'">
						<mat-label>{{ t("license.metadata.community") }}</mat-label>
						<input [formControlName]="'community'" matInput [placeholder]="t('license.metadata.community_placeholder')" />
					</mat-form-field>
				</div>

				<div>
					<mat-form-field class="fuse-mat-emphasized-affix w-full" [subscriptSizing]="'dynamic'">
						<mat-label>{{ t("license.metadata.enterprise") }}</mat-label>
						<input [formControlName]="'enterprise'" matInput [placeholder]="t('license.metadata.enterprise_placeholder')" />
					</mat-form-field>
				</div>

				<div>
					<mat-form-field class="fuse-mat-emphasized-affix w-full" [subscriptSizing]="'dynamic'">
						<mat-label>{{ t("license.metadata.support_level") }}</mat-label>
						<mat-select [formControlName]="'support'">
							<mat-option value="standard">{{ t("license.metadata.support_standard") }}</mat-option>
							<mat-option value="premium">{{ t("license.metadata.support_premium") }}</mat-option>
							<mat-option value="enterprise">{{ t("license.metadata.support_enterprise") }}</mat-option>
						</mat-select>
					</mat-form-field>
				</div>
			</div>
		</div>

		<!-- Actions -->
		<div class="flex items-center justify-end space-x-4">
			<button mat-stroked-button type="button" (click)="cancel()" [disabled]="isLoading">{{ t("license.actions.cancel") }}</button>
			<button mat-flat-button type="button" [color]="'primary'" (click)="saveLicense()" [disabled]="isLoading || accountForm.invalid">
				<mat-spinner *ngIf="isLoading" diameter="20" class="mr-2"></mat-spinner>
				{{ isLoading ? t("license.actions.processing") : t("license.actions.save_configuration") }}
			</button>
		</div>
	</form>
</div>
