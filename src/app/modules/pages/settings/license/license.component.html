<div class="flex flex-col min-h-screen bg-gray-50/50 dark:bg-gray-900 w-full" *transloco="let t">
	<!-- Main Content Container -->
	<div class="flex-auto px-4 py-8 sm:px-6 sm:py-12 md:px-8 w-full max-w-4xl mx-auto">
		<!-- Alert Messages -->
		@if (showAlert) {
			<div class="mb-6 animate-fade-in">
				<div
					class="flex items-center justify-between p-4 rounded-2xl shadow-sm border transaction-all duration-300"
					[class]="
						alertType === 'success'
							? 'bg-green-50 border-green-200 text-green-800 dark:bg-green-900/20 dark:border-green-800 dark:text-green-300'
							: 'bg-red-50 border-red-200 text-red-800 dark:bg-red-900/20 dark:border-red-800 dark:text-red-300'
					"
				>
					<div class="flex items-center gap-3">
						<div
							class="w-8 h-8 rounded-full flex items-center justify-center shrink-0"
							[class]="
								alertType === 'success'
									? 'bg-green-100 text-green-600 dark:bg-green-800 dark:text-green-200'
									: 'bg-red-100 text-red-600 dark:bg-red-800 dark:text-red-200'
							"
						>
							<mat-icon class="icon-size-5">{{ alertType === "success" ? "check" : "priority_high" }}</mat-icon>
						</div>
						<span class="font-medium text-sm">{{ alertMessage }}</span>
					</div>
				</div>
			</div>
		}

		<form [formGroup]="accountForm">
			<!-- Basic Information Card -->
			<div class="bg-white dark:bg-slate-800 rounded-3xl shadow-xl overflow-hidden mb-8 border border-gray-100 dark:border-gray-700/50">
				<div class="p-8 sm:p-10">
					<div class="flex items-center gap-3 mb-6">
						<div
							class="w-10 h-10 rounded-full bg-blue-100 dark:bg-blue-900/30 flex items-center justify-center text-blue-600 dark:text-blue-400"
						>
							<mat-icon class="icon-size-5">info</mat-icon>
						</div>
						<div>
							<h2 class="text-xl font-bold text-gray-900 dark:text-white">{{ t("license.basic_information.title") }}</h2>
							<p class="text-sm text-gray-500 dark:text-gray-400">General domain settings</p>
						</div>
					</div>

					<div class="grid grid-cols-1 md:grid-cols-2 gap-6">
						<!-- Domain Name -->
						<div class="space-y-1.5">
							<label class="text-sm font-semibold text-gray-700 dark:text-gray-300 ml-1">{{
								t("license.basic_information.domain_name")
							}}</label>
							<div
								class="flex items-center w-full bg-gray-50 dark:bg-gray-900/50 border border-gray-200 dark:border-gray-700 rounded-xl px-4 focus-within:border-gray-400 dark:focus-within:border-gray-500 focus-within:ring-4 focus-within:ring-gray-100 dark:focus-within:ring-gray-800 transition-all"
							>
								<span class="text-gray-500 font-medium select-none text-base">johndoe</span>
								<span class="text-gray-400 dark:text-gray-500 font-medium select-none mx-0.5">.</span>
								<input
									[formControlName]="'domain'"
									class="flex-1 bg-transparent border-none focus:ring-0 text-gray-900 dark:text-white py-3 font-semibold text-base placeholder-gray-400"
									[placeholder]="t('license.basic_information.domain_placeholder')"
								/>
							</div>
							<div class="h-4 pl-1">
								<span
									*ngIf="accountForm.get('domain')?.hasError('required') && accountForm.get('domain')?.touched"
									class="text-xs text-red-500 font-medium"
								>
									{{ t("license.basic_information.domain_required") }}
								</span>
								<span
									*ngIf="accountForm.get('domain')?.hasError('pattern') && accountForm.get('domain')?.touched"
									class="text-xs text-red-500 font-medium"
								>
									{{ t("license.basic_information.domain_pattern_error") }}
								</span>
							</div>
						</div>

						<!-- Status -->
						<div class="space-y-1.5">
							<label class="text-sm font-semibold text-gray-700 dark:text-gray-300 ml-1">{{
								t("license.basic_information.status")
							}}</label>
							<input
								[formControlName]="'status'"
								readonly
								class="w-full bg-gray-100 dark:bg-gray-800 text-gray-500 dark:text-gray-400 border border-gray-200 dark:border-gray-700 rounded-xl px-4 py-3 cursor-not-allowed font-medium uppercase"
							/>
						</div>

						<!-- Owner -->
						<div class="space-y-1.5">
							<label class="text-sm font-semibold text-gray-700 dark:text-gray-300 ml-1">{{
								t("license.basic_information.owner")
							}}</label>
							<input
								[formControlName]="'owner'"
								class="w-full bg-gray-50 dark:bg-gray-900/50 text-gray-900 dark:text-white border border-gray-200 dark:border-gray-700 rounded-xl px-4 py-3 focus:outline-none focus:ring-2 focus:ring-gray-900 dark:focus:ring-gray-100 transition-all font-medium"
								[placeholder]="t('license.basic_information.owner_placeholder')"
							/>
						</div>

						<!-- Dates -->
						<div class="space-y-1.5">
							<label class="text-sm font-semibold text-gray-700 dark:text-gray-300 ml-1 flex items-center justify-between">
								{{ t("license.basic_information.start_date") }}
								<span class="text-xs font-normal text-orange-500 bg-orange-50 dark:bg-orange-900/20 px-2 py-0.5 rounded-full"
									>System</span
								>
							</label>
							<input
								[formControlName]="'startDate'"
								type="date"
								readonly
								class="w-full bg-gray-100 dark:bg-gray-800 text-gray-500 dark:text-gray-400 border border-gray-200 dark:border-gray-700 rounded-xl px-4 py-3 cursor-not-allowed font-medium"
							/>
						</div>

						<div class="space-y-1.5">
							<label class="text-sm font-semibold text-gray-700 dark:text-gray-300 ml-1 flex items-center justify-between">
								{{ t("license.basic_information.end_date") }}
								<span class="text-xs font-normal text-orange-500 bg-orange-50 dark:bg-orange-900/20 px-2 py-0.5 rounded-full"
									>System</span
								>
							</label>
							<input
								[formControlName]="'endDate'"
								type="date"
								readonly
								class="w-full bg-gray-100 dark:bg-gray-800 text-gray-500 dark:text-gray-400 border border-gray-200 dark:border-gray-700 rounded-xl px-4 py-3 cursor-not-allowed font-medium"
							/>
						</div>

						<!-- Description -->
						<div class="md:col-span-2 space-y-1.5">
							<label class="text-sm font-semibold text-gray-700 dark:text-gray-300 ml-1">{{
								t("license.basic_information.description")
							}}</label>
							<textarea
								[formControlName]="'description'"
								rows="3"
								class="w-full bg-gray-50 dark:bg-gray-900/50 text-gray-900 dark:text-white border border-gray-200 dark:border-gray-700 rounded-xl px-4 py-3 focus:outline-none focus:ring-2 focus:ring-gray-900 dark:focus:ring-gray-100 transition-all font-medium resize-none"
								[placeholder]="t('license.basic_information.description_placeholder')"
							></textarea>
						</div>
					</div>
				</div>
			</div>

			<!-- Features Configuration -->
			<div class="bg-white dark:bg-slate-800 rounded-3xl shadow-xl overflow-hidden mb-8 border border-gray-100 dark:border-gray-700/50">
				<div class="p-8 sm:p-10">
					<div class="flex items-center gap-3 mb-6">
						<div
							class="w-10 h-10 rounded-full bg-green-100 dark:bg-green-900/30 flex items-center justify-center text-green-600 dark:text-green-400"
						>
							<mat-icon class="icon-size-5">extension</mat-icon>
						</div>
						<div>
							<h2 class="text-xl font-bold text-gray-900 dark:text-white">{{ t("license.features.title") }}</h2>
							<p class="text-sm text-gray-500 dark:text-gray-400">Enable services</p>
						</div>
					</div>

					<div class="grid grid-cols-1 md:grid-cols-2 gap-4">
						<!-- ZNS Toggle -->
						<div
							class="flex items-center justify-between p-5 rounded-2xl border border-gray-100 dark:border-gray-700/50 hover:bg-gray-50 dark:hover:bg-gray-700/30 transition-all cursor-pointer"
							(click)="accountForm.get('znsEnabled')?.setValue(!accountForm.get('znsEnabled')?.value)"
						>
							<div>
								<h3 class="font-semibold text-gray-900 dark:text-white">{{ t("license.features.zns_title") }}</h3>
								<p class="text-sm text-gray-500 dark:text-gray-400">{{ t("license.features.zns_description") }}</p>
							</div>
							<mat-slide-toggle [formControlName]="'znsEnabled'" (click)="$event.stopPropagation()"></mat-slide-toggle>
						</div>

						<!-- ZelfKeys Toggle -->
						<div
							class="flex items-center justify-between p-5 rounded-2xl border border-gray-100 dark:border-gray-700/50 hover:bg-gray-50 dark:hover:bg-gray-700/30 transition-all cursor-pointer"
							(click)="accountForm.get('zelfkeysEnabled')?.setValue(!accountForm.get('zelfkeysEnabled')?.value)"
						>
							<div>
								<h3 class="font-semibold text-gray-900 dark:text-white">{{ t("license.features.zelfkeys_title") }}</h3>
								<p class="text-sm text-gray-500 dark:text-gray-400">{{ t("license.features.zelfkeys_description") }}</p>
							</div>
							<mat-slide-toggle [formControlName]="'zelfkeysEnabled'" (click)="$event.stopPropagation()"></mat-slide-toggle>
						</div>
					</div>
				</div>
			</div>

			<!-- ZelfKeys Storage -->
			@if (accountForm.get("zelfkeysEnabled")?.value) {
				<div class="mb-8 animate-fade-in pl-4 border-l-2 border-blue-500">
					<div class="flex items-center gap-3 mb-6">
						<span
							class="px-4 py-1.5 bg-blue-100 dark:bg-blue-900/30 text-blue-700 dark:text-blue-300 rounded-full text-sm font-bold border border-blue-200 dark:border-blue-800 flex items-center gap-2 shadow-sm"
						>
							<mat-icon class="icon-size-4">vpn_key</mat-icon>
							ZelfKeys
						</span>
						<div class="h-px bg-blue-200 dark:bg-blue-800/50 flex-1"></div>
					</div>
					<div class="bg-white dark:bg-slate-800 rounded-3xl shadow-xl overflow-hidden border border-gray-100 dark:border-gray-700/50">
						<div class="p-8 sm:p-10">
							<div class="flex items-center gap-3 mb-6">
								<div
									class="w-10 h-10 rounded-full bg-blue-100 dark:bg-blue-900/30 flex items-center justify-center text-blue-600 dark:text-blue-400"
								>
									<mat-icon class="icon-size-5">vpn_key</mat-icon>
								</div>
								<div>
									<h2 class="text-xl font-bold text-gray-900 dark:text-white">
										{{ t("license.storage_options.title") }} (ZelfKeys)
									</h2>
									<p class="text-sm text-gray-500 dark:text-gray-400">Key storage settings</p>
								</div>
							</div>

							<div class="grid grid-cols-1 md:grid-cols-3 gap-4 mb-6">
								<div class="p-4 rounded-xl border border-gray-200 dark:border-gray-700 hover:bg-gray-50 dark:hover:bg-gray-900/20">
									<div class="flex justify-between items-center mb-2">
										<span class="font-medium text-gray-900 dark:text-white">IPFS</span>
										<mat-slide-toggle [formControlName]="'zelfkeysIpfsEnabled'"></mat-slide-toggle>
									</div>
								</div>
								<div class="p-4 rounded-xl border border-gray-200 dark:border-gray-700 hover:bg-gray-50 dark:hover:bg-gray-900/20">
									<div class="flex justify-between items-center mb-2">
										<span class="font-medium text-gray-900 dark:text-white">Arweave</span>
										<mat-slide-toggle [formControlName]="'zelfkeysArweaveEnabled'"></mat-slide-toggle>
									</div>
								</div>
								<div class="p-4 rounded-xl border border-gray-200 dark:border-gray-700 hover:bg-gray-50 dark:hover:bg-gray-900/20">
									<div class="flex justify-between items-center mb-2">
										<span class="font-medium text-gray-900 dark:text-white">Walrus</span>
										<mat-slide-toggle [formControlName]="'zelfkeysWalrusEnabled'"></mat-slide-toggle>
									</div>
								</div>
							</div>

							<div class="space-y-1.5 max-w-md">
								<label class="text-sm font-semibold text-gray-700 dark:text-gray-300 ml-1">{{
									t("license.storage_options.key_prefix")
								}}</label>
								<input
									[formControlName]="'zelfkeysKeyPrefix'"
									class="w-full bg-gray-50 dark:bg-gray-900/50 text-gray-900 dark:text-white border border-gray-200 dark:border-gray-700 rounded-xl px-4 py-3 focus:outline-none focus:ring-2 focus:ring-blue-500 transition-all font-medium"
								/>
							</div>
						</div>
					</div>
				</div>
			}

			<!-- Metadata Card -->
			<div class="bg-white dark:bg-slate-800 rounded-3xl shadow-xl overflow-hidden mb-8 border border-gray-100 dark:border-gray-700/50">
				<div class="p-8 sm:p-10">
					<div class="flex items-center gap-3 mb-6">
						<div
							class="w-10 h-10 rounded-full bg-cyan-100 dark:bg-cyan-900/30 flex items-center justify-center text-cyan-600 dark:text-cyan-400"
						>
							<mat-icon class="icon-size-5">description</mat-icon>
						</div>
						<div>
							<h2 class="text-xl font-bold text-gray-900 dark:text-white">{{ t("license.metadata.title") }}</h2>
							<p class="text-sm text-gray-500 dark:text-gray-400">Additional information</p>
						</div>
					</div>

					<div class="grid grid-cols-1 md:grid-cols-2 gap-6">
						<div class="space-y-1.5">
							<label class="text-sm font-semibold text-gray-700 dark:text-gray-300 ml-1">{{ t("license.metadata.launch_date") }}</label>
							<input
								[formControlName]="'launchDate'"
								type="date"
								class="w-full bg-gray-50 dark:bg-gray-900/50 text-gray-900 dark:text-white border border-gray-200 dark:border-gray-700 rounded-xl px-4 py-3 focus:outline-none focus:ring-2 focus:ring-cyan-500 transition-all font-medium"
							/>
						</div>
						<div class="space-y-1.5">
							<label class="text-sm font-semibold text-gray-700 dark:text-gray-300 ml-1">{{ t("license.metadata.version") }}</label>
							<input
								[formControlName]="'version'"
								class="w-full bg-gray-50 dark:bg-gray-900/50 text-gray-900 dark:text-white border border-gray-200 dark:border-gray-700 rounded-xl px-4 py-3 focus:outline-none focus:ring-2 focus:ring-cyan-500 transition-all font-medium"
							/>
						</div>
						<div class="space-y-1.5">
							<label class="text-sm font-semibold text-gray-700 dark:text-gray-300 ml-1">{{
								t("license.metadata.documentation_url")
							}}</label>
							<input
								[formControlName]="'documentation'"
								class="w-full bg-gray-50 dark:bg-gray-900/50 text-gray-900 dark:text-white border border-gray-200 dark:border-gray-700 rounded-xl px-4 py-3 focus:outline-none focus:ring-2 focus:ring-cyan-500 transition-all font-medium"
							/>
						</div>
						<div class="space-y-1.5">
							<label class="text-sm font-semibold text-gray-700 dark:text-gray-300 ml-1">{{
								t("license.metadata.support_level")
							}}</label>
							<div class="relative">
								<select
									[formControlName]="'support'"
									class="w-full bg-gray-50 dark:bg-gray-900/50 text-gray-900 dark:text-white border border-gray-200 dark:border-gray-700 rounded-xl px-4 py-3 focus:outline-none focus:ring-2 focus:ring-cyan-500 transition-all font-medium appearance-none"
								>
									<option value="standard">{{ t("license.metadata.support_standard") }}</option>
									<option value="premium">{{ t("license.metadata.support_premium") }}</option>
									<option value="enterprise">{{ t("license.metadata.support_enterprise") }}</option>
								</select>
								<mat-icon class="absolute right-4 top-1/2 -translate-y-1/2 icon-size-4 text-gray-500 pointer-events-none"
									>expand_more</mat-icon
								>
							</div>
						</div>
					</div>
				</div>
			</div>

			<!-- Bottom Actions -->
			<div class="sticky bottom-6 z-10 mx-auto max-w-4xl">
				<div
					class="bg-gray-900/90 dark:bg-slate-800/90 backdrop-blur-md rounded-2xl shadow-2xl p-4 flex items-center justify-between border border-white/10"
				>
					<button
						(click)="cancel()"
						[disabled]="isLoading"
						class="px-4 py-2 text-gray-300 hover:text-white text-sm font-medium transition-colors"
					>
						{{ t("license.actions.cancel") }}
					</button>
					<div class="flex items-center gap-3">
						<button class="px-4 py-2 text-gray-300 hover:text-white text-sm font-medium transition-colors" [disabled]="isLoading">
							Reset
						</button>
						<button
							(click)="saveLicense()"
							[disabled]="isLoading || accountForm.invalid"
							class="px-6 py-2 bg-white text-gray-900 rounded-xl text-sm font-bold hover:bg-gray-100 transition-colors shadow-lg disabled:opacity-50 disabled:cursor-not-allowed flex items-center gap-2"
						>
							@if (isLoading) {
								<mat-icon class="icon-size-4 animate-spin">refresh</mat-icon>
								<span>{{ t("license.actions.processing") }}</span>
							} @else {
								<span>{{ t("license.actions.save_configuration") }}</span>
							}
						</button>
					</div>
				</div>
			</div>

			<div class="h-12"></div>
		</form>
	</div>
</div>
