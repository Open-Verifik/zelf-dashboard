<div class="space-y-8 w-full" *transloco="let t">
	<!-- Alert Messages -->
	@if (showAlert) {
		<div
			class="rounded-lg p-4"
			[ngClass]="{
				'bg-green-50 text-green-800 border border-green-200': alertType === 'success',
				'bg-red-50 text-red-800 border border-red-200': alertType === 'error',
			}"
		>
			<div class="flex items-center">
				<mat-icon
					class="mr-2"
					[ngClass]="{
						'text-green-500': alertType === 'success',
						'text-red-500': alertType === 'error',
					}"
				>
					{{ alertType === "success" ? "check_circle" : "error" }}
				</mat-icon>
				{{ alertMessage }}
			</div>
		</div>
	}

	<!-- Theme Settings Form -->
	<form [formGroup]="themeForm" (ngSubmit)="saveThemeSettings()" class="space-y-8">
		<div class="p-6 space-y-6">
			<!-- Section Header -->
			<div class="flex items-center justify-between">
				<div>
					<h3 class="text-xl font-semibold text-gray-900 dark:text-white">{{ t(getTranslationPrefix() + ".title") }}</h3>
					<p class="text-sm text-gray-600 dark:text-gray-400">{{ t(getTranslationPrefix() + ".description") }}</p>
				</div>
				<div class="flex space-x-2">
					<button type="button" mat-button color="warn" (click)="resetColors()" class="text-sm">
						{{ t(getTranslationPrefix() + ".reset") }}
					</button>
				</div>
			</div>

			<!-- Dark Mode Toggle -->
			<div class="flex items-center space-x-4">
				<mat-slide-toggle [checked]="isDarkMode()" (change)="toggleDarkMode()">
					{{ t(getTranslationPrefix() + ".dark_mode") }}
				</mat-slide-toggle>
				<span class="text-sm text-gray-600 dark:text-gray-400">
					{{ t(getTranslationPrefix() + ".dark_mode_description") }}
				</span>
			</div>

			<mat-divider></mat-divider>

			<!-- Loading State -->
			@if (isLoadingColors) {
				<div class="flex items-center justify-center py-12">
					<div class="text-center">
						<mat-icon class="animate-spin text-blue-600 text-4xl mb-4">refresh</mat-icon>
						<p class="text-gray-600 dark:text-gray-400">{{ t("theme_settings.actions.updating_colors") }}</p>
					</div>
				</div>
			}

			<!-- Color Customization Grid -->
			@if (!isLoadingColors) {
				<ng-container *ngTemplateOutlet="colorGridTemplate"></ng-container>
			}
		</div>

		<!-- Color Grid Template -->
		<ng-template #colorGridTemplate>
			<div [formGroup]="getColorsFormGroup()" class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6">
				<!-- Primary Colors -->
				<mat-card class="p-4">
					<mat-card-header>
						<mat-card-title class="text-lg">Primary Colors</mat-card-title>
					</mat-card-header>
					<mat-card-content class="space-y-4">
						<div class="space-y-2">
							<label class="text-sm font-medium text-gray-700 dark:text-gray-300">Primary</label>
							<div class="flex items-center space-x-2">
								<input
									type="color"
									formControlName="primary"
									class="w-12 h-8 rounded border border-gray-300 cursor-pointer"
									(change)="onColorChange(getColorsFormGroup(), 'primary', $event)"
								/>
								<input
									type="text"
									formControlName="primary"
									class="flex-1 px-3 py-2 border border-gray-300 rounded-md text-sm"
									placeholder="#3B82F6"
									(change)="onTextChange(getColorsFormGroup(), 'primary', $event)"
								/>
							</div>
						</div>
						<div class="space-y-2">
							<label class="text-sm font-medium text-gray-700 dark:text-gray-300">Secondary</label>
							<div class="flex items-center space-x-2">
								<input
									type="color"
									formControlName="secondary"
									class="w-12 h-8 rounded border border-gray-300 cursor-pointer"
									(change)="onColorChange(getColorsFormGroup(), 'secondary', $event)"
								/>
								<input
									type="text"
									formControlName="secondary"
									class="flex-1 px-3 py-2 border border-gray-300 rounded-md text-sm"
									placeholder="#64748B"
									(change)="onTextChange(getColorsFormGroup(), 'secondary', $event)"
								/>
							</div>
						</div>
					</mat-card-content>
				</mat-card>

				<!-- Background Colors -->
				<mat-card class="p-4">
					<mat-card-header>
						<mat-card-title class="text-lg">Background Colors</mat-card-title>
					</mat-card-header>
					<mat-card-content class="space-y-4">
						<div class="space-y-2">
							<label class="text-sm font-medium text-gray-700 dark:text-gray-300">Background</label>
							<div class="flex items-center space-x-2">
								<input
									type="color"
									formControlName="background"
									class="w-12 h-8 rounded border border-gray-300 cursor-pointer"
									(change)="onColorChange(getColorsFormGroup(), 'background', $event)"
								/>
								<input
									type="text"
									formControlName="background"
									class="flex-1 px-3 py-2 border border-gray-300 rounded-md text-sm"
									placeholder="#FFFFFF"
									(change)="onTextChange(getColorsFormGroup(), 'background', $event)"
								/>
							</div>
						</div>
						<div class="space-y-2">
							<label class="text-sm font-medium text-gray-700 dark:text-gray-300">Secondary Background</label>
							<div class="flex items-center space-x-2">
								<input
									type="color"
									formControlName="backgroundSecondary"
									class="w-12 h-8 rounded border border-gray-300 cursor-pointer"
									(change)="onColorChange(getColorsFormGroup(), 'backgroundSecondary', $event)"
								/>
								<input
									type="text"
									formControlName="backgroundSecondary"
									class="flex-1 px-3 py-2 border border-gray-300 rounded-md text-sm"
									placeholder="#F8FAFC"
									(change)="onTextChange(getColorsFormGroup(), 'backgroundSecondary', $event)"
								/>
							</div>
						</div>
					</mat-card-content>
				</mat-card>

				<!-- Text Colors -->
				<mat-card class="p-4">
					<mat-card-header>
						<mat-card-title class="text-lg">Text Colors</mat-card-title>
					</mat-card-header>
					<mat-card-content class="space-y-4">
						<div class="space-y-2">
							<label class="text-sm font-medium text-gray-700 dark:text-gray-300">Primary Text</label>
							<div class="flex items-center space-x-2">
								<input
									type="color"
									formControlName="text"
									class="w-12 h-8 rounded border border-gray-300 cursor-pointer"
									(change)="onColorChange(getColorsFormGroup(), 'text', $event)"
								/>
								<input
									type="text"
									formControlName="text"
									class="flex-1 px-3 py-2 border border-gray-300 rounded-md text-sm"
									placeholder="#1E293B"
									(change)="onTextChange(getColorsFormGroup(), 'text', $event)"
								/>
							</div>
						</div>
						<div class="space-y-2">
							<label class="text-sm font-medium text-gray-700 dark:text-gray-300">Secondary Text</label>
							<div class="flex items-center space-x-2">
								<input
									type="color"
									formControlName="textSecondary"
									class="w-12 h-8 rounded border border-gray-300 cursor-pointer"
									(change)="onColorChange(getColorsFormGroup(), 'textSecondary', $event)"
								/>
								<input
									type="text"
									formControlName="textSecondary"
									class="flex-1 px-3 py-2 border border-gray-300 rounded-md text-sm"
									placeholder="#64748B"
									(change)="onTextChange(getColorsFormGroup(), 'textSecondary', $event)"
								/>
							</div>
						</div>
						<div class="space-y-2">
							<label class="text-sm font-medium text-gray-700 dark:text-gray-300">Muted Text</label>
							<div class="flex items-center space-x-2">
								<input
									type="color"
									formControlName="textMuted"
									class="w-12 h-8 rounded border border-gray-300 cursor-pointer"
									(change)="onColorChange(getColorsFormGroup(), 'textMuted', $event)"
								/>
								<input
									type="text"
									formControlName="textMuted"
									class="flex-1 px-3 py-2 border border-gray-300 rounded-md text-sm"
									placeholder="#94A3B8"
									(change)="onTextChange(getColorsFormGroup(), 'textMuted', $event)"
								/>
							</div>
						</div>
					</mat-card-content>
				</mat-card>

				<!-- Header Colors -->
				<mat-card class="p-4">
					<mat-card-header>
						<mat-card-title class="text-lg">Header Colors</mat-card-title>
					</mat-card-header>
					<mat-card-content class="space-y-4">
						<div class="space-y-2">
							<label class="text-sm font-medium text-gray-700 dark:text-gray-300">Header Background</label>
							<div class="flex items-center space-x-2">
								<input
									type="color"
									formControlName="header"
									class="w-12 h-8 rounded border border-gray-300 cursor-pointer"
									(change)="onColorChange(getColorsFormGroup(), 'header', $event)"
								/>
								<input
									type="text"
									formControlName="header"
									class="flex-1 px-3 py-2 border border-gray-300 rounded-md text-sm"
									placeholder="#1E293B"
									(change)="onTextChange(getColorsFormGroup(), 'header', $event)"
								/>
							</div>
						</div>
						<div class="space-y-2">
							<label class="text-sm font-medium text-gray-700 dark:text-gray-300">Header Text</label>
							<div class="flex items-center space-x-2">
								<input
									type="color"
									formControlName="headerText"
									class="w-12 h-8 rounded border border-gray-300 cursor-pointer"
									(change)="onColorChange(getColorsFormGroup(), 'headerText', $event)"
								/>
								<input
									type="text"
									formControlName="headerText"
									class="flex-1 px-3 py-2 border border-gray-300 rounded-md text-sm"
									placeholder="#FFFFFF"
									(change)="onTextChange(getColorsFormGroup(), 'headerText', $event)"
								/>
							</div>
						</div>
					</mat-card-content>
				</mat-card>

				<!-- Button Colors -->
				<mat-card class="p-4">
					<mat-card-header>
						<mat-card-title class="text-lg">Button Colors</mat-card-title>
					</mat-card-header>
					<mat-card-content class="space-y-4">
						<div class="space-y-2">
							<label class="text-sm font-medium text-gray-700 dark:text-gray-300">Primary Button</label>
							<div class="flex items-center space-x-2">
								<input
									type="color"
									formControlName="button"
									class="w-12 h-8 rounded border border-gray-300 cursor-pointer"
									(change)="onColorChange(getColorsFormGroup(), 'button', $event)"
								/>
								<input
									type="text"
									formControlName="button"
									class="flex-1 px-3 py-2 border border-gray-300 rounded-md text-sm"
									placeholder="#3B82F6"
									(change)="onTextChange(getColorsFormGroup(), 'button', $event)"
								/>
							</div>
						</div>
						<div class="space-y-2">
							<label class="text-sm font-medium text-gray-700 dark:text-gray-300">Button Text</label>
							<div class="flex items-center space-x-2">
								<input
									type="color"
									formControlName="buttonText"
									class="w-12 h-8 rounded border border-gray-300 cursor-pointer"
									(change)="onColorChange(getColorsFormGroup(), 'buttonText', $event)"
								/>
								<input
									type="text"
									formControlName="buttonText"
									class="flex-1 px-3 py-2 border border-gray-300 rounded-md text-sm"
									placeholder="#FFFFFF"
									(change)="onTextChange(getColorsFormGroup(), 'buttonText', $event)"
								/>
							</div>
						</div>
						<div class="space-y-2">
							<label class="text-sm font-medium text-gray-700 dark:text-gray-300">Button Hover</label>
							<div class="flex items-center space-x-2">
								<input
									type="color"
									formControlName="buttonHover"
									class="w-12 h-8 rounded border border-gray-300 cursor-pointer"
									(change)="onColorChange(getColorsFormGroup(), 'buttonHover', $event)"
								/>
								<input
									type="text"
									formControlName="buttonHover"
									class="flex-1 px-3 py-2 border border-gray-300 rounded-md text-sm"
									placeholder="#2563EB"
									(change)="onTextChange(getColorsFormGroup(), 'buttonHover', $event)"
								/>
							</div>
						</div>
						<div class="space-y-2">
							<label class="text-sm font-medium text-gray-700 dark:text-gray-300">Secondary Button</label>
							<div class="flex items-center space-x-2">
								<input
									type="color"
									formControlName="buttonSecondary"
									class="w-12 h-8 rounded border border-gray-300 cursor-pointer"
									(change)="onColorChange(getColorsFormGroup(), 'buttonSecondary', $event)"
								/>
								<input
									type="text"
									formControlName="buttonSecondary"
									class="flex-1 px-3 py-2 border border-gray-300 rounded-md text-sm"
									placeholder="#E2E8F0"
									(change)="onTextChange(getColorsFormGroup(), 'buttonSecondary', $event)"
								/>
							</div>
						</div>
						<div class="space-y-2">
							<label class="text-sm font-medium text-gray-700 dark:text-gray-300">Secondary Button Text</label>
							<div class="flex items-center space-x-2">
								<input
									type="color"
									formControlName="buttonSecondaryText"
									class="w-12 h-8 rounded border border-gray-300 cursor-pointer"
									(change)="onColorChange(getColorsFormGroup(), 'buttonSecondaryText', $event)"
								/>
								<input
									type="text"
									formControlName="buttonSecondaryText"
									class="flex-1 px-3 py-2 border border-gray-300 rounded-md text-sm"
									placeholder="#475569"
									(change)="onTextChange(getColorsFormGroup(), 'buttonSecondaryText', $event)"
								/>
							</div>
						</div>
						<div class="space-y-2">
							<label class="text-sm font-medium text-gray-700 dark:text-gray-300">Secondary Button Hover</label>
							<div class="flex items-center space-x-2">
								<input
									type="color"
									formControlName="buttonSecondaryHover"
									class="w-12 h-8 rounded border border-gray-300 cursor-pointer"
									(change)="onColorChange(getColorsFormGroup(), 'buttonSecondaryHover', $event)"
								/>
								<input
									type="text"
									formControlName="buttonSecondaryHover"
									class="flex-1 px-3 py-2 border border-gray-300 rounded-md text-sm"
									placeholder="#475569"
									(change)="onTextChange(getColorsFormGroup(), 'buttonSecondaryHover', $event)"
								/>
							</div>
						</div>
					</mat-card-content>
				</mat-card>

				<!-- Border Colors -->
				<mat-card class="p-4">
					<mat-card-header>
						<mat-card-title class="text-lg">Border Colors</mat-card-title>
					</mat-card-header>
					<mat-card-content class="space-y-4">
						<div class="space-y-2">
							<label class="text-sm font-medium text-gray-700 dark:text-gray-300">Border</label>
							<div class="flex items-center space-x-2">
								<input
									type="color"
									formControlName="border"
									class="w-12 h-8 rounded border border-gray-300 cursor-pointer"
									(change)="onColorChange(getColorsFormGroup(), 'border', $event)"
								/>
								<input
									type="text"
									formControlName="border"
									class="flex-1 px-3 py-2 border border-gray-300 rounded-md text-sm"
									placeholder="#E2E8F0"
									(change)="onTextChange(getColorsFormGroup(), 'border', $event)"
								/>
							</div>
						</div>
						<div class="space-y-2">
							<label class="text-sm font-medium text-gray-700 dark:text-gray-300">Border Hover</label>
							<div class="flex items-center space-x-2">
								<input
									type="color"
									formControlName="borderHover"
									class="w-12 h-8 rounded border border-gray-300 cursor-pointer"
									(change)="onColorChange(getColorsFormGroup(), 'borderHover', $event)"
								/>
								<input
									type="text"
									formControlName="borderHover"
									class="flex-1 px-3 py-2 border border-gray-300 rounded-md text-sm"
									placeholder="#CBD5E1"
									(change)="onTextChange(getColorsFormGroup(), 'borderHover', $event)"
								/>
							</div>
						</div>
					</mat-card-content>
				</mat-card>

				<!-- Card Colors -->
				<mat-card class="p-4">
					<mat-card-header>
						<mat-card-title class="text-lg">Card Colors</mat-card-title>
					</mat-card-header>
					<mat-card-content class="space-y-4">
						<div class="space-y-2">
							<label class="text-sm font-medium text-gray-700 dark:text-gray-300">Card Background</label>
							<div class="flex items-center space-x-2">
								<input
									type="color"
									formControlName="card"
									class="w-12 h-8 rounded border border-gray-300 cursor-pointer"
									(change)="onColorChange(getColorsFormGroup(), 'card', $event)"
								/>
								<input
									type="text"
									formControlName="card"
									class="flex-1 px-3 py-2 border border-gray-300 rounded-md text-sm"
									placeholder="#FFFFFF"
									(change)="onTextChange(getColorsFormGroup(), 'card', $event)"
								/>
							</div>
						</div>
						<div class="space-y-2">
							<label class="text-sm font-medium text-gray-700 dark:text-gray-300">Card Border</label>
							<div class="flex items-center space-x-2">
								<input
									type="color"
									formControlName="cardBorder"
									class="w-12 h-8 rounded border border-gray-300 cursor-pointer"
									(change)="onColorChange(getColorsFormGroup(), 'cardBorder', $event)"
								/>
								<input
									type="text"
									formControlName="cardBorder"
									class="flex-1 px-3 py-2 border border-gray-300 rounded-md text-sm"
									placeholder="#E2E8F0"
									(change)="onTextChange(getColorsFormGroup(), 'cardBorder', $event)"
								/>
							</div>
						</div>
						<div class="space-y-2">
							<label class="text-sm font-medium text-gray-700 dark:text-gray-300">Shadow</label>
							<div class="flex items-center space-x-2">
								<input
									type="text"
									formControlName="shadow"
									class="flex-1 px-3 py-2 border border-gray-300 rounded-md text-sm"
									placeholder="rgba(0, 0, 0, 0.1)"
									(change)="onTextChange(getColorsFormGroup(), 'shadow', $event)"
								/>
							</div>
						</div>
					</mat-card-content>
				</mat-card>

				<!-- Status Colors -->
				<mat-card class="p-4">
					<mat-card-header>
						<mat-card-title class="text-lg">Status Colors</mat-card-title>
					</mat-card-header>
					<mat-card-content class="space-y-4">
						<div class="space-y-2">
							<label class="text-sm font-medium text-gray-700 dark:text-gray-300">Success</label>
							<div class="flex items-center space-x-2">
								<input
									type="color"
									formControlName="success"
									class="w-12 h-8 rounded border border-gray-300 cursor-pointer"
									(change)="onColorChange(getColorsFormGroup(), 'success', $event)"
								/>
								<input
									type="text"
									formControlName="success"
									class="flex-1 px-3 py-2 border border-gray-300 rounded-md text-sm"
									placeholder="#10B981"
									(change)="onTextChange(getColorsFormGroup(), 'success', $event)"
								/>
							</div>
						</div>
						<div class="space-y-2">
							<label class="text-sm font-medium text-gray-700 dark:text-gray-300">Success Text</label>
							<div class="flex items-center space-x-2">
								<input
									type="color"
									formControlName="successText"
									class="w-12 h-8 rounded border border-gray-300 cursor-pointer"
									(change)="onColorChange(getColorsFormGroup(), 'successText', $event)"
								/>
								<input
									type="text"
									formControlName="successText"
									class="flex-1 px-3 py-2 border border-gray-300 rounded-md text-sm"
									placeholder="#FFFFFF"
									(change)="onTextChange(getColorsFormGroup(), 'successText', $event)"
								/>
							</div>
						</div>
						<div class="space-y-2">
							<label class="text-sm font-medium text-gray-700 dark:text-gray-300">Warning</label>
							<div class="flex items-center space-x-2">
								<input
									type="color"
									formControlName="warning"
									class="w-12 h-8 rounded border border-gray-300 cursor-pointer"
									(change)="onColorChange(getColorsFormGroup(), 'warning', $event)"
								/>
								<input
									type="text"
									formControlName="warning"
									class="flex-1 px-3 py-2 border border-gray-300 rounded-md text-sm"
									placeholder="#F59E0B"
									(change)="onTextChange(getColorsFormGroup(), 'warning', $event)"
								/>
							</div>
						</div>
						<div class="space-y-2">
							<label class="text-sm font-medium text-gray-700 dark:text-gray-300">Warning Text</label>
							<div class="flex items-center space-x-2">
								<input
									type="color"
									formControlName="warningText"
									class="w-12 h-8 rounded border border-gray-300 cursor-pointer"
									(change)="onColorChange(getColorsFormGroup(), 'warningText', $event)"
								/>
								<input
									type="text"
									formControlName="warningText"
									class="flex-1 px-3 py-2 border border-gray-300 rounded-md text-sm"
									placeholder="#FFFFFF"
									(change)="onTextChange(getColorsFormGroup(), 'warningText', $event)"
								/>
							</div>
						</div>
						<div class="space-y-2">
							<label class="text-sm font-medium text-gray-700 dark:text-gray-300">Error</label>
							<div class="flex items-center space-x-2">
								<input
									type="color"
									formControlName="error"
									class="w-12 h-8 rounded border border-gray-300 cursor-pointer"
									(change)="onColorChange(getColorsFormGroup(), 'error', $event)"
								/>
								<input
									type="text"
									formControlName="error"
									class="flex-1 px-3 py-2 border border-gray-300 rounded-md text-sm"
									placeholder="#EF4444"
									(change)="onTextChange(getColorsFormGroup(), 'error', $event)"
								/>
							</div>
						</div>
						<div class="space-y-2">
							<label class="text-sm font-medium text-gray-700 dark:text-gray-300">Error Text</label>
							<div class="flex items-center space-x-2">
								<input
									type="color"
									formControlName="errorText"
									class="w-12 h-8 rounded border border-gray-300 cursor-pointer"
									(change)="onColorChange(getColorsFormGroup(), 'errorText', $event)"
								/>
								<input
									type="text"
									formControlName="errorText"
									class="flex-1 px-3 py-2 border border-gray-300 rounded-md text-sm"
									placeholder="#FFFFFF"
									(change)="onTextChange(getColorsFormGroup(), 'errorText', $event)"
								/>
							</div>
						</div>
					</mat-card-content>
				</mat-card>
			</div>
		</ng-template>

		<!-- Save Button -->
		<div class="flex justify-end space-x-4 pt-6 border-t border-gray-200 dark:border-gray-700">
			<button type="button" mat-button color="primary" class="px-6">{{ t("theme_settings.actions.cancel") }}</button>

			<button type="submit" mat-raised-button color="primary" [disabled]="isLoading" class="px-6">
				@if (isLoading) {
					<mat-icon class="animate-spin mr-2">refresh</mat-icon>
				}
				{{ t("theme_settings.actions.save") }}
			</button>
		</div>
	</form>
</div>
