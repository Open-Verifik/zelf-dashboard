import{a as Ge,b as X}from"./chunk-OTHWY25E.js";import{a as Ye}from"./chunk-IILKSQZT.js";import{a as U}from"./chunk-ROZCPRVC.js";import{a as Oe}from"./chunk-CPTXYXVO.js";import{e as pe}from"./chunk-IGTPKX7G.js";import{a as K,b as q}from"./chunk-VS4UG554.js";import{a as De,c as H}from"./chunk-OV7RV7RJ.js";import"./chunk-HJACV4SF.js";import"./chunk-2IP4ECES.js";import{a as ye,b as be,d as Y}from"./chunk-WBGTKBHQ.js";import{a as Pe,b as $e,c as J}from"./chunk-Y6ZYUQEE.js";import{a as ue,b as ge,c as fe,d as he,i as _e,j as V}from"./chunk-XNMNNTXN.js";import{a as we}from"./chunk-GKK3ZBTB.js";import"./chunk-E6ENPQNB.js";import"./chunk-4NDVBZC3.js";import{a as We,b as Ve}from"./chunk-W63KOHKE.js";import{A as j,b as Ee,d as b,f as G,g as A,i as N,k as Se,l as ke,m as Ce,o as R,p as Ie,q as B,r as Fe,s as Me,t as Ne,u as Le,v as ze,y as Te,z as Z}from"./chunk-HHFAS2AP.js";import{a as xe,d as D}from"./chunk-XFX2TJJI.js";import{Z as me,aa as ce,ea as ve,fa as O}from"./chunk-4GCD5IXU.js";import{d as de}from"./chunk-MWRY57CN.js";import{h as le,i as P,j as $,l as se,p as W}from"./chunk-6CPQKJQE.js";import{Ab as v,Bc as E,Dc as ne,Hc as re,Ib as s,Ic as ae,Oc as oe,Ub as a,Vb as n,Wb as h,_b as w,ec as y,gb as r,gc as u,hb as F,qc as ie,ra as _,rc as o,sa as x,sc as m,tc as p,ub as T,xc as S,yc as k,zc as C}from"./chunk-BTAKDWI7.js";import{g as te}from"./chunk-TSRGIXR5.js";function qe(d,f){d&1&&(a(0,"div",8),o(1," Supports ERC-20 "),n())}function He(d,f){if(d&1&&(a(0,"span"),o(1),n()),d&2){let e,t=u(3).$implicit,i=u();r(),p("(",(e=i.getNetworkGroup(t).get("altCoins"))==null||(e=e.get("standard"))==null?null:e.value,")")}}function Ue(d,f){if(d&1){let e=w();a(0,"div",14)(1,"div",15)(2,"mat-checkbox",11),y("change",function(){_(e);let i=u(2).$implicit,l=u();return x(l.toggleAltCoins(i))}),a(3,"span",12),o(4," Alt Coins "),v(5,He,2,1,"span",16),n()()()()}if(d&2){let e,t=u(2).$implicit,i=u();r(5),s("ngIf",((e=i.getNetworkGroup(t).get("altCoins"))==null||(e=e.get("enabled"))==null?null:e.value)&&((e=i.getNetworkGroup(t).get("altCoins"))==null||(e=e.get("standard"))==null?null:e.value))}}function Xe(d,f){if(d&1){let e=w();a(0,"div",9)(1,"div",10)(2,"mat-checkbox",11),y("change",function(){_(e);let i=u().$implicit,l=u();return x(l.toggleNativeCurrency(i))}),a(3,"span",12),o(4),n()()(),v(5,Ue,6,1,"div",13),n()}if(d&2){let e,t=u().$implicit,i=u();r(4),p(" Native: ",(e=i.getNetworkGroup(t).get("nativeCurrency"))==null||(e=e.get("code"))==null?null:e.value," "),r(),s("ngIf",i.getNetworkGroup(t).get("altCoins"))}}function Qe(d,f){if(d&1){let e=w();a(0,"div",2)(1,"div",3)(2,"mat-checkbox",4),y("change",function(){let i=_(e).$implicit,l=u();return x(l.toggleNetwork(i))}),a(3,"span",5),o(4),n()(),v(5,qe,2,0,"div",6),n(),v(6,Xe,6,2,"div",7),n()}if(d&2){let e,t=f.$implicit,i=u();s("formGroupName",t),r(4),m(i.getNetworkLabel(t)),r(),s("ngIf",t==="avalanche"||t==="binance"||t==="polygon"),r(),s("ngIf",(e=i.getNetworkGroup(t).get("enabled"))==null?null:e.value)}}var Ae=(()=>{class d{get networkKeys(){return this.networksFormGroup?Object.keys(this.networksFormGroup.controls):[]}ngOnInit(){}getNetworkGroup(e){return this.networksFormGroup.get(e)}getNetworkLabel(e){return{ethereum:"Ethereum",solana:"Solana",bitcoin:"Bitcoin",blockdag:"BlockDAG",avalanche:"Avalanche",binance:"Binance Smart Chain",polygon:"Polygon",sui:"Sui"}[e]||e}toggleNetwork(e){let t=this.getNetworkGroup(e),i=t.get("enabled")?.value;t.get("nativeCurrency")?.get("enabled")?.setValue(i),t.get("altCoins")&&t.get("altCoins")?.get("enabled")?.setValue(i)}toggleNativeCurrency(e){this.checkNetworkState(e)}toggleAltCoins(e){this.checkNetworkState(e)}checkNetworkState(e){let t=this.getNetworkGroup(e),i=t.get("nativeCurrency")?.get("enabled")?.value,l=t.get("altCoins")?.get("enabled")?.value,c=!!t.get("altCoins");!i&&(!c||!l)?t.get("enabled")?.setValue(!1,{emitEvent:!1}):t.get("enabled")?.value===!1&&t.get("enabled")?.setValue(!0,{emitEvent:!1})}static{this.\u0275fac=function(t){return new(t||d)}}static{this.\u0275cmp=T({type:d,selectors:[["networks-config"]],inputs:{networksFormGroup:"networksFormGroup"},decls:2,vars:2,consts:[[1,"grid","grid-cols-1","md:grid-cols-2","gap-6",3,"formGroup"],["class","border border-gray-200 dark:border-gray-700 rounded-lg p-4",3,"formGroupName",4,"ngFor","ngForOf"],[1,"border","border-gray-200","dark:border-gray-700","rounded-lg","p-4",3,"formGroupName"],[1,"flex","items-center","mb-2"],["formControlName","enabled","color","primary",3,"change"],[1,"font-medium","text-base"],["class","ml-2 text-xs text-yellow-600 bg-yellow-100 px-2 py-0.5 rounded",4,"ngIf"],["class","ml-6 space-y-2",4,"ngIf"],[1,"ml-2","text-xs","text-yellow-600","bg-yellow-100","px-2","py-0.5","rounded"],[1,"ml-6","space-y-2"],["formGroupName","nativeCurrency",1,"flex","items-center"],["formControlName","enabled",3,"change"],[1,"text-sm"],["formGroupName","altCoins","class","space-y-2",4,"ngIf"],["formGroupName","altCoins",1,"space-y-2"],[1,"flex","items-center"],[4,"ngIf"]],template:function(t,i){t&1&&(a(0,"div",0),v(1,Qe,7,4,"div",1),n()),t&2&&(s("formGroup",i.networksFormGroup),r(),s("ngForOf",i.networkKeys))},dependencies:[W,P,$,Z,G,A,j,R,B,Ie,q,K,V,J,D,O,H,X,Y],encapsulation:2,changeDetection:0})}}return d})();var et=(d,f)=>({"bg-green-100 text-green-800 border border-green-200":d,"bg-red-100 text-red-800 border border-red-200":f}),tt=(d,f)=>({"text-green-600":d,"text-red-600":f}),it=()=>["coinbase","crypto","stripe","paypal"],I=()=>({standalone:!0});function nt(d,f){if(d&1&&(a(0,"div",54)(1,"div",55)(2,"mat-icon",56),o(3),n(),a(4,"span"),o(5),n()()()),d&2){let e=u(2);s("ngClass",ne(4,et,e.alertType==="success",e.alertType==="error")),r(2),s("ngClass",ne(7,tt,e.alertType==="success",e.alertType==="error")),r(),p(" ",e.alertType==="success"?"check_circle":"error"," "),r(2),m(e.alertMessage)}}function rt(d,f){if(d&1&&(a(0,"mat-error"),o(1),n()),d&2){let e=u().$implicit;r(),p(" ",e("license.basic_information.domain_required")," ")}}function at(d,f){if(d&1&&(a(0,"mat-error"),o(1),n()),d&2){let e=u().$implicit;r(),p(" ",e("license.basic_information.domain_pattern_error")," ")}}function ot(d,f){if(d&1&&(a(0,"mat-error"),o(1),n()),d&2){let e=u(2).$implicit;r(),p(" ",e("license.validation_rules.max_length_error")," ")}}function lt(d,f){if(d&1){let e=w();a(0,"span",106),o(1),a(2,"button",107),y("click",function(){let i=_(e).$implicit,l=u(3);return x(l.removeReservedWord(i))}),a(3,"mat-icon",76),o(4,"close"),n()()()}if(d&2){let e=f.$implicit;r(),p(" ",e," ")}}function st(d,f){if(d&1){let e=w();a(0,"div",55)(1,"mat-checkbox",108),y("change",function(){let i=_(e).$implicit,l=u(3);return x(l.togglePaymentMethod(i))}),n(),a(2,"span",109),o(3),re(4,"titlecase"),n()()}if(d&2){let e=f.$implicit,t=u(3);r(),s("checked",t.isPaymentMethodEnabled(e)),r(2),m(ae(4,2,e))}}function dt(d,f){if(d&1&&(a(0,"div",110)(1,"mat-icon",111),o(2,"inbox"),n(),a(3,"p"),o(4),n()()),d&2){let e=u(2).$implicit;r(4),m(e("license.payment_settings.no_items"))}}function mt(d,f){if(d&1){let e=w();a(0,"div",114)(1,"div",115)(2,"input",116),C("ngModelChange",function(i){let l=_(e).$implicit;return k(l.domain,i)||(l.domain=i),x(i)}),n()(),a(3,"div",115)(4,"input",117),C("ngModelChange",function(i){let l=_(e).$implicit;return k(l.discount,i)||(l.discount=i),x(i)}),n()(),a(5,"div",115)(6,"select",118),C("ngModelChange",function(i){let l=_(e).$implicit;return k(l.type,i)||(l.type=i),x(i)}),a(7,"option",119),o(8),n(),a(9,"option",120),o(10),n()()(),a(11,"button",121),y("click",function(){let i=_(e).index,l=u(4);return x(l.removeWhitelistItem(i))}),a(12,"mat-icon",76),o(13,"delete"),n()()()}if(d&2){let e=f.$implicit,t=u(3).$implicit;r(2),S("ngModel",e.domain),s("ngModelOptions",E(10,I))("placeholder",t("license.payment_settings.tag_name")),r(2),S("ngModel",e.discount),s("ngModelOptions",E(11,I))("placeholder",t("license.payment_settings.discount")),r(2),S("ngModel",e.type),s("ngModelOptions",E(12,I)),r(2),m(t("license.payment_settings.percentage")),r(2),m(t("license.payment_settings.fixed_amount"))}}function ct(d,f){if(d&1&&(a(0,"div",112),v(1,mt,14,13,"div",113),n()),d&2){let e=u(3);r(),s("ngForOf",e.whitelistItems)}}function pt(d,f){if(d&1){let e=w();a(0,"tr")(1,"td",122),o(2),n(),a(3,"td",123)(4,"input",124),C("ngModelChange",function(i){let l=_(e).$implicit;return k(l.oneYear,i)||(l.oneYear=i),x(i)}),n()(),a(5,"td",123)(6,"input",124),C("ngModelChange",function(i){let l=_(e).$implicit;return k(l.twoYears,i)||(l.twoYears=i),x(i)}),n()(),a(7,"td",123)(8,"input",124),C("ngModelChange",function(i){let l=_(e).$implicit;return k(l.threeYears,i)||(l.threeYears=i),x(i)}),n()(),a(9,"td",123)(10,"input",124),C("ngModelChange",function(i){let l=_(e).$implicit;return k(l.fourYears,i)||(l.fourYears=i),x(i)}),n()(),a(11,"td",123)(12,"input",124),C("ngModelChange",function(i){let l=_(e).$implicit;return k(l.fiveYears,i)||(l.fiveYears=i),x(i)}),n()(),a(13,"td",123)(14,"input",124),C("ngModelChange",function(i){let l=_(e).$implicit;return k(l.lifetime,i)||(l.lifetime=i),x(i)}),n()()()}if(d&2){let e=f.$implicit;r(2),m(e.length),r(2),S("ngModel",e.oneYear),s("ngModelOptions",E(13,I)),r(2),S("ngModel",e.twoYears),s("ngModelOptions",E(14,I)),r(2),S("ngModel",e.threeYears),s("ngModelOptions",E(15,I)),r(2),S("ngModel",e.fourYears),s("ngModelOptions",E(16,I)),r(2),S("ngModel",e.fiveYears),s("ngModelOptions",E(17,I)),r(2),S("ngModel",e.lifetime),s("ngModelOptions",E(18,I))}}function ut(d,f){if(d&1){let e=w();a(0,"div",57)(1,"div",58)(2,"mat-icon",59),o(3,"dns"),n(),a(4,"div")(5,"h2",60),o(6),n(),a(7,"p",61),o(8),n()(),a(9,"div",62),o(10),n()(),a(11,"div",63)(12,"div",64)(13,"div",14)(14,"mat-icon",65),o(15,"rule"),n(),a(16,"h3",16),o(17),n()(),a(18,"div",66)(19,"div")(20,"mat-form-field",18)(21,"mat-label"),o(22),n(),h(23,"input",67),n()(),a(24,"div")(25,"mat-form-field",18)(26,"mat-label"),o(27),n(),h(28,"input",68),a(29,"mat-hint",69),o(30),n(),v(31,ot,2,1,"mat-error",21),n()(),a(32,"div")(33,"mat-form-field",18)(34,"mat-label"),o(35),n(),h(36,"input",20),n()()(),a(37,"div",70)(38,"label",71),o(39),n(),a(40,"div",72),v(41,lt,5,1,"span",73),a(42,"div",55)(43,"input",74,0),y("keyup.enter",function(){_(e);let i=ie(44);return u(2).addReservedWord(i.value),x(i.value="")}),n(),a(45,"button",75),y("click",function(){_(e);let i=ie(44);return u(2).addReservedWord(i.value),x(i.value="")}),a(46,"mat-icon",76),o(47,"add"),n()()()()(),a(48,"div",77)(49,"div",78)(50,"mat-icon",79),o(51,"block"),n(),a(52,"label",80),o(53),n(),h(54,"mat-slide-toggle",81),n(),a(55,"p",35),o(56),n()()(),a(57,"div",64)(58,"div",14)(59,"mat-icon",28),o(60,"payment"),n(),a(61,"h3",16),o(62),n()(),a(63,"div",82)(64,"div")(65,"label",71),o(66),n(),a(67,"div",83),v(68,st,5,4,"div",84),n(),a(69,"div",85),o(70),n()(),a(71,"div")(72,"label",71),o(73," Supported Networks "),n(),h(74,"networks-config",86),n(),a(75,"div")(76,"div",87)(77,"h4",80),o(78),n(),a(79,"button",88),y("click",function(){_(e);let i=u(2);return x(i.addWhitelistItem())}),a(80,"mat-icon",25),o(81,"add"),n(),o(82),n()(),v(83,dt,5,1,"div",89)(84,ct,2,1,"div",90),a(85,"div",91)(86,"p",92),o(87),n(),a(88,"p",61),o(89),n(),a(90,"p",61),o(91),n()()()()(),a(92,"div",64)(93,"div",87)(94,"div",55)(95,"mat-icon",93),o(96,"table_chart"),n(),a(97,"h3",16),o(98),n()(),a(99,"button",94),y("click",function(){_(e);let i=u(2);return x(i.resetPricingTable())}),a(100,"mat-icon",25),o(101,"refresh"),n(),o(102),n()(),a(103,"div",95)(104,"p",96),o(105),n()(),a(106,"div",97)(107,"table",98)(108,"thead",99)(109,"tr")(110,"th",100),o(111),n(),a(112,"th",101),o(113),n(),a(114,"th",101),o(115),n(),a(116,"th",101),o(117),n(),a(118,"th",101),o(119),n(),a(120,"th",101),o(121),n(),a(122,"th",101),o(123),n()()(),a(124,"tbody",102),v(125,pt,15,19,"tr",103),n()()(),a(126,"div",104)(127,"h4",92),o(128),n(),a(129,"ul",105)(130,"li"),o(131),n(),a(132,"li"),o(133),n(),a(134,"li"),o(135),n(),a(136,"li"),o(137),n()()()(),a(138,"div",64)(139,"div",14)(140,"mat-icon",93),o(141,"storage"),n(),a(142,"h3",16),o(143),n()(),a(144,"div",17)(145,"div",29)(146,"div",31)(147,"div",32)(148,"div",55)(149,"mat-icon",15),o(150,"cloud"),n(),a(151,"h3",33),o(152),n()(),h(153,"mat-slide-toggle",34),n(),a(154,"p",35),o(155),n()(),a(156,"div",31)(157,"div",32)(158,"div",55)(159,"mat-icon",28),o(160,"archive"),n(),a(161,"h3",33),o(162),n()(),h(163,"mat-slide-toggle",34),n(),a(164,"p",35),o(165),n()(),a(166,"div",31)(167,"div",32)(168,"div",55)(169,"mat-icon",65),o(170,"pets"),n(),a(171,"h3",33),o(172),n()(),h(173,"mat-slide-toggle",34),n(),a(174,"p",35),o(175),n()()(),a(176,"div",29)(177,"div")(178,"mat-form-field",18)(179,"mat-label"),o(180),n(),h(181,"input",20),n()()()()()()()}if(d&2){let e,t=u().$implicit,i=u();r(6),m(t("license.features.zns_title")),r(2),m(t("license.features.zns_description")),r(2),p(" ",t("license.features.zns_enabled")," "),r(7),m(t("license.validation_rules.title")),r(3),s("subscriptSizing","dynamic"),r(2),m(t("license.validation_rules.min_length")),r(),s("formControlName","minLength")("placeholder",t("license.validation_rules.min_length_placeholder")),r(2),s("subscriptSizing","dynamic"),r(2),m(t("license.validation_rules.max_length")),r(),s("formControlName","maxLength")("placeholder",t("license.validation_rules.max_length_placeholder")),r(2),m(t("license.validation_rules.max_length_hint")),r(),s("ngIf",(e=i.accountForm.get("maxLength"))==null?null:e.hasError("max")),r(2),s("subscriptSizing","dynamic"),r(2),m(t("license.validation_rules.hold_suffix")),r(),s("formControlName","holdSuffix")("placeholder",t("license.validation_rules.hold_suffix_placeholder")),r(3),m(t("license.validation_rules.reserved_words")),r(2),s("ngForOf",i.reservedWords),r(2),s("placeholder",t("license.validation_rules.add_reserved_word")),r(10),m(t("license.validation_rules.content_filter")),r(),s("formControlName","contentFilterEnabled"),r(2),p(" ",t("license.validation_rules.content_filter_description")," "),r(6),m(t("license.payment_settings.title")),r(4),m(t("license.payment_settings.payment_methods")),r(2),s("ngForOf",E(66,it)),r(2),p(" Selected methods: ",i.getPaymentMethods().join(", ")||"None"," "),r(4),s("networksFormGroup",i.networksFormGroup),r(4),p(" ",t("license.payment_settings.whitelist_title")," "),r(4),p(" ",t("license.payment_settings.add_item")," "),r(),s("ngIf",i.whitelistItems.length===0),r(),s("ngIf",i.whitelistItems.length>0),r(3),p(" ",t("license.payment_settings.examples")," "),r(2),m(t("license.payment_settings.example_1")),r(2),m(t("license.payment_settings.example_2")),r(7),m(t("license.pricing_table.title")),r(4),p(" ",t("license.pricing_table.reset_default")," "),r(3),m(t("license.pricing_table.description")),r(6),p(" ",t("license.pricing_table.length")," "),r(2),p(" ",t("license.pricing_table.one_year")," "),r(2),p(" ",t("license.pricing_table.two_years")," "),r(2),p(" ",t("license.pricing_table.three_years")," "),r(2),p(" ",t("license.pricing_table.four_years")," "),r(2),p(" ",t("license.pricing_table.five_years")," "),r(2),p(" ",t("license.pricing_table.lifetime")," "),r(2),s("ngForOf",i.pricingTableRows),r(3),p(" ",t("license.pricing_table.pricing_info")," "),r(3),m(t("license.pricing_table.pricing_info_1")),r(2),m(t("license.pricing_table.pricing_info_2")),r(2),m(t("license.pricing_table.pricing_info_3")),r(2),m(t("license.pricing_table.pricing_info_4")),r(6),p("",t("license.storage_options.title")," (ZNS)"),r(9),p(" ",t("license.storage_options.ipfs_title")," "),r(),s("formControlName","ipfsEnabled"),r(2),m(t("license.storage_options.ipfs_description")),r(7),p(" ",t("license.storage_options.arweave_title")," "),r(),s("formControlName","arweaveEnabled"),r(2),p(" ",t("license.storage_options.arweave_description")," "),r(7),p(" ",t("license.storage_options.walrus_title")," "),r(),s("formControlName","walrusEnabled"),r(2),m(t("license.storage_options.walrus_description")),r(3),s("subscriptSizing","dynamic"),r(2),m(t("license.storage_options.key_prefix")),r(),s("formControlName","keyPrefix")("placeholder",t("license.storage_options.key_prefix_placeholder"))}}function gt(d,f){if(d&1&&(a(0,"div",57)(1,"div",58)(2,"mat-icon",59),o(3,"vpn_key"),n(),a(4,"div")(5,"h2",60),o(6),n(),a(7,"p",61),o(8),n()(),a(9,"div",62),o(10),n()(),a(11,"div",63)(12,"div",125)(13,"div",14)(14,"mat-icon",93),o(15,"storage"),n(),a(16,"h3",16),o(17),n()(),a(18,"div",17)(19,"div",29)(20,"div",31)(21,"div",32)(22,"div",55)(23,"mat-icon",15),o(24,"cloud"),n(),a(25,"h3",33),o(26),n()(),h(27,"mat-slide-toggle",34),n(),a(28,"p",35),o(29),n()(),a(30,"div",31)(31,"div",32)(32,"div",55)(33,"mat-icon",28),o(34,"archive"),n(),a(35,"h3",33),o(36),n()(),h(37,"mat-slide-toggle",34),n(),a(38,"p",35),o(39),n()(),a(40,"div",31)(41,"div",32)(42,"div",55)(43,"mat-icon",65),o(44,"pets"),n(),a(45,"h3",33),o(46),n()(),h(47,"mat-slide-toggle",34),n(),a(48,"p",35),o(49),n()()(),a(50,"div",29)(51,"div")(52,"mat-form-field",18)(53,"mat-label"),o(54),n(),h(55,"input",20),n()()()()()()()),d&2){let e=u().$implicit;r(6),m(e("license.features.zelfkeys_title")),r(2),m(e("license.features.zelfkeys_description")),r(2),p(" ",e("license.features.zelfkeys_enabled")," "),r(7),p("",e("license.storage_options.title")," (ZelfKeys)"),r(9),p(" ",e("license.storage_options.ipfs_title")," "),r(),s("formControlName","zelfkeysIpfsEnabled"),r(2),m(e("license.storage_options.ipfs_description")),r(7),p(" ",e("license.storage_options.arweave_title")," "),r(),s("formControlName","zelfkeysArweaveEnabled"),r(2),p(" ",e("license.storage_options.arweave_description")," "),r(7),p(" ",e("license.storage_options.walrus_title")," "),r(),s("formControlName","zelfkeysWalrusEnabled"),r(2),m(e("license.storage_options.walrus_description")),r(3),s("subscriptSizing","dynamic"),r(2),m(e("license.storage_options.key_prefix")),r(),s("formControlName","zelfkeysKeyPrefix")("placeholder",e("license.storage_options.key_prefix_placeholder"))}}function ft(d,f){d&1&&h(0,"mat-spinner",126)}function ht(d,f){if(d&1){let e=w();a(0,"div",2),v(1,nt,6,10,"div",3),a(2,"form",4)(3,"div",5)(4,"h1",6),o(5),n(),a(6,"p",7),o(7),n()(),a(8,"div",8)(9,"div",9)(10,"mat-icon",10),o(11,"info"),n(),a(12,"div")(13,"h3",11),o(14,"Field Restrictions"),n(),a(15,"div",12)(16,"p")(17,"strong"),o(18,"Editable:"),n(),o(19," Domain name, validation rules, payment settings, pricing, storage options, and metadata"),n(),a(20,"p")(21,"strong"),o(22,"Read-only:"),n(),o(23," Start/end dates, status, limits (managed by subscription), Stripe data (managed by webhooks) "),n(),a(24,"p")(25,"strong"),o(26,"Supported Currencies:"),n(),o(27," BTC, ETH, SOL, USDC, USDT, BDAG, AVAX, ZNS"),n()()()()(),a(28,"div",13)(29,"div",14)(30,"mat-icon",15),o(31,"info"),n(),a(32,"h2",16),o(33),n()(),a(34,"div",17)(35,"div")(36,"mat-form-field",18)(37,"mat-label"),o(38),n(),a(39,"span",19),o(40),n(),h(41,"input",20),v(42,rt,2,1,"mat-error",21)(43,at,2,1,"mat-error",21),n()(),a(44,"div")(45,"mat-form-field",18)(46,"mat-label"),o(47),n(),h(48,"input",22),n()(),a(49,"div")(50,"mat-form-field",18)(51,"mat-label"),o(52),n(),h(53,"input",20),n()(),a(54,"div")(55,"mat-form-field",18)(56,"mat-label"),o(57),n(),h(58,"input",23),a(59,"mat-hint",24)(60,"mat-icon",25),o(61,"info"),n(),o(62," System-managed field "),n()()(),a(63,"div")(64,"mat-form-field",18)(65,"mat-label"),o(66),n(),h(67,"input",23),a(68,"mat-hint",24)(69,"mat-icon",25),o(70,"info"),n(),o(71," System-managed field "),n()()(),a(72,"div",26)(73,"mat-form-field",18)(74,"mat-label"),o(75),n(),h(76,"textarea",27),n()()()(),a(77,"div",13)(78,"div",14)(79,"mat-icon",28),o(80,"extension"),n(),a(81,"h2",16),o(82),n()(),a(83,"div",29)(84,"div",30)(85,"div",31)(86,"div",32)(87,"h3",33),o(88),n(),h(89,"mat-slide-toggle",34),n(),a(90,"p",35),o(91),n()(),a(92,"div",31)(93,"div",32)(94,"h3",33),o(95),n(),h(96,"mat-slide-toggle",34),n(),a(97,"p",35),o(98),n()()()()(),v(99,ut,182,67,"div",36)(100,gt,56,17,"div",36),a(101,"div",13)(102,"div",14)(103,"mat-icon",37),o(104,"info"),n(),a(105,"h2",16),o(106),n()(),a(107,"div",38)(108,"div",39)(109,"div",40)(110,"mat-icon",41),o(111,"info"),n()(),a(112,"div",42)(113,"h3",43),o(114),n(),a(115,"div",44)(116,"p"),o(117),n(),a(118,"p",45),o(119),n()()()()(),a(120,"div",17)(121,"div")(122,"mat-form-field",18)(123,"mat-label"),o(124),n(),h(125,"input",46),n()(),a(126,"div")(127,"mat-form-field",18)(128,"mat-label"),o(129),n(),h(130,"input",20),n()(),a(131,"div")(132,"mat-form-field",18)(133,"mat-label"),o(134),n(),h(135,"input",20),n()(),a(136,"div")(137,"mat-form-field",18)(138,"mat-label"),o(139),n(),h(140,"input",20),n()(),a(141,"div")(142,"mat-form-field",18)(143,"mat-label"),o(144),n(),h(145,"input",20),n()(),a(146,"div")(147,"mat-form-field",18)(148,"mat-label"),o(149),n(),a(150,"mat-select",34)(151,"mat-option",47),o(152),n(),a(153,"mat-option",48),o(154),n(),a(155,"mat-option",49),o(156),n()()()()()(),a(157,"div",50)(158,"button",51),y("click",function(){_(e);let i=u();return x(i.cancel())}),o(159),n(),a(160,"button",52),y("click",function(){_(e);let i=u();return x(i.saveLicense())}),v(161,ft,1,0,"mat-spinner",53),o(162),n()()()()}if(d&2){let e,t,i,l,c=f.$implicit,g=u();r(),s("ngIf",g.showAlert),r(),s("formGroup",g.accountForm),r(3),m(c("license.title")),r(2),m(c("license.subtitle")),r(26),m(c("license.basic_information.title")),r(3),s("subscriptSizing","dynamic"),r(2),m(c("license.basic_information.domain_name")),r(2),m(c("license.basic_information.domain_prefix")),r(),s("formControlName","domain")("placeholder",c("license.basic_information.domain_placeholder")),r(),s("ngIf",(e=g.accountForm.get("domain"))==null?null:e.hasError("required")),r(),s("ngIf",(t=g.accountForm.get("domain"))==null?null:t.hasError("pattern")),r(2),s("subscriptSizing","dynamic"),r(2),m(c("license.basic_information.status")),r(),s("formControlName","status"),r(2),s("subscriptSizing","dynamic"),r(2),m(c("license.basic_information.owner")),r(),s("formControlName","owner")("placeholder",c("license.basic_information.owner_placeholder")),r(2),s("subscriptSizing","dynamic"),r(2),m(c("license.basic_information.start_date")),r(),s("formControlName","startDate"),r(6),s("subscriptSizing","dynamic"),r(2),m(c("license.basic_information.end_date")),r(),s("formControlName","endDate"),r(6),s("subscriptSizing","dynamic"),r(2),m(c("license.basic_information.description")),r(),s("formControlName","description")("placeholder",c("license.basic_information.description_placeholder")),r(6),m(c("license.features.title")),r(6),m(c("license.features.zns_title")),r(),s("formControlName","znsEnabled"),r(2),m(c("license.features.zns_description")),r(4),m(c("license.features.zelfkeys_title")),r(),s("formControlName","zelfkeysEnabled"),r(2),m(c("license.features.zelfkeys_description")),r(),s("ngIf",(i=g.accountForm.get("znsEnabled"))==null?null:i.value),r(),s("ngIf",(l=g.accountForm.get("zelfkeysEnabled"))==null?null:l.value),r(6),m(c("license.metadata.title")),r(8),m(c("license.limits.info_title")),r(3),m(c("license.limits.info_description")),r(2),m(c("license.limits.info_subscription")),r(3),s("subscriptSizing","dynamic"),r(2),m(c("license.metadata.launch_date")),r(),s("formControlName","launchDate"),r(2),s("subscriptSizing","dynamic"),r(2),m(c("license.metadata.version")),r(),s("formControlName","version")("placeholder",c("license.metadata.version_placeholder")),r(2),s("subscriptSizing","dynamic"),r(2),m(c("license.metadata.documentation_url")),r(),s("formControlName","documentation")("placeholder",c("license.metadata.documentation_placeholder")),r(2),s("subscriptSizing","dynamic"),r(2),m(c("license.metadata.community")),r(),s("formControlName","community")("placeholder",c("license.metadata.community_placeholder")),r(2),s("subscriptSizing","dynamic"),r(2),m(c("license.metadata.enterprise")),r(),s("formControlName","enterprise")("placeholder",c("license.metadata.enterprise_placeholder")),r(2),s("subscriptSizing","dynamic"),r(2),m(c("license.metadata.support_level")),r(),s("formControlName","support"),r(2),m(c("license.metadata.support_standard")),r(2),m(c("license.metadata.support_premium")),r(2),m(c("license.metadata.support_enterprise")),r(2),s("disabled",g.isLoading),r(),m(c("license.actions.cancel")),r(),s("color","primary")("disabled",g.isLoading||g.accountForm.invalid),r(),s("ngIf",g.isLoading),r(),p(" ",g.isLoading?c("license.actions.processing"):c("license.actions.save_configuration")," ")}}var ni=(()=>{class d{constructor(e,t,i,l,c,g,M){this._formBuilder=e,this._router=t,this._saveConfirmationService=i,this._translocoService=l,this._cdr=c,this._licenseService=g,this._httpWrapper=M,this.alertMessage="",this.alertType="success",this.currentLicense=null,this.isLoading=!1,this.pricingTableRows=[],this.reservedWords=["www","api","admin","support","help"],this.showAlert=!1,this.whitelistItems=[],this.zelfkeysPlans=[],this.inappropriateWords=["dick","vagina","porn","sex","fuck","shit","bitch","ass","damn","hell","crap","piss","bastard","whore","slut","fag","nigger","retard","idiot","stupid","moron","dumb","hate","kill","die","death","murder","suicide"]}get networksFormGroup(){return this.accountForm.get("networks")}ngOnInit(){this.initializeWhitelistItems(),this.initializePricingTable(),this.createEmptyForm()}ngAfterViewInit(){this.loadLicense().then(()=>{this.populateFormFromLicense()})}createEmptyForm(){this.accountForm=this._formBuilder.group({domain:["",[b.required,b.pattern(/^[a-zA-Z0-9][a-zA-Z0-9-]*[a-zA-Z0-9]$/)]],status:[{value:"active",disabled:!0}],owner:["zelf-team",b.required],description:["Official Zelf domain",b.required],znsEnabled:[!0],zelfkeysEnabled:[!0],minLength:[3,[b.required,b.min(1)]],maxLength:[27,[b.required,b.min(1),b.max(27)]],holdSuffix:[".hold",b.required],contentFilterEnabled:[!0],ipfsEnabled:[!0],arweaveEnabled:[!0],walrusEnabled:[!0],keyPrefix:["tagName",b.required],zelfkeysIpfsEnabled:[!0],zelfkeysArweaveEnabled:[!0],zelfkeysWalrusEnabled:[!0],zelfkeysKeyPrefix:["tagName",b.required],coinbaseEnabled:[!0],cryptoEnabled:[!0],stripeEnabled:[!0],networks:this.createNetworksFormGroup(),startDate:[{value:"",disabled:!0}],endDate:[{value:"",disabled:!0}],launchDate:["2023-01-01"],version:["1.0.0",b.required],documentation:["https://docs.zelf.world"],community:[""],enterprise:[""],support:["standard"]}),this.addWhitelistFormControls()}createNetworksFormGroup(e=null){let t=this._formBuilder.group({}),i=U.createEmpty("temp"),l=e||i.getNetworks();return Object.keys(l).forEach(c=>{let g=l[c];c.startsWith("other_")||t.addControl(c,this._formBuilder.group({enabled:[g.enabled],nativeCurrency:this._formBuilder.group({enabled:[g.nativeCurrency.enabled],code:[g.nativeCurrency.code]}),altCoins:g.altCoins?this._formBuilder.group({enabled:[g.altCoins.enabled],standard:[g.altCoins.standard]}):null}))}),t}initializeWhitelistItems(){this.whitelistItems=[{domain:"",discount:"",type:"percentage"}]}addWhitelistFormControls(){this.whitelistItems.forEach((e,t)=>{this.accountForm.get(`whitelistDomain_${t}`)||this.accountForm.addControl(`whitelistDomain_${t}`,new N(e.domain)),this.accountForm.get(`whitelistDiscount_${t}`)||this.accountForm.addControl(`whitelistDiscount_${t}`,new N(e.discount)),this.accountForm.get(`whitelistType_${t}`)||this.accountForm.addControl(`whitelistType_${t}`,new N(e.type))})}removeWhitelistFormControls(){this.whitelistItems.forEach((e,t)=>{this.accountForm.removeControl(`whitelistDomain_${t}`),this.accountForm.removeControl(`whitelistDiscount_${t}`),this.accountForm.removeControl(`whitelistType_${t}`)})}addReservedWord(e){e&&e.trim()&&!this.reservedWords.includes(e.trim())&&this.reservedWords.push(e.trim())}removeReservedWord(e){let t=this.reservedWords.indexOf(e);t>-1&&this.reservedWords.splice(t,1)}togglePaymentMethod(e){this.getPaymentMethods().includes(e)?e==="coinbase"?this.accountForm.get("coinbaseEnabled")?.setValue(!1):e==="crypto"?this.accountForm.get("cryptoEnabled")?.setValue(!1):e==="stripe"&&this.accountForm.get("stripeEnabled")?.setValue(!1):e==="coinbase"?this.accountForm.get("coinbaseEnabled")?.setValue(!0):e==="crypto"?this.accountForm.get("cryptoEnabled")?.setValue(!0):e==="stripe"&&this.accountForm.get("stripeEnabled")?.setValue(!0)}isPaymentMethodEnabled(e){return this.getPaymentMethods().includes(e)}addWhitelistItem(){let e={domain:"",discount:"",type:"percentage"};this.whitelistItems.push(e);let t=this.whitelistItems.length-1;this.accountForm.addControl(`whitelistDomain_${t}`,new N("")),this.accountForm.addControl(`whitelistDiscount_${t}`,new N("")),this.accountForm.addControl(`whitelistType_${t}`,new N("percentage"))}trackByWhitelistItem(e,t){return e}removeWhitelistItem(e){this.whitelistItems.length>1&&(this.accountForm.removeControl(`whitelistDomain_${e}`),this.accountForm.removeControl(`whitelistDiscount_${e}`),this.accountForm.removeControl(`whitelistType_${e}`),this.whitelistItems.splice(e,1),this.removeWhitelistFormControls(),this.addWhitelistFormControls())}validateDomainName(e){if(!this.accountForm.get("contentFilterEnabled")?.value)return!0;let t=e.toLowerCase();return!this.inappropriateWords.some(i=>t.includes(i))}getPaymentMethods(){let e=[];return this.accountForm.get("coinbaseEnabled")?.value&&e.push("coinbase"),this.accountForm.get("cryptoEnabled")?.value&&e.push("crypto"),this.accountForm.get("stripeEnabled")?.value&&e.push("stripe"),e}getDefaultPricingTable(){return{1:{1:240,2:432,3:612,4:768,5:900,lifetime:3600},2:{1:120,2:216,3:306,4:384,5:450,lifetime:1800},3:{1:72,2:130,3:184,4:230,5:270,lifetime:1080},4:{1:36,2:65,3:92,4:115,5:135,lifetime:540},5:{1:30,2:54,3:76,4:96,5:112,lifetime:450},"6-15":{1:24,2:43,3:61,4:77,5:90,lifetime:360},16:{1:23,2:41,3:59,4:74,5:86,lifetime:345},17:{1:22,2:40,3:56,4:70,5:82,lifetime:330},18:{1:21,2:38,3:54,4:67,5:79,lifetime:315},19:{1:20,2:36,3:51,4:64,5:75,lifetime:300},20:{1:19,2:34,3:48,4:61,5:72,lifetime:285},21:{1:18,2:32,3:46,4:58,5:68,lifetime:270},22:{1:17,2:31,3:43,4:54,5:64,lifetime:255},23:{1:16,2:29,3:41,4:51,5:60,lifetime:240},24:{1:15,2:27,3:38,4:48,5:56,lifetime:225},25:{1:14,2:25,3:36,4:45,5:53,lifetime:210},26:{1:13,2:23,3:33,4:42,5:49,lifetime:195},27:{1:12,2:22,3:31,4:38,5:45,lifetime:180}}}hasLicenseChanges(e){if(!this.currentLicense)return!0;let t=this.accountForm.value,i=this.currentLicense.domainConfig;if(this.currentLicense.domain!==e||i.name!==e||i.holdSuffix!==t.holdSuffix||i.status!==t.status||i.owner!==t.owner||i.description!==t.description)return!0;let l=!0,c=!0;if(l!==t.znsEnabled||c!==t.zelfkeysEnabled||i.tags?.minLength!==t.minLength||i.tags?.maxLength!==t.maxLength||i.tags?.storage?.keyPrefix!==t.keyPrefix||i.tags?.storage?.ipfsEnabled!==t.ipfsEnabled||i.tags?.storage?.arweaveEnabled!==t.arweaveEnabled||i.tags?.storage?.walrusEnabled!==t.walrusEnabled||i.zelfkeys?.storage?.keyPrefix!==t.zelfkeysKeyPrefix||i.zelfkeys?.storage?.ipfsEnabled!==t.zelfkeysIpfsEnabled||i.zelfkeys?.storage?.arweaveEnabled!==t.zelfkeysArweaveEnabled||i.zelfkeys?.storage?.walrusEnabled!==t.zelfkeysWalrusEnabled)return!0;let g=i.tags?.payment?.methods||[],M=this.getPaymentMethods();if(JSON.stringify(g.sort())!==JSON.stringify(M.sort()))return!0;let L=i.tags?.payment?.networks||this.currentLicense.getNetworks(),z=t.networks;if(JSON.stringify(L)!==JSON.stringify(z))return!0;let Q=i.tags?.payment?.whitelist||{},ee=this.buildWhitelistFromForm();if(JSON.stringify(Q)!==JSON.stringify(ee))return!0;let Re=i.tags?.payment?.pricingTable||{},Be=this.getPricingTableFromRows();return JSON.stringify(Re)!==JSON.stringify(Be)||i.metadata.launchDate!==t.launchDate||i.metadata.version!==t.version||i.metadata.documentation!==t.documentation||i.metadata.community!==t.community||i.metadata.enterprise!==t.enterprise||i.metadata.support!==t.support}getLicenseChanges(e){if(!this.currentLicense)return["Creating new license"];let t=[],i=this.accountForm.value,l=this.currentLicense.domainConfig;return this.getBasicInfoChanges(l,e,i,t),this.getFeatureChanges(i,t),this.getValidationChanges(l,i,t),this.getStorageChanges(l,i,t),this.getPaymentChanges(l,i,t),this.getMetadataChanges(l,i,t),t}getBasicInfoChanges(e,t,i,l){this.currentLicense?.domain!==t&&l.push(`Domain: ${this.currentLicense?.domain} \u2192 ${t}`),e.name!==t&&l.push(`Name: ${e.name} \u2192 ${t}`),e.holdSuffix!==i.holdSuffix&&l.push(`Hold Suffix: ${e.holdSuffix} \u2192 ${i.holdSuffix}`),e.status!==i.status&&l.push(`Status: ${e.status} \u2192 ${i.status}`),e.owner!==i.owner&&l.push(`Owner: ${e.owner} \u2192 ${i.owner}`),e.description!==i.description&&l.push(`Description: ${e.description} \u2192 ${i.description}`)}getFeatureChanges(e,t){e.znsEnabled!==!0&&t.push(`ZNS Feature: true \u2192 ${e.znsEnabled}`),e.zelfkeysEnabled!==!0&&t.push(`Zelfkeys Feature: true \u2192 ${e.zelfkeysEnabled}`)}getValidationChanges(e,t,i){e.tags?.minLength!==t.minLength&&i.push(`Min Length: ${e.tags?.minLength} \u2192 ${t.minLength}`),e.tags?.maxLength!==t.maxLength&&i.push(`Max Length: ${e.tags?.maxLength} \u2192 ${t.maxLength}`)}getStorageChanges(e,t,i){e.tags?.storage?.keyPrefix!==t.keyPrefix&&i.push(`ZNS Key Prefix: ${e.tags?.storage?.keyPrefix} \u2192 ${t.keyPrefix}`),e.tags?.storage?.ipfsEnabled!==t.ipfsEnabled&&i.push(`ZNS IPFS Enabled: ${e.tags?.storage?.ipfsEnabled} \u2192 ${t.ipfsEnabled}`),e.tags?.storage?.arweaveEnabled!==t.arweaveEnabled&&i.push(`ZNS Arweave Enabled: ${e.tags?.storage?.arweaveEnabled} \u2192 ${t.arweaveEnabled}`),e.tags?.storage?.walrusEnabled!==t.walrusEnabled&&i.push(`ZNS Walrus Enabled: ${e.tags?.storage?.walrusEnabled} \u2192 ${t.walrusEnabled}`),e.zelfkeys?.storage?.keyPrefix!==t.zelfkeysKeyPrefix&&i.push(`ZelfKeys Key Prefix: ${e.zelfkeys?.storage?.keyPrefix} \u2192 ${t.zelfkeysKeyPrefix}`),e.zelfkeys?.storage?.ipfsEnabled!==t.zelfkeysIpfsEnabled&&i.push(`ZelfKeys IPFS Enabled: ${e.zelfkeys?.storage?.ipfsEnabled} \u2192 ${t.zelfkeysIpfsEnabled}`),e.zelfkeys?.storage?.arweaveEnabled!==t.zelfkeysArweaveEnabled&&i.push(`ZelfKeys Arweave Enabled: ${e.zelfkeys?.storage?.arweaveEnabled} \u2192 ${t.zelfkeysArweaveEnabled}`),e.zelfkeys?.storage?.walrusEnabled!==t.zelfkeysWalrusEnabled&&i.push(`ZelfKeys Walrus Enabled: ${e.zelfkeys?.storage?.walrusEnabled} \u2192 ${t.zelfkeysWalrusEnabled}`)}getPaymentChanges(e,t,i){let l=e.tags?.payment?.methods||[],c=this.getPaymentMethods();JSON.stringify(l.sort())!==JSON.stringify(c.sort())&&i.push(`Payment Methods: ${l.join(", ")} \u2192 ${c.join(", ")}`);let g=e.tags?.payment?.networks||this.currentLicense?.getNetworks(),M=t.networks;JSON.stringify(g)!==JSON.stringify(M)&&i.push("Networks configuration updated");let L=e.tags?.payment?.whitelist||{},z=this.buildWhitelistFromForm();JSON.stringify(L)!==JSON.stringify(z)&&i.push(`Whitelist: ${Object.keys(L).length} \u2192 ${Object.keys(z).length} entries`);let Q=e.tags?.payment?.pricingTable||{},ee=this.getPricingTableFromRows();JSON.stringify(Q)!==JSON.stringify(ee)&&i.push("Pricing Table: Updated")}getMetadataChanges(e,t,i){e.metadata.launchDate!==t.launchDate&&i.push(`Launch Date: ${e.metadata.launchDate} \u2192 ${t.launchDate}`),e.metadata.version!==t.version&&i.push(`Version: ${e.metadata.version} \u2192 ${t.version}`),e.metadata.documentation!==t.documentation&&i.push(`Documentation: ${e.metadata.documentation} \u2192 ${t.documentation}`),e.metadata.community!==t.community&&i.push(`Community: ${e.metadata.community} \u2192 ${t.community}`),e.metadata.enterprise!==t.enterprise&&i.push(`Enterprise: ${e.metadata.enterprise} \u2192 ${t.enterprise}`),e.metadata.support!==t.support&&i.push(`Support: ${e.metadata.support} \u2192 ${t.support}`)}buildWhitelistFromForm(){let e={};return this.whitelistItems.forEach(t=>{let i=t.domain?.trim(),l=t.discount?.toString().trim(),c=t.type?.trim();if(i&&l&&c){let g=c==="percentage"?"%":c==="fixed"?"$":c;e[i]=`${l}${g}`}}),e}cleanupInvalidData(){let e=this.getPaymentMethods(),t=e.filter(i=>["coinbase","crypto","stripe"].includes(i));if(t.length!==e.length){let i=e.filter(l=>!["coinbase","crypto","stripe"].includes(l));this.accountForm.get("coinbaseEnabled")?.setValue(t.includes("coinbase")),this.accountForm.get("cryptoEnabled")?.setValue(t.includes("crypto")),this.accountForm.get("stripeEnabled")?.setValue(t.includes("stripe")),i.length>0&&this.showError(`Removed invalid payment methods: ${i.join(", ")}. These are no longer supported.`)}}validateDataBeforeSend(){let e=[],i=this.getPaymentMethods().filter(l=>!["coinbase","crypto","stripe"].includes(l));return i.length>0&&e.push(`Invalid payment methods: ${i.join(", ")}. Allowed: coinbase, crypto, stripe`),{valid:e.length===0,errors:e}}buildDomainConfig(){let e=this.accountForm.value,t=this.validateDataBeforeSend();if(!t.valid)throw this.showError(`Validation failed: ${t.errors.join(", ")}`),new Error(`Validation failed: ${t.errors.join(", ")}`);let i=this.buildWhitelistFromForm();return{name:e.domain,holdSuffix:e.holdSuffix,status:this.accountForm.get("status")?.value||"active",owner:e.owner,description:e.description,tags:{minLength:e.minLength,maxLength:e.maxLength,allowedChars:/^[a-zA-Z0-9][a-zA-Z0-9-]*[a-zA-Z0-9]$/,reserved:this.reservedWords,customRules:[],payment:{methods:this.getPaymentMethods(),networks:e.networks,discounts:{yearly:.1,lifetime:.2},rewardPrice:10,whitelist:i,pricingTable:this.getPricingTableFromRows()},storage:{keyPrefix:e.keyPrefix,ipfsEnabled:e.ipfsEnabled,arweaveEnabled:e.arweaveEnabled,walrusEnabled:e.walrusEnabled}},zelfkeys:{plans:this.zelfkeysPlans,payment:{whitelist:{},pricingTable:{}},storage:{keyPrefix:e.zelfkeysKeyPrefix,ipfsEnabled:e.zelfkeysIpfsEnabled,arweaveEnabled:e.zelfkeysArweaveEnabled,walrusEnabled:e.zelfkeysWalrusEnabled}},metadata:{launchDate:e.launchDate,version:e.version,documentation:e.documentation,community:e.community||void 0,enterprise:e.enterprise||void 0,support:e.support}}}loadCurrentLicense(){let e=localStorage.getItem("license");if(e)try{let t=JSON.parse(e);this.currentLicense=U.fromJSON(t)}catch(t){console.error("Error parsing stored license:",t)}}fetchLicenseFromBackend(){return te(this,null,function*(){try{this.isLoading=!0,this._cdr.detectChanges();let e=yield this._licenseService.getMyLicense(!0);if(!e||!e.data||!e.data.myLicense)return;this.currentLicense=U.fromAPIResponseWithWrapper(e.data.myLicense.domainConfig),localStorage.setItem("license",JSON.stringify(this.currentLicense.toJSON()))}catch(e){console.error("Error fetching license from backend:",e),this.showAlert=!0,this.alertMessage="Failed to fetch license from server",this.alertType="error"}finally{this.isLoading=!1,this._cdr.detectChanges()}})}loadLicense(){return te(this,null,function*(){this.currentLicense?.domain||(yield this.fetchLicenseFromBackend())})}populateFormFromLicense(){let e=this.currentLicense?.domainConfig;e&&(this.populateBasicInfo(e),this.populateFeatures(e),this.populateValidationRules(e),this.populateStorageOptions(e),this.populatePaymentSettings(e),this.populateMetadata(e)),this.cleanupInvalidData(),this._cdr.detectChanges()}populateBasicInfo(e){this.accountForm.get("domain")?.setValue(e.name||""),this.accountForm.get("status")?.setValue(e.status||"active"),this.accountForm.get("owner")?.setValue(e.owner||"zelf-team"),this.accountForm.get("description")?.setValue(e.description||"Official Zelf domain"),this.accountForm.get("startDate")?.setValue(e.startDate||""),this.accountForm.get("endDate")?.setValue(e.endDate||"")}populateFeatures(e){this.accountForm.get("znsEnabled")?.setValue(!0),this.accountForm.get("zelfkeysEnabled")?.setValue(!0)}populateValidationRules(e){this.accountForm.get("minLength")?.setValue(e.tags?.minLength||3),this.accountForm.get("maxLength")?.setValue(e.tags?.maxLength||50),this.accountForm.get("holdSuffix")?.setValue(e.holdSuffix||".hold"),e.tags?.reserved&&(this.reservedWords=[...e.tags.reserved])}populateStorageOptions(e){this.accountForm.get("ipfsEnabled")?.setValue(e.tags?.storage?.ipfsEnabled??!0),this.accountForm.get("arweaveEnabled")?.setValue(e.tags?.storage?.arweaveEnabled??!0),this.accountForm.get("walrusEnabled")?.setValue(e.tags?.storage?.walrusEnabled??!0),this.accountForm.get("keyPrefix")?.setValue(e.tags?.storage?.keyPrefix||"tagName"),this.accountForm.get("zelfkeysIpfsEnabled")?.setValue(e.zelfkeys?.storage?.ipfsEnabled??!0),this.accountForm.get("zelfkeysArweaveEnabled")?.setValue(e.zelfkeys?.storage?.arweaveEnabled??!0),this.accountForm.get("zelfkeysWalrusEnabled")?.setValue(e.zelfkeys?.storage?.walrusEnabled??!0),this.accountForm.get("zelfkeysKeyPrefix")?.setValue(e.zelfkeys?.storage?.keyPrefix||"tagName")}populatePaymentSettings(e){if(this.accountForm.get("coinbaseEnabled")?.setValue(e.tags?.payment?.methods?.includes("coinbase")??!0),this.accountForm.get("cryptoEnabled")?.setValue(e.tags?.payment?.methods?.includes("crypto")??!0),this.accountForm.get("stripeEnabled")?.setValue(e.tags?.payment?.methods?.includes("stripe")??!0),this.currentLicense){let t=this.currentLicense.getNetworks();this.accountForm.setControl("networks",this.createNetworksFormGroup(t))}e.tags?.payment?.pricingTable&&this.loadPricingTableFromConfig(e.tags.payment.pricingTable),this.populateWhitelist(e),e.zelfkeys?.plans&&(this.zelfkeysPlans=[...e.zelfkeys.plans])}populateWhitelist(e){e.tags?.payment?.whitelist&&(this.whitelistItems=Object.entries(e.tags.payment.whitelist).map(([t,i])=>{let l=i,c=l.match(/^(\d+(?:\.\d+)?)([%$])$/);if(c){let g=c[2],M=g==="%"?"percentage":g==="$"?"fixed":g;return{domain:t,discount:c[1],type:M}}return{domain:t,discount:l,type:"percentage"}})),this.whitelistItems.forEach((t,i)=>{this.accountForm.get(`whitelistDomain_${i}`)?.setValue(t.domain),this.accountForm.get(`whitelistDiscount_${i}`)?.setValue(t.discount),this.accountForm.get(`whitelistType_${i}`)?.setValue(t.type)})}populateMetadata(e){this.accountForm.get("launchDate")?.setValue(e.metadata?.launchDate||"2023-01-01"),this.accountForm.get("version")?.setValue(e.metadata?.version||"1.0.0"),this.accountForm.get("documentation")?.setValue(e.metadata?.documentation||"https://docs.zelf.world"),this.accountForm.get("community")?.setValue(e.metadata?.community||""),this.accountForm.get("enterprise")?.setValue(e.metadata?.enterprise||""),this.accountForm.get("support")?.setValue(e.metadata?.support||"standard")}saveLicense(){if(this.accountForm.invalid){this.showError("Please fill in all required fields correctly");return}let e=this.accountForm.get("domain")?.value;if(!e){this.showError("Domain is required");return}if(!this.validateDomainName(e)){this.showError("Domain name contains inappropriate content. Please choose a different name.");return}if(this.currentLicense&&!this.hasLicenseChanges(e)){this.showError("No changes detected. Please modify at least one field before saving.");return}let t=this.buildDomainConfig();this._saveConfirmationService.setSaveData({domain:t.name,domainConfig:t,redirectUrl:"/settings/license",operation:{title:this._translocoService.translate("saving_operations.license_configuration.title"),description:this._translocoService.translate("saving_operations.license_configuration.description"),action:this._translocoService.translate("saving_operations.license_configuration.action"),itemName:this._translocoService.translate("saving_operations.license_configuration.itemName")}}),this._router.navigate(["/save-confirmation"],{queryParams:{redirect:"/settings/license"}})}showSuccess(e){this.alertMessage=e,this.alertType="success",this.showAlert=!0,setTimeout(()=>{this.showAlert=!1},5e3)}showError(e){this.alertMessage=e,this.alertType="error",this.showAlert=!0,setTimeout(()=>{this.showAlert=!1},5e3)}cancel(){this.loadCurrentLicense()}getCurrentLicense(){return this.currentLicense}isLicenseActive(){return this.currentLicense?.isActive()||!1}licenseSupportsFeature(e){return this.currentLicense?.supportsFeature(e)||!1}getTagPrice(e,t="1",i=""){return this.currentLicense?.getPrice(e,t,i)||null}validateTagName(e){return this.currentLicense?.validateTagName(e)||{valid:!1,error:"No license found"}}generateHoldDomain(e){return this.currentLicense?.generateHoldDomain(e)||""}initializePricingTable(){let e=this.getDefaultPricingTable();this.pricingTableRows=[];for(let i=1;i<=5;i++){let l=e[i]||{1:0,2:0,3:0,4:0,5:0,lifetime:0};this.pricingTableRows.push({length:i.toString(),oneYear:l[1]||0,twoYears:l[2]||0,threeYears:l[3]||0,fourYears:l[4]||0,fiveYears:l[5]||0,lifetime:l.lifetime||0})}let t=e["6-15"]||{1:0,2:0,3:0,4:0,5:0,lifetime:0};this.pricingTableRows.push({length:"6-15",oneYear:t[1]||0,twoYears:t[2]||0,threeYears:t[3]||0,fourYears:t[4]||0,fiveYears:t[5]||0,lifetime:t.lifetime||0});for(let i=16;i<=27;i++){let l=e[i]||{1:0,2:0,3:0,4:0,5:0,lifetime:0};this.pricingTableRows.push({length:i.toString(),oneYear:l[1]||0,twoYears:l[2]||0,threeYears:l[3]||0,fourYears:l[4]||0,fiveYears:l[5]||0,lifetime:l.lifetime||0})}}resetPricingTable(){this.initializePricingTable()}trackByPricingRow(e,t){return t.length}getPricingTableFromRows(){let e={};return this.pricingTableRows.forEach(t=>{e[t.length]={1:t.oneYear||0,2:t.twoYears||0,3:t.threeYears||0,4:t.fourYears||0,5:t.fiveYears||0,lifetime:t.lifetime||0}}),e}loadPricingTableFromConfig(e){if(!e){this.initializePricingTable();return}this.pricingTableRows=[];for(let i=1;i<=5;i++){let l=e[i]||{1:0,2:0,3:0,4:0,5:0,lifetime:0};this.pricingTableRows.push({length:i.toString(),oneYear:l[1]||0,twoYears:l[2]||0,threeYears:l[3]||0,fourYears:l[4]||0,fiveYears:l[5]||0,lifetime:l.lifetime||0})}let t=e["6-15"]||{1:0,2:0,3:0,4:0,5:0,lifetime:0};this.pricingTableRows.push({length:"6-15",oneYear:t[1]||0,twoYears:t[2]||0,threeYears:t[3]||0,fourYears:t[4]||0,fiveYears:t[5]||0,lifetime:t.lifetime||0});for(let i=16;i<=27;i++){let l=e[i]||{1:0,2:0,3:0,4:0,5:0,lifetime:0};this.pricingTableRows.push({length:i.toString(),oneYear:l[1]||0,twoYears:l[2]||0,threeYears:l[3]||0,fourYears:l[4]||0,fiveYears:l[5]||0,lifetime:l.lifetime||0})}}static{this.\u0275fac=function(t){return new(t||d)(F(Te),F(de),F(Oe),F(ye),F(oe),F(Ye),F(we))}}static{this.\u0275cmp=T({type:d,selectors:[["settings-license"]],decls:1,vars:0,consts:[["newReservedWord",""],["class","w-full max-w-6xl",4,"transloco"],[1,"w-full","max-w-6xl"],["class","mb-6 p-4 rounded-lg",3,"ngClass",4,"ngIf"],[3,"formGroup"],[1,"mb-8"],[1,"text-2xl","font-bold","text-gray-900","dark:text-white","mb-2"],[1,"text-gray-600","dark:text-gray-300"],[1,"bg-blue-50","dark:bg-blue-900/20","border","border-blue-200","dark:border-blue-700","rounded-lg","p-4","mb-6"],[1,"flex","items-start"],[1,"text-blue-600","dark:text-blue-400","mr-3","mt-0.5"],[1,"text-sm","font-semibold","text-blue-800","dark:text-blue-200","mb-2"],[1,"text-sm","text-blue-700","dark:text-blue-300","space-y-1"],[1,"bg-white","dark:bg-gray-800","rounded-lg","shadow-sm","border","border-gray-200","dark:border-gray-700","p-6","mb-6"],[1,"flex","items-center","mb-4"],[1,"text-blue-600","dark:text-blue-400","mr-2"],[1,"text-lg","font-semibold","text-gray-900","dark:text-white"],[1,"grid","grid-cols-1","md:grid-cols-2","gap-6"],[1,"fuse-mat-emphasized-affix","w-full",3,"subscriptSizing"],["matPrefix",""],["matInput","",3,"formControlName","placeholder"],[4,"ngIf"],["matInput","","readonly","",3,"formControlName"],["matInput","","type","date","readonly","",3,"formControlName"],[1,"text-orange-600","dark:text-orange-400"],[1,"text-sm","mr-1"],[1,"md:col-span-2"],["matInput","","rows","3",3,"formControlName","placeholder"],[1,"text-green-600","dark:text-green-400","mr-2"],[1,"space-y-4"],[1,"grid","grid-cols-1","md:grid-cols-2","gap-4"],[1,"border","border-gray-200","dark:border-gray-600","rounded-lg","p-4"],[1,"flex","items-center","justify-between","mb-2"],[1,"font-medium","text-gray-900","dark:text-white"],[3,"formControlName"],[1,"text-sm","text-gray-600","dark:text-gray-300"],["class","mb-6 transition-all duration-300 ease-in-out",4,"ngIf"],[1,"text-indigo-600","dark:text-indigo-400","mr-2"],[1,"mb-6","p-4","bg-blue-50","dark:bg-blue-900/20","rounded-lg"],[1,"flex"],[1,"flex-shrink-0"],[1,"text-blue-400"],[1,"ml-3"],[1,"text-sm","font-medium","text-blue-800","dark:text-blue-200"],[1,"mt-2","text-sm","text-blue-700","dark:text-blue-300"],[1,"mt-1"],["matInput","","type","date",3,"formControlName"],["value","standard"],["value","premium"],["value","enterprise"],[1,"flex","items-center","justify-end","space-x-4"],["mat-stroked-button","","type","button",3,"click","disabled"],["mat-flat-button","","type","button",3,"click","color","disabled"],["diameter","20","class","mr-2",4,"ngIf"],[1,"mb-6","p-4","rounded-lg",3,"ngClass"],[1,"flex","items-center"],[1,"mr-2",3,"ngClass"],[1,"mb-6","transition-all","duration-300","ease-in-out"],[1,"flex","items-center","mb-6"],[1,"text-blue-600","dark:text-blue-400","mr-3","text-2xl"],[1,"text-xl","font-bold","text-gray-900","dark:text-white"],[1,"text-sm","text-gray-600","dark:text-gray-400"],[1,"ml-auto","px-4","py-2","bg-green-100","dark:bg-green-900/30","text-green-800","dark:text-green-200","text-sm","font-medium","rounded-full","border","border-green-200","dark:border-green-700"],[1,"ml-6","space-y-4"],[1,"bg-white","dark:bg-gray-800","rounded-lg","shadow-sm","border-2","border-orange-200","dark:border-orange-700","p-6"],[1,"text-orange-600","dark:text-orange-400","mr-2"],[1,"grid","grid-cols-1","md:grid-cols-3","gap-6"],["matInput","","type","number",3,"formControlName","placeholder"],["matInput","","type","number","min","1","max","27",3,"formControlName","placeholder"],["align","end"],[1,"mt-6"],[1,"block","text-sm","font-medium","text-gray-700","dark:text-gray-300","mb-2"],[1,"flex","flex-wrap","gap-2"],["class","inline-flex items-center px-3 py-1 rounded-full text-sm bg-red-100 dark:bg-red-900 text-red-800 dark:text-red-200",4,"ngFor","ngForOf"],["type","text",1,"px-3","py-1","border","border-gray-300","dark:border-gray-600","rounded-md","text-sm","bg-white","dark:bg-gray-700","text-gray-900","dark:text-white","placeholder-gray-500","dark:placeholder-gray-400",3,"keyup.enter","placeholder"],["type","button",1,"ml-2","text-blue-600","dark:text-blue-400","hover:text-blue-800","dark:hover:text-blue-300",3,"click"],[1,"text-sm"],[1,"mt-4"],[1,"flex","items-center","mb-2"],[1,"text-red-600","dark:text-red-400","mr-2"],[1,"text-sm","font-medium","text-gray-700","dark:text-gray-300"],[1,"ml-2",3,"formControlName"],[1,"space-y-6"],[1,"grid","grid-cols-2","md:grid-cols-4","gap-4"],["class","flex items-center",4,"ngFor","ngForOf"],[1,"mt-2","text-xs","text-gray-500","dark:text-gray-400"],[3,"networksFormGroup"],[1,"flex","items-center","justify-between","mb-4"],["type","button",1,"inline-flex","items-center","px-3","py-1","border","border-gray-300","dark:border-gray-600","text-sm","font-medium","rounded-md","text-gray-700","dark:text-gray-300","bg-white","dark:bg-gray-700","hover:bg-gray-50","dark:hover:bg-gray-600",3,"click"],["class","text-center py-8 text-gray-500 dark:text-gray-400",4,"ngIf"],["class","space-y-3",4,"ngIf"],[1,"mt-4","p-3","bg-gray-50","dark:bg-gray-800","rounded-lg"],[1,"text-sm","font-medium","text-gray-700","dark:text-gray-300","mb-2"],[1,"text-purple-600","dark:text-purple-400","mr-2"],["type","button",1,"inline-flex","items-center","px-3","py-2","border","border-gray-300","dark:border-gray-600","text-sm","font-medium","rounded-md","text-gray-700","dark:text-gray-300","bg-white","dark:bg-gray-700","hover:bg-gray-50","dark:hover:bg-gray-600","focus:outline-none","focus:ring-2","focus:ring-offset-2","focus:ring-blue-500",3,"click"],[1,"mb-4","p-4","bg-blue-50","dark:bg-blue-900/20","rounded-lg"],[1,"text-sm","text-blue-700","dark:text-blue-300"],[1,"overflow-x-auto"],[1,"min-w-full","border","border-gray-200","dark:border-gray-700","rounded-lg"],[1,"bg-gray-50","dark:bg-gray-800"],[1,"px-4","py-3","text-left","text-xs","font-medium","text-gray-500","dark:text-gray-400","uppercase","tracking-wider"],[1,"px-4","py-3","text-center","text-xs","font-medium","text-gray-500","dark:text-gray-400","uppercase","tracking-wider"],[1,"bg-white","dark:bg-gray-900","divide-y","divide-gray-200","dark:divide-gray-700"],[4,"ngFor","ngForOf"],[1,"mt-4","p-4","bg-gray-50","dark:bg-gray-800","rounded-lg"],[1,"text-sm","text-gray-600","dark:text-gray-400","space-y-1"],[1,"inline-flex","items-center","px-3","py-1","rounded-full","text-sm","bg-red-100","dark:bg-red-900","text-red-800","dark:text-red-200"],["type","button",1,"ml-2","text-red-600","dark:text-red-400","hover:text-red-800","dark:hover:text-red-200",3,"click"],[3,"change","checked"],[1,"ml-2","text-sm","text-gray-700","dark:text-gray-300"],[1,"text-center","py-8","text-gray-500","dark:text-gray-400"],[1,"text-4xl","mb-2"],[1,"space-y-3"],["class","flex items-center space-x-3 p-3 border border-gray-200 dark:border-gray-600 rounded-lg",4,"ngFor","ngForOf"],[1,"flex","items-center","space-x-3","p-3","border","border-gray-200","dark:border-gray-600","rounded-lg"],[1,"flex-1"],[1,"w-full","px-3","py-2","border","border-gray-300","dark:border-gray-600","rounded-md","text-sm","bg-white","dark:bg-gray-700","text-gray-900","dark:text-white","placeholder-gray-500","dark:placeholder-gray-400",3,"ngModelChange","ngModel","ngModelOptions","placeholder"],["type","number",1,"w-full","px-3","py-2","border","border-gray-300","dark:border-gray-600","rounded-md","text-sm","bg-white","dark:bg-gray-700","text-gray-900","dark:text-white","placeholder-gray-500","dark:placeholder-gray-400",3,"ngModelChange","ngModel","ngModelOptions","placeholder"],[1,"w-full","px-3","py-2","border","border-gray-300","dark:border-gray-600","rounded-md","text-sm","bg-white","dark:bg-gray-700","text-gray-900","dark:text-white",3,"ngModelChange","ngModel","ngModelOptions"],["value","percentage"],["value","fixed"],["type","button",1,"text-red-600","dark:text-red-400","hover:text-red-800","dark:hover:text-red-200",3,"click"],[1,"px-4","py-3","text-sm","font-medium","text-gray-900","dark:text-white"],[1,"px-4","py-3","text-center"],["type","number",1,"w-20","px-2","py-1","text-sm","border","border-gray-300","dark:border-gray-600","rounded-md","bg-white","dark:bg-gray-700","text-gray-900","dark:text-white",3,"ngModelChange","ngModel","ngModelOptions"],[1,"bg-white","dark:bg-gray-800","rounded-lg","shadow-sm","border-2","border-blue-200","dark:border-blue-700","p-6"],["diameter","20",1,"mr-2"]],template:function(t,i){t&1&&v(0,ht,163,73,"div",1)},dependencies:[W,le,P,$,se,Z,ke,Me,Ne,Ee,Ce,Fe,G,A,ze,Le,Se,j,R,B,V,_e,ue,fe,ge,he,O,ve,J,$e,Pe,H,De,me,ce,D,xe,pe,Ve,We,X,Ge,q,K,Y,be,Ae],encapsulation:2,changeDetection:0})}}return d})();export{ni as SettingsLicenseComponent};
