import{a as x,d as k}from"./chunk-DXVBJCLH.js";import{ea as v,fa as b}from"./chunk-3CSJK4TT.js";import{a as _}from"./chunk-E6ENPQNB.js";import{b as h,d as g,e as y}from"./chunk-FXKMXYKD.js";import{y as p}from"./chunk-XX57SXRU.js";import{Bc as f,Ib as l,Ub as i,Vb as o,Wb as u,ec as d,gb as a,hb as s,rc as r,ub as m}from"./chunk-FFNUM7ZM.js";import"./chunk-TSRGIXR5.js";var w=()=>["/zelfkeys"],T=(()=>{class n{constructor(t,e,c){this._route=t,this._http=e,this._router=c,this._sessionId=null,this.isLoading=!0,this.message="Verifying payment..."}ngOnInit(){this._sessionId=this._route.snapshot.queryParamMap.get("session_id"),this._sessionId?this.checkSession(this._sessionId):this.isLoading=!1}checkSession(t){this._http.post(`${_.apiUrl}/api/subscription/check-session`,{sessionId:t}).subscribe({next:e=>{this.isLoading=!1,e.success&&console.log("Payment confirmed via session check:",e)},error:e=>{this.isLoading=!1,console.error("Error checking session:",e)}})}openExtension(){window.postMessage({type:"OPEN_ZELF_EXTENSION"},"*"),setTimeout(()=>{window.close()},500)}static{this.\u0275fac=function(e){return new(e||n)(s(h),s(p),s(g))}}static{this.\u0275cmp=m({type:n,selectors:[["zelfkeys-success"]],decls:11,vars:4,consts:[[1,"fixed","inset-0","z-50","flex","h-full","w-full","flex-col","items-center","justify-center","overflow-auto","bg-gray-50","dark:bg-gray-900"],[1,"w-full","max-w-md","rounded-2xl","bg-white","p-8","text-center","shadow-xl","dark:bg-gray-800"],[1,"mx-auto","mb-6","flex","h-24","w-24","items-center","justify-center","rounded-full","bg-green-100","dark:bg-green-900/30"],[1,"text-6xl","text-green-600","dark:text-green-400",3,"svgIcon"],[1,"mb-4","text-3xl","font-extrabold","text-gray-900","dark:text-white"],[1,"mb-8","text-lg","text-gray-600","dark:text-gray-300"],[1,"space-y-4"],["mat-flat-button","",1,"w-full","rounded-full","py-6","text-lg","font-semibold","shadow-md","transition-transform","hover:scale-105",3,"click","color","routerLink"]],template:function(e,c){e&1&&(i(0,"div",0)(1,"div",1)(2,"div",2),u(3,"mat-icon",3),o(),i(4,"h1",4),r(5,"Payment Successful!"),o(),i(6,"p",5),r(7," Your subscription to Zelf Keys has been confirmed. You now have full access to create and manage your portfolio keys. "),o(),i(8,"div",6)(9,"button",7),d("click",function(){return c.openExtension()}),r(10," Go to Zelf Keys "),o()()()()),e&2&&(a(3),l("svgIcon","heroicons_outline:check-circle"),a(6),l("color","primary")("routerLink",f(3,w)))},dependencies:[y,k,x,b,v],encapsulation:2})}}return n})();export{T as ZelfKeysSuccessComponent};
