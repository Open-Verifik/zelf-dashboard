var f=class s{constructor(t){this.domain=t.domain||"",this.domainConfig=this.buildDomainConfig(t.domainConfig),this.faceBase64=t.faceBase64,this.masterPassword=t.masterPassword,this.ipfsHash=t.ipfsHash,this.createdAt=t.createdAt,this.updatedAt=t.updatedAt,this.ipfs=t.ipfs,this.zelfProof=t.zelfProof,this.expiresAt=t.expiresAt,this.subscriptionId=t.subscriptionId,this.previousDomain=t.previousDomain,this.type=t.type}buildDomainConfig(t){let e=t?.domainConfig||t,a=()=>e?.tags?.payment?.networks?e.tags.payment.networks:e?.tags?.payment?.currencies&&Array.isArray(e.tags.payment.currencies)?this.migrateCurrenciesToNetworks(e.tags.payment.currencies):this.getDefaultNetworks();return{name:e?.name||"",type:e?.type||"custom",holdSuffix:e?.holdSuffix||".hold",status:e?.status||"inactive",owner:e?.owner||"",description:e?.description||"",startDate:e?.startDate||"",endDate:e?.endDate||"",tags:{minLength:e?.tags?.minLength||3,maxLength:e?.tags?.maxLength||50,allowedChars:e?.tags?.allowedChars||/^[a-zA-Z0-9][a-zA-Z0-9-]*[a-zA-Z0-9]$/,reserved:e?.tags?.reserved||["www","api","admin","support","help"],customRules:e?.tags?.customRules||[],payment:{methods:e?.tags?.payment?.methods||["coinbase","crypto","stripe"],networks:a(),discounts:e?.tags?.payment?.discounts||{yearly:.1,lifetime:.2},rewardPrice:e?.tags?.payment?.rewardPrice||10,whitelist:e?.tags?.payment?.whitelist||{},pricingTable:e?.tags?.payment?.pricingTable||this.getDefaultPricingTable()},storage:{keyPrefix:e?.tags?.storage?.keyPrefix||"tagName",ipfsEnabled:e?.tags?.storage?.ipfsEnabled??!0,arweaveEnabled:e?.tags?.storage?.arweaveEnabled??!0,walrusEnabled:e?.tags?.storage?.walrusEnabled??!0,backupEnabled:e?.tags?.storage?.backupEnabled||!1}},zelfkeys:{plans:e?.zelfkeys?.plans||[],payment:{whitelist:e?.zelfkeys?.payment?.whitelist||{},pricingTable:e?.zelfkeys?.payment?.pricingTable||{}},storage:{keyPrefix:e?.zelfkeys?.storage?.keyPrefix||"tagName",ipfsEnabled:e?.zelfkeys?.storage?.ipfsEnabled??!0,arweaveEnabled:e?.zelfkeys?.storage?.arweaveEnabled??!0,walrusEnabled:e?.zelfkeys?.storage?.walrusEnabled??!0,backupEnabled:e?.zelfkeys?.storage?.backupEnabled||!1}},stripe:{productId:e?.stripe?.productId||"",priceId:e?.stripe?.priceId||"",latestInvoiceId:e?.stripe?.latestInvoiceId||"",amountPaid:e?.stripe?.amountPaid||0,paidAt:e?.stripe?.paidAt||""},limits:{tags:e?.limits?.tags||100,zelfkeys:e?.limits?.zelfkeys||100,zelfProofs:e?.limits?.zelfProofs||100},metadata:{launchDate:e?.metadata?.launchDate||new Date().toISOString().split("T")[0],version:e?.metadata?.version||"1.0.0",documentation:e?.metadata?.documentation||"",community:e?.metadata?.community,enterprise:e?.metadata?.enterprise,support:e?.metadata?.support||"standard"},themeSettings:e?.themeSettings||s.getDefaultThemeSettings()}}getDefaultNetworks(){return{ethereum:{enabled:!0,nativeCurrency:{enabled:!0,code:"ETH"},altCoins:{enabled:!0,standard:"ERC-20"}},solana:{enabled:!0,nativeCurrency:{enabled:!0,code:"SOL"},altCoins:{enabled:!0,standard:"SPL"}},bitcoin:{enabled:!0,nativeCurrency:{enabled:!0,code:"BTC"},altCoins:{enabled:!1,standard:null}},blockdag:{enabled:!0,nativeCurrency:{enabled:!0,code:"BDAG"},altCoins:{enabled:!1,standard:null}},avalanche:{enabled:!0,nativeCurrency:{enabled:!0,code:"AVAX"},altCoins:{enabled:!0,standard:"ERC-20"}},binance:{enabled:!0,nativeCurrency:{enabled:!0,code:"BNB"},altCoins:{enabled:!0,standard:"BEP-20"}},polygon:{enabled:!0,nativeCurrency:{enabled:!0,code:"MATIC"},altCoins:{enabled:!0,standard:"ERC-20"}},sui:{enabled:!0,nativeCurrency:{enabled:!0,code:"SUI"},altCoins:{enabled:!1,standard:null}}}}migrateCurrenciesToNetworks(t){let e=this.getDefaultNetworks();return Object.keys(e).forEach(a=>{e[a].enabled=!1,e[a].nativeCurrency.enabled=!1,e[a].altCoins&&(e[a].altCoins.enabled=!1)}),!t||t.length===0||t.forEach(a=>{let n=a.toUpperCase();n==="ETH"?(e.ethereum.enabled=!0,e.ethereum.nativeCurrency.enabled=!0):n==="SOL"?(e.solana.enabled=!0,e.solana.nativeCurrency.enabled=!0):n==="BTC"?(e.bitcoin.enabled=!0,e.bitcoin.nativeCurrency.enabled=!0):n==="BDAG"?(e.blockdag.enabled=!0,e.blockdag.nativeCurrency.enabled=!0):n==="AVAX"?(e.avalanche.enabled=!0,e.avalanche.nativeCurrency.enabled=!0):n==="SUI"?(e.sui.enabled=!0,e.sui.nativeCurrency.enabled=!0):(n==="USDC"||n==="USDT")&&["ethereum","solana","avalanche"].forEach(i=>{e[i].enabled=!0,e[i].altCoins.enabled=!0})}),e}getDefaultPricingTable(){return{1:{1:240,2:432,3:612,4:768,5:900,lifetime:3600},2:{1:120,2:216,3:306,4:384,5:450,lifetime:1800},3:{1:72,2:130,3:184,4:230,5:270,lifetime:1080},4:{1:36,2:65,3:92,4:115,5:135,lifetime:540},5:{1:30,2:54,3:76,4:96,5:112,lifetime:450},"6-15":{1:24,2:43,3:61,4:77,5:90,lifetime:360},16:{1:23,2:41,3:59,4:74,5:86,lifetime:345},17:{1:22,2:40,3:56,4:70,5:82,lifetime:330},18:{1:21,2:38,3:54,4:67,5:79,lifetime:315},19:{1:20,2:36,3:51,4:64,5:75,lifetime:300},20:{1:19,2:34,3:48,4:61,5:72,lifetime:285},21:{1:18,2:32,3:46,4:58,5:68,lifetime:270},22:{1:17,2:31,3:43,4:54,5:64,lifetime:255},23:{1:16,2:29,3:41,4:51,5:60,lifetime:240},24:{1:15,2:27,3:38,4:48,5:56,lifetime:225},25:{1:14,2:25,3:36,4:45,5:53,lifetime:210},26:{1:13,2:23,3:33,4:42,5:49,lifetime:195},27:{1:12,2:22,3:31,4:38,5:45,lifetime:180}}}getIPFSData(){return this.ipfs}getIPFSHash(){return this.ipfs?.IpfsHash||this.ipfsHash}getIPFSUrl(){return this.ipfs?.url}getIPFSMetadata(){return this.ipfs?.metadata}getZelfProof(){return this.zelfProof}getExpirationDate(){return this.expiresAt?new Date(this.expiresAt):void 0}isExpired(){return this.expiresAt?new Date(this.expiresAt)<new Date:!1}getSubscriptionId(){return this.subscriptionId}getPreviousDomain(){return this.previousDomain}getLicenseType(){return this.type||this.domainConfig.type}isActive(){return this.domainConfig.status==="active"}supportsFeature(t){return!0}getPrice(t,e="1",a=""){if(!t)return{price:0,currency:"USD",reward:0,discount:0,priceWithoutDiscount:0,discountType:"percentage"};let n=t.split("."),i=a.replace(".hold",""),d=n[0].length;if(!this.domainConfig.tags.payment.pricingTable)return{price:0,currency:"USD",reward:0,discount:0,priceWithoutDiscount:0,discountType:"percentage"};if(!["1","2","3","4","5","lifetime"].includes(e))throw new Error("Invalid duration. Use '1', '2', '3', '4', '5' or 'lifetime'.");let r=24;if(d>=6&&d<=15)r=this.domainConfig.tags.payment.pricingTable["6-15"][e];else if(this.domainConfig.tags.payment.pricingTable[d])r=this.domainConfig.tags.payment.pricingTable[d][e];else throw new Error("Invalid name length. Length must be between 1 and 27.");let g=Number(r),o=0,l="percentage",u=this.domainConfig.tags.payment.whitelist||{};if(Object.keys(u).length&&i&&u[i]){let c=u[i];c.includes("%")?(l="percentage",o=parseInt(c),r=r-r*(o/100)):(o=parseInt(c),l="amount",r=r-o)}else i&&(r=r-r*.1);return{price:Math.max(Math.ceil(r*100)/100,0),currency:"USD",reward:Math.max(Math.ceil(r/this.domainConfig.tags.payment.rewardPrice*100)/100,0),discount:o,priceWithoutDiscount:g,discountType:l}}validateTagName(t){if(t.length<this.domainConfig.tags.minLength)return{valid:!1,error:`Tag name must be at least ${this.domainConfig.tags.minLength} characters long`};if(t.length>this.domainConfig.tags.maxLength)return{valid:!1,error:`Tag name must be no more than ${this.domainConfig.tags.maxLength} characters long`};if(!this.domainConfig.tags.allowedChars.test(t))return{valid:!1,error:`Tag name contains invalid characters. Allowed pattern: ${this.domainConfig.tags.allowedChars}`};if(this.domainConfig.tags.reserved.includes(t.toLowerCase()))return{valid:!1,error:`Tag name '${t}' is reserved`};for(let e of this.domainConfig.tags.customRules)if(typeof e=="function"){let a=e(t);if(!a.valid)return a}return{valid:!0}}getStorageConfig(){return this.domainConfig.tags.storage}getZelfkeysStorageConfig(){return this.domainConfig.zelfkeys.storage}getPaymentMethods(){return this.domainConfig.tags.payment.methods}getNetworks(){return this.domainConfig.tags.payment.networks}getLimits(){return this.domainConfig.limits}generateHoldDomain(t){return`${t}${this.domainConfig.holdSuffix}.${this.domain}`}toJSON(){return{domain:this.domain,domainConfig:this.domainConfig,faceBase64:this.faceBase64,masterPassword:this.masterPassword,ipfsHash:this.ipfsHash,createdAt:this.createdAt,updatedAt:this.updatedAt,ipfs:this.ipfs,zelfProof:this.zelfProof,expiresAt:this.expiresAt,subscriptionId:this.subscriptionId,previousDomain:this.previousDomain,type:this.type}}static fromJSON(t){return new s(t)}static fromAPIResponse(t){let e={domain:t.domain,domainConfig:{name:t.name,holdSuffix:t.holdSuffix,status:t.status,owner:t.owner,description:t.description,startDate:t.startDate,endDate:t.endDate,tags:t.tags,zelfkeys:t.zelfkeys,stripe:t.stripe,limits:t.limits,metadata:t.metadata},ipfs:t.ipfs,zelfProof:t.zelfProof,expiresAt:t.expiresAt,subscriptionId:t.subscriptionId,previousDomain:t.previousDomain,type:t.type};return new s(e)}static fromAPIResponseWithWrapper(t){let e=t.data||t;return s.fromAPIResponse(e)}static createEmpty(t){return new s({domain:t,domainConfig:{name:t,holdSuffix:".hold",status:"inactive",owner:"zelf-team",description:`Custom domain: ${t}`,startDate:"",endDate:"",tags:{minLength:3,maxLength:50,allowedChars:/^[a-zA-Z0-9][a-zA-Z0-9-]*[a-zA-Z0-9]$/,reserved:["www","api","admin","support","help"],customRules:[],payment:{methods:["coinbase","crypto","stripe"],networks:{ethereum:{enabled:!0,nativeCurrency:{enabled:!0,code:"ETH"},altCoins:{enabled:!0,standard:"ERC-20"}},solana:{enabled:!0,nativeCurrency:{enabled:!0,code:"SOL"},altCoins:{enabled:!0,standard:"SPL"}},bitcoin:{enabled:!0,nativeCurrency:{enabled:!0,code:"BTC"},altCoins:{enabled:!1,standard:null}},blockdag:{enabled:!0,nativeCurrency:{enabled:!0,code:"BDAG"},altCoins:{enabled:!1,standard:null}},avalanche:{enabled:!0,nativeCurrency:{enabled:!0,code:"AVAX"},altCoins:{enabled:!0,standard:"ERC-20"}},binance:{enabled:!0,nativeCurrency:{enabled:!0,code:"BNB"},altCoins:{enabled:!0,standard:"BEP-20"}},polygon:{enabled:!0,nativeCurrency:{enabled:!0,code:"MATIC"},altCoins:{enabled:!0,standard:"ERC-20"}},sui:{enabled:!0,nativeCurrency:{enabled:!0,code:"SUI"},altCoins:{enabled:!1,standard:null}}},discounts:{yearly:.1,lifetime:.2},rewardPrice:10,whitelist:{},pricingTable:{}},storage:{keyPrefix:"tagName",ipfsEnabled:!0,arweaveEnabled:!0,walrusEnabled:!0,backupEnabled:!1}},zelfkeys:{plans:[],payment:{whitelist:{},pricingTable:{}},storage:{keyPrefix:"tagName",ipfsEnabled:!0,arweaveEnabled:!0,walrusEnabled:!0,backupEnabled:!1}},stripe:{productId:"",priceId:"",latestInvoiceId:"",amountPaid:0,paidAt:""},limits:{tags:100,zelfkeys:100,zelfProofs:100},metadata:{launchDate:new Date().toISOString().split("T")[0],version:"1.0.0",documentation:"",support:"standard"},themeSettings:s.getDefaultThemeSettings()}})}static getDefaultThemeSettings(){return{zns:{enabled:!0,currentMode:"light",lightMode:{colors:{primary:"#3B82F6",secondary:"#64748B",background:"#FFFFFF",backgroundSecondary:"#F8FAFC",text:"#1E293B",textSecondary:"#64748B",textMuted:"#94A3B8",header:"#1E293B",headerText:"#FFFFFF",button:"#3B82F6",buttonText:"#FFFFFF",buttonHover:"#2563EB",buttonSecondary:"#E2E8F0",buttonSecondaryText:"#475569",border:"#E2E8F0",borderHover:"#CBD5E1",success:"#10B981",successText:"#FFFFFF",warning:"#F59E0B",warningText:"#FFFFFF",error:"#EF4444",errorText:"#FFFFFF",card:"#FFFFFF",cardBorder:"#E2E8F0",shadow:"rgba(0, 0, 0, 0.1)"}},darkMode:{colors:{primary:"#60A5FA",secondary:"#94A3B8",background:"#0F172A",backgroundSecondary:"#1E293B",text:"#F1F5F9",textSecondary:"#94A3B8",textMuted:"#64748B",header:"#1E293B",headerText:"#F1F5F9",button:"#60A5FA",buttonText:"#0F172A",buttonHover:"#3B82F6",buttonSecondary:"#334155",buttonSecondaryText:"#F1F5F9",border:"#334155",borderHover:"#475569",success:"#34D399",successText:"#0F172A",warning:"#FBBF24",warningText:"#0F172A",error:"#F87171",errorText:"#0F172A",card:"#1E293B",cardBorder:"#334155",shadow:"rgba(0, 0, 0, 0.3)"}}}}}};export{f as a};
