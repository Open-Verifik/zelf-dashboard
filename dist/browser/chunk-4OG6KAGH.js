import{a as Ee}from"./chunk-TJ4OT6D3.js";import{a as Fe,b as Pe}from"./chunk-HFU72T4I.js";import{a as De}from"./chunk-B7YMJF7I.js";import{b as Ae}from"./chunk-NFUOMC3G.js";import"./chunk-IY2LCN2B.js";import"./chunk-HKZCOKJ5.js";import{a as Te}from"./chunk-FCZIVESN.js";import{a as Ne}from"./chunk-BA5OH3HU.js";import{a as Be}from"./chunk-C5XLOSLN.js";import{a as le,c as ce,d as de}from"./chunk-CWADPOBT.js";import{a as Ve}from"./chunk-TUSM5AIO.js";import{a as Se,b as Me}from"./chunk-KBHPG72G.js";import"./chunk-3YT6FQTV.js";import{c as we}from"./chunk-7DGHLOZR.js";import{i as ne}from"./chunk-B4I74HQQ.js";import{c as me}from"./chunk-NBWQJWWS.js";import{c as re,d as oe}from"./chunk-AH65Y7SD.js";import{A as ke,b as ue,d as C,f as ge,g as he,l as fe,o as _e,q as ye,r as ve,s as xe,t as be,y as Ce,z as Ie}from"./chunk-OLKRQMP7.js";import"./chunk-LW2DGXIP.js";import{ea as ae,fa as se}from"./chunk-3S5Q73EG.js";import"./chunk-E6ENPQNB.js";import{c as pe}from"./chunk-YKMDIVBT.js";import"./chunk-HFS7MMEA.js";import{b as ee,d as te,e as ie}from"./chunk-6ZNT62BP.js";import"./chunk-53Z5H5E5.js";import{Ab as x,Bc as Z,E,Hc as m,Ib as u,Ic as p,J as A,Kb as P,Pb as d,Sb as T,Tb as B,Ub as a,Vb as s,Wb as M,_b as k,ec as v,ga as X,gb as r,gc as g,hb as w,kc as D,lc as N,mc as z,qc as L,ra as f,rc as l,sa as _,sc as I,tc as b,ub as Y,uc as R}from"./chunk-3HE7R7QB.js";import{a as V,b as F,g as S}from"./chunk-TSRGIXR5.js";var qe=["signInNgForm"],je=["biometricVerification"],ze=(i,c)=>c.code,Ue=()=>["/sign-up"];function Oe(i,c){if(i&1){let e=k();a(0,"div",3)(1,"div",36)(2,"div",37)(3,"div",38)(4,"h2",39),l(5),m(6,"transloco"),s(),a(7,"div",40)(8,"div",41)(9,"mat-icon",42),l(10,"lock"),s(),a(11,"span"),l(12,"SECURE"),s()(),a(13,"span",43),l(14),m(15,"transloco"),s()()(),a(16,"button",44),v("click",function(){f(e);let t=g();return _(t.onBiometricCancel())}),a(17,"mat-icon",45),l(18,"close"),s()()(),a(19,"div",46)(20,"app-data-biometrics",47,2),v("biometricsSuccess",function(t){f(e);let o=g();return _(o.onBiometricSuccess(t))})("biometricsCancel",function(){f(e);let t=g();return _(t.onBiometricCancel())}),s()()()()}if(i&2){let e=g();r(5),b(" ",p(6,4,"biometricVerification.title")," "),r(9),b(" ",(e.userData==null?null:e.userData.email)||(e.userData==null?null:e.userData.phone)||p(15,6,"biometricVerification.account")," "),r(6),u("userData",e.userData)("isModalContext",!0)}}function Qe(i,c){if(i&1){let e=k();a(0,"app-passkey-prompt-modal",48),v("onSave",function(){f(e);let t=g();return _(t.onPasskeySave())})("onCancel",function(){f(e);let t=g();return _(t.onPasskeyCancel())}),s()}}function $e(i,c){if(i&1&&(a(0,"fuse-alert",13),l(1),s()),i&2){let e=g();u("appearance","soft")("showIcon",!0)("type",e.alert.type)("@shake",e.alert.type==="error"),r(),b(" ",e.alert.message," ")}}function We(i,c){i&1&&(l(0),m(1,"transloco")),i&2&&b(" ",p(1,1,"signIn.emailRequired")," ")}function Ge(i,c){i&1&&(l(0),m(1,"transloco")),i&2&&b(" ",p(1,1,"signIn.emailInvalid")," ")}function He(i,c){if(i&1&&(a(0,"div",24),x(1,We,2,3)(2,Ge,2,3),s()),i&2){let e=g(2);r(),d(e.signInForm.get("email").hasError("required")?1:-1),r(),d(e.signInForm.get("email").hasError("email")?2:-1)}}function Je(i,c){if(i&1){let e=k();a(0,"button",51),v("click",function(){f(e);let t=g(2);return _(t.loginWithPasskey())}),a(1,"mat-icon",52),l(2,"fingerprint"),s(),a(3,"span",53),l(4,"Sign in with Passkey"),s()()}}function Ke(i,c){if(i&1){let e=k();a(0,"div",17)(1,"div",20)(2,"label",19),l(3),m(4,"transloco"),s(),a(5,"input",49),v("blur",function(){f(e);let t=g();return _(t.checkPasskey())}),s(),x(6,He,3,2,"div",24),s(),x(7,Je,5,0,"button",50),s()}if(i&2){let e=g();r(3),I(p(4,6,"signIn.emailAddress")),r(2),P("border-red-500",e.signInForm.get("email").touched&&e.signInForm.get("email").invalid),u("formControlName","email"),r(),d(e.signInForm.get("email").touched&&e.signInForm.get("email").invalid?6:-1),r(),d(e.showPasskeyLogin?7:-1)}}function Xe(i,c){if(i&1&&(a(0,"option",35),l(1),s()),i&2){let e=c.$implicit;u("value",e.code),r(),R("",e.flag," ",e.code,"")}}function Ye(i,c){i&1&&(l(0),m(1,"transloco")),i&2&&b(" ",p(1,1,"signIn.phoneRequired")," ")}function Ze(i,c){i&1&&(l(0),m(1,"transloco")),i&2&&b(" ",p(1,1,"signIn.phonePattern")," ")}function et(i,c){if(i&1&&(a(0,"div",60),x(1,Ye,2,3)(2,Ze,2,3),s()),i&2){let e=g(2);r(),d(e.signInForm.get("phone").hasError("required")?1:-1),r(),d(e.signInForm.get("phone").hasError("pattern")?2:-1)}}function tt(i,c){if(i&1){let e=k();a(0,"button",51),v("click",function(){f(e);let t=g(2);return _(t.loginWithPasskey())}),a(1,"mat-icon",52),l(2,"fingerprint"),s(),a(3,"span",53),l(4,"Sign in with Passkey"),s()()}}function it(i,c){if(i&1){let e=k();a(0,"div",17)(1,"div",54)(2,"label",19),l(3),m(4,"transloco"),s(),a(5,"div",55)(6,"div",56)(7,"select",57),T(8,Xe,2,3,"option",35,ze),s()(),a(10,"div",58)(11,"input",59),v("blur",function(){f(e);let t=g();return _(t.checkPasskey())}),s()()(),x(12,et,3,2,"div",60),s(),x(13,tt,5,0,"button",50),s()}if(i&2){let e=g();r(3),I(p(4,5,"signIn.phoneNumber")),r(4),u("formControlName","countryCode"),r(),B(e.countryCodes),r(3),u("formControlName","phone"),r(),d(e.signInForm.get("phone").touched&&e.signInForm.get("phone").invalid?12:-1),r(),d(e.showPasskeyLogin?13:-1)}}function nt(i,c){i&1&&(a(0,"div",24),l(1),m(2,"transloco"),s()),i&2&&(r(),I(p(2,1,"signIn.masterPasswordRequired")))}function rt(i,c){i&1&&(a(0,"span"),l(1),m(2,"transloco"),s(),a(3,"mat-icon",61),l(4,"arrow_forward"),s()),i&2&&(r(),I(p(2,1,"signIn.signInButton")))}function ot(i,c){i&1&&M(0,"mat-progress-spinner",29),i&2&&u("diameter",24)("mode","indeterminate")}function at(i,c){if(i&1&&(a(0,"option",35),l(1),s()),i&2){let e=c.$implicit;u("value",e.code),r(),R("",e.flag," ",e.name,"")}}var Le=(()=>{class i{constructor(e,n,t,o,y){this._activatedRoute=e,this._authService=n,this._formBuilder=t,this._router=o,this._passkeyService=y,this.alert={type:"success",message:""},this.showAlert=!1,this.showBiometricVerification=!1,this.showPasskeyLogin=!1,this.showPasskeyPrompt=!1,this.userData={},this.availableLanguages=[{code:"en",name:"English",flag:"\u{1F1FA}\u{1F1F8}"},{code:"es",name:"Espa\xF1ol",flag:"\u{1F1EA}\u{1F1F8}"},{code:"fr",name:"Fran\xE7ais",flag:"\u{1F1EB}\u{1F1F7}"},{code:"zh",name:"\u4E2D\u6587",flag:"\u{1F1E8}\u{1F1F3}"},{code:"ja",name:"\u65E5\u672C\u8A9E",flag:"\u{1F1EF}\u{1F1F5}"},{code:"ko",name:"\uD55C\uAD6D\uC5B4",flag:"\u{1F1F0}\u{1F1F7}"}],this.currentLanguage="en",this.countryCodes=De,this._translocoService=X(le)}ngOnInit(){this.signInForm=this._formBuilder.group({identificationMethod:["email",C.required],email:["",[C.required,C.email]],countryCode:["+1"],phone:[""],masterPassword:["",C.required],rememberMe:[""]}),this.signInForm.get("identificationMethod")?.valueChanges.subscribe(e=>{this.updateValidation(e),setTimeout(()=>this.checkPasskey(),100)}),this.signInForm.get("email")?.valueChanges.pipe(E(300),A()).subscribe(()=>{this.checkPasskey()}),this.signInForm.get("phone")?.valueChanges.pipe(E(300),A()).subscribe(()=>{this.checkPasskey()}),this.updateValidation("email"),this.loadRememberedData(),this.currentLanguage=this._translocoService.getActiveLang()||"en"}updateValidation(e){let n=this.signInForm.get("email"),t=this.signInForm.get("countryCode"),o=this.signInForm.get("phone");e==="email"?(n?.setValidators([C.required,C.email]),t?.clearValidators(),o?.clearValidators()):e==="phone"&&(n?.clearValidators(),t?.setValidators([C.required]),o?.setValidators([C.required,C.pattern(/^[0-9]{8,12}$/)])),n?.updateValueAndValidity(),t?.updateValueAndValidity(),o?.updateValueAndValidity()}_getCurrentIdentifier(){let e=this.signInForm.get("identificationMethod")?.value;if(e==="email")return this.signInForm.get("email")?.value;if(e==="phone"){let n=this.signInForm.get("countryCode")?.value,t=this.signInForm.get("phone")?.value;if(n&&t)return`${n}${t}`}return null}checkPasskey(){return S(this,null,function*(){let e=this._getCurrentIdentifier();if(e){let n=yield this._passkeyService.getPasskeyMetadata(e);this.showPasskeyLogin=!!n}else this.showPasskeyLogin=!1})}loginWithPasskey(){return S(this,null,function*(){let e=this._getCurrentIdentifier();if(!e)return;let n=yield this._passkeyService.getPasskeyMetadata(e);if(n)try{let t=yield this._passkeyService.authenticate(n.credentialId,this._passkeyService.base64ToBuffer(n.salt));if(t){let o=yield this._passkeyService.decryptPassword(n.ciphertext,n.iv,t);this.signInForm.patchValue({masterPassword:o,rememberMe:!0}),this.signIn()}}catch(t){console.error("Passkey login failed:",t),this.alert={type:"error",message:"Passkey login failed. Please use your password."},this.showAlert=!0}})}signIn(){if(this.signInForm.invalid)return;this.saveRememberedData();let e=this.signInForm.value,n=e.identificationMethod;n==="email"?this.userData={email:e.email,masterPassword:e.masterPassword,identificationMethod:"email"}:n==="phone"&&(this.userData={countryCode:e.countryCode,phone:e.phone,masterPassword:e.masterPassword,identificationMethod:"phone"}),this._authService.verifyClientExists(this.userData).subscribe(t=>{let o=t.data?.publicData;if(o?.accountType==="staff_account"?this.userData=F(V({},this.userData),{email:o?.staffEmail,phone:o?.staffPhone,countryCode:o?.staffCountryCode}):this.userData=F(V({},this.userData),{email:o?.accountEmail,phone:o?.accountPhone,countryCode:o?.accountCountryCode}),o?.accountEmail||o?.staffEmail){this.showBiometricVerification=!0,this.showAlert=!1;return}this.showAlert=!0,this.alert={type:"error",message:this.getErrorMessage({message:"Client not found"})}},t=>{console.error("Verify client exists error:",t),this.showAlert=!0,this.alert={type:"error",message:this.getErrorMessage(t)}})}onBiometricSuccess(e){this.signInForm.disable();let n=F(V({},this.userData),{masterPassword:e.password,faceBase64:e.faceBase64});this._authService.signIn(n).then(t=>S(this,null,function*(){if(t.data?.token&&t.data?.zelfProof&&t.data?.zelfAccount){this._authService.setSession({zelfProof:t.data.zelfProof,zelfAccount:t.data.zelfAccount}),this._authService.setAccessToken(t.data.token);let o=this._getCurrentIdentifier(),y=this.signInForm.get("masterPassword")?.value;o&&y?(yield this._passkeyService.getPasskeyMetadata(o))?this._router.navigateByUrl("/analytics"):this.showPasskeyPrompt=!0:this._router.navigateByUrl("/analytics")}else console.error("Sign in response missing required authentication data:",t),this.alert={type:"error",message:this.getErrorMessage({message:"Incomplete authentication data received"})},this.showAlert=!0,this.signInForm.enable(),this.showBiometricVerification=!1}),t=>{if(console.error("Sign in error:",t),t?.message&&(t.message.includes("Multiple face were detected")||t.message.includes("No face detected")||t.message.includes("Face not recognized")||t.message.includes("biometric")||t.message.includes("face")||t.message.includes("LIVENESS")||t.message.includes("liveness"))){this.biometricVerification&&this.biometricVerification.handleApiError(t);return}this.signInForm.enable(),this.signInNgForm.resetForm(),this.showBiometricVerification=!1;let o=this.getErrorMessage(t);this.alert={type:"error",message:o},this.showAlert=!0})}onPasskeySave(){let e=this._getCurrentIdentifier(),n=this.signInForm.get("masterPassword")?.value;e&&n&&this._passkeyService.register(e).then(t=>S(this,null,function*(){if(t){let o=yield this._passkeyService.encryptPassword(n,t.key);yield this._passkeyService.savePasskeyMetadata(e,{credentialId:t.credentialId,salt:this._passkeyService.bufferToBase64(t.salt),iv:o.iv,ciphertext:o.ciphertext})}this.showPasskeyPrompt=!1,this._router.navigateByUrl("/analytics")}))}onPasskeyCancel(){this.showPasskeyPrompt=!1,this._router.navigateByUrl("/analytics")}onBiometricCancel(){this.showBiometricVerification=!1,this.userData={},this.clearRememberedData()}getErrorMessage(e){let n=e?.error?.code||e?.code||e?.error?.message||e?.message||"unknown_error",t=e?.error?.message||e?.message||"",o={client_not_found:"errors.client_not_found",client_invalid_api_key:"errors.client_invalid_api_key","403:client_not_found":"errors.client_not_found","403:client_invalid_api_key":"errors.client_invalid_api_key",Forbidden:"errors.unknown_error",Conflict:"errors.unknown_error",BadRequest:"errors.validation_error",UnprocessableEntity:"errors.validation_error",InternalServerError:"errors.unknown_error",Timeout:"errors.network_error",unknown_error:"errors.unknown_error",network_error:"errors.network_error",validation_error:"errors.validation_error"};if(t){if(t.includes("client_not_found"))return this._translocoService.translate("errors.client_not_found");if(t.includes("client_invalid_api_key"))return this._translocoService.translate("errors.client_invalid_api_key");if(t.toUpperCase().includes("THE PROVIDED PASSWORD IS INVALID"))return this._translocoService.translate("errors.invalid_password");if(t.includes("Incomplete authentication data received"))return this._translocoService.translate("errors.incomplete_auth_data")}let y=o[n]||"errors.unknown_error";return this._translocoService.translate(y)}loadRememberedData(){try{let e=localStorage.getItem("zelf_remembered_signin");if(e){let n=JSON.parse(e);n.identificationMethod&&(this.signInForm.patchValue({identificationMethod:n.identificationMethod}),this.updateValidation(n.identificationMethod)),n.email&&this.signInForm.patchValue({email:n.email}),n.countryCode&&this.signInForm.patchValue({countryCode:n.countryCode}),n.phone&&this.signInForm.patchValue({phone:n.phone}),n.rememberMe&&this.signInForm.patchValue({rememberMe:n.rememberMe})}}catch(e){console.error("Error loading remembered data:",e)}}saveRememberedData(){let e=this.signInForm.value;if(e.rememberMe)try{let t={identificationMethod:e.identificationMethod,rememberMe:!0};e.identificationMethod==="email"&&e.email?t.email=e.email:e.identificationMethod==="phone"&&(e.countryCode&&(t.countryCode=e.countryCode),e.phone&&(t.phone=e.phone)),localStorage.setItem("zelf_remembered_signin",JSON.stringify(t))}catch(t){console.error("Error saving remembered data:",t)}else localStorage.removeItem("zelf_remembered_signin")}clearRememberedData(){localStorage.removeItem("zelf_remembered_signin")}onLanguageChange(e){this.currentLanguage=e,this._translocoService.setActiveLang(e)}static{this.\u0275fac=function(n){return new(n||i)(w(ee),w(me),w(Ce),w(te),w(Ne))}}static{this.\u0275cmp=Y({type:i,selectors:[["auth-sign-in"]],viewQuery:function(n,t){if(n&1&&(D(qe,5),D(je,5)),n&2){let o;N(o=z())&&(t.signInNgForm=o.first),N(o=z())&&(t.biometricVerification=o.first)}},decls:58,vars:59,consts:[["signInNgForm","ngForm"],["masterPasswordField",""],["biometricVerification",""],[1,"fixed","inset-0","bg-black/60","backdrop-blur-md","flex","items-center","justify-center","z-50","p-4","transition-opacity","duration-300"],[1,"flex","flex-col","items-center","justify-center","min-h-screen","bg-gray-50","dark:bg-gray-900","w-full","px-4","sm:px-6"],[1,"w-full","max-w-[420px]","bg-white","dark:bg-gray-800","rounded-3xl","shadow-xl","overflow-hidden","border","border-gray-100","dark:border-gray-700"],[1,"p-8","sm:p-10"],[1,"flex","flex-col","items-center","mb-8"],[1,"w-12","h-12","mb-6"],["src","images/logo/logo.svg","alt","Logo",1,"w-full","h-full"],[1,"text-2xl","font-bold","text-gray-900","dark:text-white","tracking-tight"],[1,"mt-2","text-sm","text-gray-500","dark:text-gray-400"],[1,"font-medium","text-primary-600","hover:text-primary-500","ml-1","transition-colors",3,"routerLink"],[1,"mb-6",3,"appearance","showIcon","type"],[3,"formGroup"],[1,"bg-gray-100","dark:bg-gray-700/50","p-1","rounded-xl","mb-6","flex"],["type","button",1,"flex-1","text-sm","font-medium","py-2","rounded-lg","transition-all","duration-200",3,"click"],[1,"space-y-4"],[1,"mt-6","mb-6"],[1,"block","text-xs","font-semibold","text-gray-500","dark:text-gray-400","uppercase","tracking-wider","mb-1.5","ml-1"],[1,"relative"],["id","masterPassword","type","password","placeholder","\u2022\u2022\u2022\u2022\u2022\u2022\u2022\u2022",1,"w-full","pl-4","pr-12","py-3","bg-gray-50","dark:bg-gray-700/50","border","border-gray-200","dark:border-gray-600","rounded-xl","focus:ring-2","focus:ring-primary-500","focus:border-transparent","outline-none","transition-all","text-gray-900","dark:text-white","placeholder-gray-400",3,"formControlName"],["type","button",1,"absolute","right-3","top-1/2","-translate-y-1/2","text-gray-400","hover:text-gray-600","dark:hover:text-gray-200","transition-colors","p-1",3,"click"],[1,"icon-size-5",3,"svgIcon"],[1,"text-red-500","text-xs","mt-1","ml-1"],[1,"flex","items-center","mb-8"],[1,"custom-checkbox",3,"color","formControlName"],[1,"text-sm","font-medium","text-gray-600","dark:text-gray-300"],["type","button",1,"w-full","py-3.5","px-4","bg-gray-900","dark:bg-white","text-white","dark:text-gray-900","font-bold","rounded-xl","shadow-lg","hover:shadow-xl","hover:-translate-y-0.5","active:translate-y-0","active:shadow-md","transition-all","duration-200","disabled:opacity-50","disabled:pointer-events-none","flex","items-center","justify-center","gap-2",3,"click","disabled"],[3,"diameter","mode"],[1,"mt-8","text-xs","text-center","text-gray-400","dark:text-gray-500"],["href","https://docs.zelf.world/docs/legal/terms-of-use","target","_blank",1,"underline","hover:text-gray-600","dark:hover:text-gray-300","transition-colors"],["href","https://docs.zelf.world/docs/legal/privacy-policy","target","_blank",1,"underline","hover:text-gray-600","dark:hover:text-gray-300","transition-colors"],[1,"fixed","bottom-6","right-6","z-20"],[1,"px-3","py-2","text-sm","font-medium","text-gray-500","bg-white/80","dark:bg-gray-800/80","backdrop-blur","border","border-gray-200","dark:border-gray-700","rounded-lg","shadow-sm","hover:bg-white","dark:hover:bg-gray-800","focus:outline-none","focus:ring-2","focus:ring-primary-500","cursor-pointer","transition-all",3,"change","value"],[3,"value"],[1,"bg-white","dark:bg-slate-900","rounded-3xl","w-full","max-w-4xl","max-h-[90vh]","overflow-hidden","shadow-2xl","transform","transition-all","scale-100","flex","flex-col"],[1,"px-6","py-5","flex","items-center","justify-between","shrink-0"],[1,"flex","flex-col"],[1,"text-xl","font-bold","text-gray-900","dark:text-white","leading-tight","tracking-tight"],[1,"flex","items-center","gap-1.5","mt-1"],[1,"bg-primary-50","dark:bg-primary-900/30","text-primary-600","dark:text-primary-400","rounded-full","px-2","py-0.5","text-[11px]","font-semibold","uppercase","tracking-wide","flex","items-center","gap-1"],[1,"icon-size-3"],[1,"text-xs","font-medium","text-gray-500","dark:text-gray-400"],["mat-icon-button","",1,"w-8","h-8","flex","items-center","justify-center","bg-gray-100","hover:bg-gray-200","dark:bg-gray-800","dark:hover:bg-gray-700","rounded-full","transition-colors",3,"click"],[1,"icon-size-4","text-gray-500","dark:text-gray-400"],[1,"p-0","pt-4","pb-8","overflow-y-auto","flex-1","flex","flex-col","justify-center","items-center"],[3,"biometricsSuccess","biometricsCancel","userData","isModalContext"],[3,"onSave","onCancel"],["id","email","placeholder","name@company.com",1,"w-full","px-4","py-3","bg-gray-50","dark:bg-gray-700/50","border","border-gray-200","dark:border-gray-600","rounded-xl","focus:ring-2","focus:ring-primary-500","focus:border-transparent","outline-none","transition-all","text-gray-900","dark:text-white","placeholder-gray-400",3,"blur","formControlName"],["type","button",1,"w-full","group","flex","items-center","justify-center","gap-2","py-2.5","px-4","bg-primary-50","dark:bg-primary-900/20","text-primary-600","dark:text-primary-400","rounded-xl","border","border-primary-100","dark:border-primary-800","hover:bg-primary-100","dark:hover:bg-primary-900/30","transition-colors"],["type","button",1,"w-full","group","flex","items-center","justify-center","gap-2","py-2.5","px-4","bg-primary-50","dark:bg-primary-900/20","text-primary-600","dark:text-primary-400","rounded-xl","border","border-primary-100","dark:border-primary-800","hover:bg-primary-100","dark:hover:bg-primary-900/30","transition-colors",3,"click"],[1,"icon-size-5","transition-transform","group-hover:scale-110"],[1,"font-medium"],[1,"space-y-1.5"],[1,"flex","gap-3"],[1,"w-32"],[1,"w-full","h-[46px]","px-3","bg-gray-50","dark:bg-gray-700/50","border","border-gray-200","dark:border-gray-600","rounded-xl","focus:ring-2","focus:ring-primary-500","focus:border-transparent","outline-none","transition-all","text-gray-900","dark:text-white","appearance-none","cursor-pointer",3,"formControlName"],[1,"flex-1"],["id","phone","type","tel","placeholder","555-0123",1,"w-full","px-4","py-3","bg-gray-50","dark:bg-gray-700/50","border","border-gray-200","dark:border-gray-600","rounded-xl","focus:ring-2","focus:ring-primary-500","focus:border-transparent","outline-none","transition-all","text-gray-900","dark:text-white","placeholder-gray-400",3,"blur","formControlName"],[1,"text-red-500","text-xs","ml-1"],[1,"icon-size-5"]],template:function(n,t){if(n&1){let o=k();x(0,Oe,22,8,"div",3)(1,Qe,1,0,"app-passkey-prompt-modal"),a(2,"div",4)(3,"div",5)(4,"div",6)(5,"div",7)(6,"div",8),M(7,"img",9),s(),a(8,"h1",10),l(9,"Welcome back"),s(),a(10,"div",11),l(11),m(12,"transloco"),a(13,"a",12),l(14),m(15,"transloco"),s()()(),x(16,$e,2,5,"fuse-alert",13),a(17,"form",14,0)(19,"div",15)(20,"button",16),v("click",function(){let h;return f(o),_((h=t.signInForm.get("identificationMethod"))==null?null:h.setValue("email"))}),l(21," Email "),s(),a(22,"button",16),v("click",function(){let h;return f(o),_((h=t.signInForm.get("identificationMethod"))==null?null:h.setValue("phone"))}),l(23," Phone "),s()(),x(24,Ke,8,8,"div",17)(25,it,14,7,"div",17),a(26,"div",18)(27,"label",19),l(28),m(29,"transloco"),s(),a(30,"div",20),M(31,"input",21,1),a(33,"button",22),v("click",function(){f(o);let h=L(32);return _(h.type==="password"?h.type="text":h.type="password")}),M(34,"mat-icon",23),s()(),x(35,nt,3,3,"div",24),s(),a(36,"div",25)(37,"mat-checkbox",26)(38,"span",27),l(39),m(40,"transloco"),s()()(),a(41,"button",28),v("click",function(){return f(o),_(t.signIn())}),x(42,rt,5,3)(43,ot,1,2,"mat-progress-spinner",29),s()(),a(44,"p",30),l(45," By signing in, you agree to our "),a(46,"a",31),l(47),m(48,"transloco"),s(),l(49," and "),a(50,"a",32),l(51),m(52,"transloco"),s(),l(53,". "),s()()(),a(54,"div",33)(55,"select",34),v("change",function(h){return f(o),_(t.onLanguageChange(h.target.value))}),T(56,at,2,3,"option",35,ze),s()()()}if(n&2){let o,y,h,q,j,U,O,Q,$,W,G,H,J,K,Re=L(32);d(t.showBiometricVerification?0:-1),r(),d(t.showPasskeyPrompt?1:-1),r(10),b(" ",p(12,46,"signIn.dontHaveAccount")," "),r(2),u("routerLink",Z(58,Ue)),r(),b(" ",p(15,48,"signIn.signUp")," "),r(2),d(t.showAlert?16:-1),r(),u("formGroup",t.signInForm),r(3),P("bg-white",((o=t.signInForm.get("identificationMethod"))==null?null:o.value)==="email")("shadow-sm",((y=t.signInForm.get("identificationMethod"))==null?null:y.value)==="email")("text-gray-900",((h=t.signInForm.get("identificationMethod"))==null?null:h.value)==="email")("dark:bg-gray-600",((q=t.signInForm.get("identificationMethod"))==null?null:q.value)==="email")("dark:text-white",((j=t.signInForm.get("identificationMethod"))==null?null:j.value)==="email")("text-gray-500",((U=t.signInForm.get("identificationMethod"))==null?null:U.value)!=="email"),r(2),P("bg-white",((O=t.signInForm.get("identificationMethod"))==null?null:O.value)==="phone")("shadow-sm",((Q=t.signInForm.get("identificationMethod"))==null?null:Q.value)==="phone")("text-gray-900",(($=t.signInForm.get("identificationMethod"))==null?null:$.value)==="phone")("dark:bg-gray-600",((W=t.signInForm.get("identificationMethod"))==null?null:W.value)==="phone")("dark:text-white",((G=t.signInForm.get("identificationMethod"))==null?null:G.value)==="phone")("text-gray-500",((H=t.signInForm.get("identificationMethod"))==null?null:H.value)!=="phone"),r(2),d(((J=t.signInForm.get("identificationMethod"))==null?null:J.value)==="email"?24:-1),r(),d(((K=t.signInForm.get("identificationMethod"))==null?null:K.value)==="phone"?25:-1),r(3),I(p(29,50,"signIn.masterPassword")),r(3),u("formControlName","masterPassword"),r(3),u("svgIcon",Re.type==="password"?"heroicons_solid:eye":"heroicons_solid:eye-slash"),r(),d(t.signInForm.get("masterPassword").touched&&t.signInForm.get("masterPassword").hasError("required")?35:-1),r(2),u("color","primary")("formControlName","rememberMe"),r(2),I(p(40,52,"signIn.rememberMe")),r(2),u("disabled",t.signInForm.disabled),r(),d(t.signInForm.disabled?-1:42),r(),d(t.signInForm.disabled?43:-1),r(4),I(p(48,54,"signIn.termsOfUse")),r(4),I(p(52,56,"signIn.privacyPolicy")),r(4),u("value",t.currentLanguage),r(),B(t.availableLanguages)}},dependencies:[ie,Ve,Ie,fe,xe,be,ue,ve,ge,he,ke,_e,ye,ne,we,oe,re,se,ae,Pe,Fe,Me,Se,Ee,Ae,Be,de,ce,Te],encapsulation:2,data:{animation:pe}})}}return i})();var jt=[{path:"",component:Le}];export{jt as default};
