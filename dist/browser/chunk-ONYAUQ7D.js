import{a as K,b as R}from"./chunk-3ITT7UKH.js";import{a as Ie}from"./chunk-NXPVZPNL.js";import{a as ae}from"./chunk-EQ7VHPH6.js";import{a as Ne}from"./chunk-RWHW4F27.js";import{a as Fe,b as ee}from"./chunk-YE475IAC.js";import{a as xe,b as N,d as I}from"./chunk-HO6TKSQT.js";import{A as W,b as D,d as k,f as T,g as M,i as $,k as Q,l as ye,m as B,o as V,p as ve,q as L,r as we,s as _e,t as ke,u as Ce,v as Se,y as Ee,z as j}from"./chunk-QH2I47VF.js";import{a as be}from"./chunk-EBTKBAUO.js";import{ea as E,fa as F}from"./chunk-3CSJK4TT.js";import"./chunk-E6ENPQNB.js";import{b as fe,d as he}from"./chunk-FXKMXYKD.js";import{h as J,i as z,j as X,q as ge,r as S}from"./chunk-XX57SXRU.js";import{Ab as g,Ba as H,Bc as P,Hc as me,Ib as d,Kc as pe,Mb as re,Pb as ne,Pc as ue,Ub as n,Vb as r,Wb as b,_b as v,ec as y,gb as a,gc as c,hb as G,qc as oe,ra as f,rc as l,sa as h,sc as p,tc as x,ub as C,uc as ce,xc as O,yc as A,zc as Y}from"./chunk-FFNUM7ZM.js";import{a as de,g as ie}from"./chunk-TSRGIXR5.js";function De(o,m){if(o&1&&(n(0,"span",30),l(1),r()),o&2){let e=c().$implicit;a(),x(" ",e("license.validation_rules.max_length_error")," ")}}function Le(o,m){if(o&1){let e=v();n(0,"span",31),l(1),n(2,"button",32),y("click",function(){let i=f(e).$implicit,s=c(2);return h(s.removeReservedWord(i))}),n(3,"mat-icon",33),l(4,"close"),r()()()}if(o&2){let e=m.$implicit;a(),x(" ",e," ")}}function Re(o,m){if(o&1){let e=v();n(0,"div",2)(1,"div",3)(2,"div",4)(3,"div",5)(4,"mat-icon",6),l(5,"rule"),r()(),n(6,"div")(7,"h2",7),l(8),r(),n(9,"p",8),l(10,"Rules for subdomains"),r()()(),n(11,"div",9)(12,"div",10)(13,"label",11),l(14),r(),b(15,"input",12),r(),n(16,"div",10)(17,"div",13)(18,"label",11),l(19),r(),n(20,"span",14),l(21),r()(),b(22,"input",15),g(23,De,2,1,"span",16),r(),n(24,"div",10)(25,"label",11),l(26),r(),b(27,"input",17),r()(),n(28,"div",18)(29,"label",19),l(30),r(),n(31,"div",20),g(32,Le,5,1,"span",21),r(),n(33,"div",22)(34,"input",23,0),y("keyup.enter",function(){f(e);let i=oe(35);return c().addReservedWord(i.value),h(i.value="")}),r(),n(36,"button",24),y("click",function(){f(e);let i=oe(35);return c().addReservedWord(i.value),h(i.value="")}),n(37,"mat-icon",6),l(38,"add"),r()()()(),n(39,"div",25)(40,"div",26)(41,"mat-icon",27),l(42,"block"),r(),n(43,"div")(44,"h4",28),l(45),r(),n(46,"p",8),l(47),r()()(),b(48,"mat-slide-toggle",29),r()()()}if(o&2){let e,t=m.$implicit,i=c();a(),d("formGroup",i.formGroup),a(7),p(t("license.validation_rules.title")),a(6),p(t("license.validation_rules.min_length")),a(),d("placeholder",t("license.validation_rules.min_length_placeholder")),a(4),p(t("license.validation_rules.max_length")),a(2),p(t("license.validation_rules.max_length_hint")),a(),d("placeholder",t("license.validation_rules.max_length_placeholder")),a(),d("ngIf",(e=i.formGroup.get("maxLength"))==null?null:e.hasError("max")),a(3),p(t("license.validation_rules.hold_suffix")),a(),d("placeholder",t("license.validation_rules.hold_suffix_placeholder")),a(3),p(t("license.validation_rules.reserved_words")),a(2),d("ngForOf",i.reservedWords),a(2),d("placeholder",t("license.validation_rules.add_reserved_word")),a(11),p(t("license.validation_rules.content_filter")),a(2),p(t("license.validation_rules.content_filter_description")),a(),d("color","warn")}}var Me=(()=>{class o{constructor(){this.reservedWords=[]}static{this.\u0275fac=function(t){return new(t||o)}}static{this.\u0275cmp=C({type:o,selectors:[["zns-validation-rules"]],inputs:{formGroup:"formGroup",reservedWords:"reservedWords",addReservedWord:"addReservedWord",removeReservedWord:"removeReservedWord"},decls:1,vars:0,consts:[["newReservedWord",""],["class","bg-white dark:bg-slate-800 rounded-3xl shadow-xl overflow-hidden mb-8 border border-gray-100 dark:border-gray-700/50",4,"transloco"],[1,"bg-white","dark:bg-slate-800","rounded-3xl","shadow-xl","overflow-hidden","mb-8","border","border-gray-100","dark:border-gray-700/50"],[1,"p-8","sm:p-10",3,"formGroup"],[1,"flex","items-center","gap-3","mb-6"],[1,"w-10","h-10","rounded-full","bg-orange-100","dark:bg-orange-900/30","flex","items-center","justify-center","text-orange-600","dark:text-orange-400"],[1,"icon-size-5"],[1,"text-xl","font-bold","text-gray-900","dark:text-white"],[1,"text-sm","text-gray-500","dark:text-gray-400"],[1,"grid","grid-cols-1","md:grid-cols-3","gap-6","mb-8"],[1,"space-y-1.5"],[1,"text-sm","font-semibold","text-gray-700","dark:text-gray-300","ml-1"],["formControlName","minLength","type","number",1,"w-full","bg-gray-50","dark:bg-gray-900/50","text-gray-900","dark:text-white","border","border-gray-200","dark:border-gray-700","rounded-xl","px-4","py-3","focus:outline-none","focus:ring-2","focus:ring-orange-500","transition-all","font-medium",3,"placeholder"],[1,"flex","justify-between"],[1,"text-xs","text-gray-400"],["formControlName","maxLength","type","number","min","1","max","27",1,"w-full","bg-gray-50","dark:bg-gray-900/50","text-gray-900","dark:text-white","border","border-gray-200","dark:border-gray-700","rounded-xl","px-4","py-3","focus:outline-none","focus:ring-2","focus:ring-orange-500","transition-all","font-medium",3,"placeholder"],["class","text-xs text-red-500 pl-1 block mb-1",4,"ngIf"],["formControlName","holdSuffix",1,"w-full","bg-gray-50","dark:bg-gray-900/50","text-gray-900","dark:text-white","border","border-gray-200","dark:border-gray-700","rounded-xl","px-4","py-3","focus:outline-none","focus:ring-2","focus:ring-orange-500","transition-all","font-medium",3,"placeholder"],[1,"mb-8"],[1,"block","text-sm","font-semibold","text-gray-700","dark:text-gray-300","mb-3","ml-1"],[1,"flex","flex-wrap","gap-2","mb-3"],["class","inline-flex items-center px-3 py-1.5 rounded-full text-sm font-medium bg-red-50 dark:bg-red-900/20 text-red-700 dark:text-red-300 border border-red-100 dark:border-red-800",4,"ngFor","ngForOf"],[1,"flex","items-center","gap-2","max-w-sm"],["type","text",1,"flex-1","bg-gray-50","dark:bg-gray-900/50","text-gray-900","dark:text-white","border","border-gray-200","dark:border-gray-700","rounded-xl","px-4","py-2.5","text-sm","focus:outline-none","focus:ring-2","focus:ring-red-500",3,"keyup.enter","placeholder"],["type","button",1,"p-2.5","bg-gray-100","dark:bg-gray-800","text-gray-600","dark:text-gray-300","rounded-xl","hover:bg-gray-200","dark:hover:bg-gray-700","transition-colors",3,"click"],[1,"flex","flex-col","sm:flex-row","sm:items-center","justify-between","p-5","bg-red-50/50","dark:bg-red-900/10","rounded-2xl","border","border-red-100","dark:border-red-800/30"],[1,"flex","items-center","gap-3","mb-2","sm:mb-0"],[1,"text-red-500","icon-size-5"],[1,"font-semibold","text-gray-900","dark:text-white"],["formControlName","contentFilterEnabled",3,"color"],[1,"text-xs","text-red-500","pl-1","block","mb-1"],[1,"inline-flex","items-center","px-3","py-1.5","rounded-full","text-sm","font-medium","bg-red-50","dark:bg-red-900/20","text-red-700","dark:text-red-300","border","border-red-100","dark:border-red-800"],["type","button",1,"ml-2","text-red-400","hover:text-red-600","transition-colors",3,"click"],[1,"icon-size-4"]],template:function(t,i){t&1&&g(0,Re,49,16,"div",1)},dependencies:[S,z,X,W,D,B,T,M,Se,Ce,V,L,F,E,R,K,I,N],encapsulation:2})}}return o})();function $e(o,m){if(o&1){let e=v();n(0,"div",9)(1,"div",10),y("click",function(){let i,s=f(e).$implicit,u=c();return(i=u.getNetworkGroup(s).get("enabled"))==null||i.setValue(!((i=u.getNetworkGroup(s).get("enabled"))!=null&&i.value)),h(u.toggleNetwork(s))}),n(2,"mat-checkbox",11),y("click",function(i){return f(e),h(i.stopPropagation())})("change",function(){let i=f(e).$implicit,s=c();return h(s.toggleNetwork(i))}),r(),n(3,"div",12)(4,"div",13),l(5),r(),n(6,"span",14),l(7),r()()()()}if(o&2){let e=m.$implicit,t=c();d("formGroupName",e),a(4),d("ngClass",t.getNetworkStyle(e).colorClass),a(),x(" ",t.getNetworkStyle(e).initials," "),a(2),p(t.getNetworkLabel(e))}}var Ve=(()=>{class o{get networkKeys(){return this.networksFormGroup?Object.keys(this.networksFormGroup.controls):[]}static{this.\u0275fac=function(t){return new(t||o)}}static{this.\u0275cmp=C({type:o,selectors:[["zns-blockchain-networks"]],inputs:{networksFormGroup:"networksFormGroup",getNetworkLabel:"getNetworkLabel",getNetworkStyle:"getNetworkStyle",getNetworkGroup:"getNetworkGroup",toggleNetwork:"toggleNetwork"},decls:13,vars:2,consts:[[1,"bg-white","dark:bg-slate-800","rounded-3xl","shadow-xl","overflow-hidden","mb-8","border","border-gray-100","dark:border-gray-700/50"],[1,"p-8","sm:p-10"],[1,"flex","items-center","gap-3","mb-6"],[1,"w-10","h-10","rounded-full","bg-blue-100","dark:bg-blue-900/30","flex","items-center","justify-center","text-blue-600","dark:text-blue-400"],[1,"icon-size-5"],[1,"text-xl","font-bold","text-gray-900","dark:text-white"],[1,"text-sm","text-gray-500","dark:text-gray-400"],[1,"grid","grid-cols-1","gap-4",3,"formGroup"],["class","bg-white dark:bg-gray-800/50 rounded-xl border border-gray-200 dark:border-gray-700 overflow-hidden",3,"formGroupName",4,"ngFor","ngForOf"],[1,"bg-white","dark:bg-gray-800/50","rounded-xl","border","border-gray-200","dark:border-gray-700","overflow-hidden",3,"formGroupName"],[1,"p-4","hover:bg-gray-50","dark:hover:bg-gray-900/20","transition-colors","flex","items-center","gap-3","cursor-pointer",3,"click"],["formControlName","enabled","color","primary",3,"click","change"],[1,"flex","items-center","gap-3"],[1,"w-8","h-8","rounded-full","flex","items-center","justify-center","text-xs","font-bold",3,"ngClass"],[1,"font-medium","text-gray-900","dark:text-white","select-none"]],template:function(t,i){t&1&&(n(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"mat-icon",4),l(5,"hub"),r()(),n(6,"div")(7,"h2",5),l(8,"Blockchain Networks"),r(),n(9,"p",6),l(10,"Supported license networks"),r()()(),n(11,"div",7),g(12,$e,8,4,"div",8),r()()()),t&2&&(a(11),d("formGroup",i.networksFormGroup),a(),d("ngForOf",i.networkKeys))},dependencies:[S,J,z,W,T,M,V,L,ve,F,E,ee,Fe],encapsulation:2})}}return o})();var se=()=>({standalone:!0});function Oe(o,m){if(o&1){let e=v();n(0,"div",40)(1,"span"),l(2),r(),n(3,"button",41),y("click",function(){let i=f(e).$implicit,s=c(4);return h(s.removeCurrency(i))}),n(4,"mat-icon",42),l(5,"close"),r()()()}if(o&2){let e=m.$implicit;d("ngClass",e.colorClass),a(2),p(e.code),a(),d("title","Remove "+e.code)}}function Ae(o,m){if(o&1&&(n(0,"div",38),g(1,Oe,6,3,"div",39),r()),o&2){let e=c(3);a(),d("ngForOf",e.enabledCurrencies)}}function Ye(o,m){if(o&1&&(n(0,"div",43),l(1),r()),o&2){let e=c(2).$implicit;a(),x(" ",e("license.payment_settings.no_currencies")," ")}}function Be(o,m){if(o&1){let e=v();n(0,"button",48),y("click",function(){let i=f(e).$implicit,s=c(4);return h(s.addCurrency(i))}),n(1,"mat-icon",49),l(2,"add"),r(),n(3,"span"),l(4),r()()}if(o&2){let e=m.$implicit;a(4),p(e.code)}}function je(o,m){if(o&1&&(n(0,"div",44)(1,"div",45),l(2),r(),n(3,"div",46),g(4,Be,5,1,"button",47),r()()),o&2){let e=c(2).$implicit,t=c();a(2),x(" ",e("license.payment_settings.add_currency")," "),a(2),d("ngForOf",t.availableCurrencies)}}function Ke(o,m){if(o&1&&(n(0,"div",50),l(1),r()),o&2){let e=c(2).$implicit;a(),x(" ",e("license.payment_settings.all_currencies_enabled")," ")}}function Ze(o,m){if(o&1&&(n(0,"div",32)(1,"div",33),l(2),r(),g(3,Ae,2,1,"div",34)(4,Ye,2,1,"div",35)(5,je,5,2,"div",36)(6,Ke,2,1,"div",37),r()),o&2){let e=c().$implicit,t=c();a(2),x(" ",e("license.payment_settings.supported_currencies")," "),a(),d("ngIf",t.enabledCurrencies.length>0),a(),d("ngIf",t.enabledCurrencies.length===0),a(),d("ngIf",t.availableCurrencies.length>0),a(),d("ngIf",t.availableCurrencies.length===0&&t.enabledCurrencies.length>0)}}function qe(o,m){if(o&1){let e=v();n(0,"div",51)(1,"div")(2,"div",52),l(3),r(),n(4,"div",53),l(5),r()(),n(6,"button",54),y("click",function(){let i=f(e).index,s=c(2);return h(s.removeWhitelistItem(i))}),n(7,"mat-icon",5),l(8,"delete"),r()()()}if(o&2){let e=m.$implicit,t=c(2);a(3),p(e.domain),a(2),ce("",e.discount," ",t.getWhitelistTypeLabel(e.type)," off")}}function Ue(o,m){if(o&1&&(n(0,"div",55),l(1),r()),o&2){let e=c().$implicit;a(),x(" ",e("license.payment_settings.no_whitelist")," ")}}function He(o,m){if(o&1){let e=v();n(0,"div",1)(1,"div",2)(2,"div",3)(3,"div",4)(4,"mat-icon",5),l(5,"payment"),r()(),n(6,"div")(7,"h2",6),l(8),r(),n(9,"p",7),l(10,"Methods and whitelisting"),r()()(),n(11,"div",8)(12,"div")(13,"h3",9),l(14),r(),n(15,"div",10)(16,"div",11)(17,"span",12),l(18,"Coinbase"),r(),b(19,"mat-slide-toggle",13),r(),n(20,"div",14)(21,"div",15)(22,"span",12),l(23,"Crypto (Native)"),r(),b(24,"mat-slide-toggle",16),r(),g(25,Ze,7,5,"div",17),r(),n(26,"div",11)(27,"span",12),l(28,"Stripe"),r(),b(29,"mat-slide-toggle",18),r()()(),n(30,"div")(31,"h3",9),l(32),r(),n(33,"div",19)(34,"div",20),g(35,qe,9,3,"div",21)(36,Ue,2,1,"div",22),r(),n(37,"div",23)(38,"input",24),Y("ngModelChange",function(i){f(e);let s=c();return A(s.newWhitelistItem.domain,i)||(s.newWhitelistItem.domain=i),h(i)}),r(),n(39,"div",25)(40,"input",26),Y("ngModelChange",function(i){f(e);let s=c();return A(s.newWhitelistItem.discount,i)||(s.newWhitelistItem.discount=i),h(i)}),r(),n(41,"select",27),Y("ngModelChange",function(i){f(e);let s=c();return A(s.newWhitelistItem.type,i)||(s.newWhitelistItem.type=i),h(i)}),n(42,"option",28),l(43,"%"),r(),n(44,"option",29),l(45,"$"),r()()()(),n(46,"button",30),y("click",function(){f(e);let i=c();return h(i.addWhitelistItem())}),n(47,"mat-icon",31),l(48,"add"),r(),l(49),r()()()()()()}if(o&2){let e,t=m.$implicit,i=c();a(),d("formGroup",i.formGroup),a(7),p(t("license.payment_settings.title")),a(6),p(t("license.payment_settings.accepted_methods")),a(11),d("ngIf",(e=i.formGroup.get("cryptoEnabled"))==null?null:e.value),a(7),p(t("license.payment_settings.whitelist")),a(3),d("ngForOf",i.whitelistItems),a(),d("ngIf",i.whitelistItems.length===0),a(2),O("ngModel",i.newWhitelistItem.domain),d("ngModelOptions",P(15,se))("placeholder",t("license.payment_settings.domain_placeholder")),a(2),O("ngModel",i.newWhitelistItem.discount),d("ngModelOptions",P(16,se)),a(),O("ngModel",i.newWhitelistItem.type),d("ngModelOptions",P(17,se)),a(8),x(" ",t("license.payment_settings.add_to_whitelist")," ")}}var We=(()=>{class o{constructor(){this.currencyToggled=new H,this.networkLabels={ethereum:"Ethereum",solana:"Solana",bitcoin:"Bitcoin",blockdag:"BlockDAG",avalanche:"Avalanche",binance:"BSC",polygon:"Polygon",sui:"Sui"},this.networkColors={ethereum:"bg-indigo-100 text-indigo-600 dark:bg-indigo-900/30 dark:text-indigo-300",solana:"bg-purple-100 text-purple-600 dark:bg-purple-900/30 dark:text-purple-300",bitcoin:"bg-orange-100 text-orange-600 dark:bg-orange-900/30 dark:text-orange-300",blockdag:"bg-blue-100 text-blue-600 dark:bg-blue-900/30 dark:text-blue-300",avalanche:"bg-red-100 text-red-600 dark:bg-red-900/30 dark:text-red-300",binance:"bg-yellow-100 text-yellow-600 dark:bg-yellow-900/30 dark:text-yellow-300",polygon:"bg-violet-100 text-violet-600 dark:bg-violet-900/30 dark:text-violet-300",sui:"bg-cyan-100 text-cyan-600 dark:bg-cyan-900/30 dark:text-cyan-300"}}get enabledCurrencies(){if(!this.networksFormGroup)return[];let e=[],t=this.networksFormGroup.controls;return Object.keys(t).forEach(i=>{let s=t[i];if(s.get("enabled")?.value&&s.get("nativeCurrency.enabled")?.value){let u=s.get("nativeCurrency.code")?.value;u&&e.push({code:u,networkKey:i,label:this.networkLabels[i]||i,colorClass:this.networkColors[i]||"bg-gray-100 text-gray-600"})}}),e}get availableCurrencies(){if(!this.networksFormGroup)return[];let e=[],t=this.networksFormGroup.controls;return Object.keys(t).forEach(i=>{let s=t[i],u=s.get("enabled")?.value,w=s.get("nativeCurrency.enabled")?.value,_=s.get("nativeCurrency.code")?.value;(!u||!w)&&_&&e.push({code:_,networkKey:i,label:this.networkLabels[i]||i,colorClass:this.networkColors[i]||"bg-gray-100 text-gray-600"})}),e}removeCurrency(e){if(!this.networksFormGroup)return;let t=this.networksFormGroup.get(e.networkKey);t&&(t.get("nativeCurrency")?.get("enabled")?.setValue(!1),t.get("altCoins")?.get("enabled")?.value||t.get("enabled")?.setValue(!1),this.currencyToggled.emit({networkKey:e.networkKey,enabled:!1}))}addCurrency(e){if(!this.networksFormGroup)return;let t=this.networksFormGroup.get(e.networkKey);t&&(t.get("enabled")?.setValue(!0),t.get("nativeCurrency")?.get("enabled")?.setValue(!0),this.currencyToggled.emit({networkKey:e.networkKey,enabled:!0}))}static{this.\u0275fac=function(t){return new(t||o)}}static{this.\u0275cmp=C({type:o,selectors:[["zns-payment-configuration"]],inputs:{formGroup:"formGroup",whitelistItems:"whitelistItems",removeWhitelistItem:"removeWhitelistItem",addWhitelistItem:"addWhitelistItem",newWhitelistItem:"newWhitelistItem",getWhitelistTypeLabel:"getWhitelistTypeLabel",networksFormGroup:"networksFormGroup"},outputs:{currencyToggled:"currencyToggled"},decls:1,vars:0,consts:[["class","bg-white dark:bg-slate-800 rounded-3xl shadow-xl overflow-hidden mb-8 border border-gray-100 dark:border-gray-700/50",4,"transloco"],[1,"bg-white","dark:bg-slate-800","rounded-3xl","shadow-xl","overflow-hidden","mb-8","border","border-gray-100","dark:border-gray-700/50"],[1,"p-8","sm:p-10",3,"formGroup"],[1,"flex","items-center","gap-3","mb-6"],[1,"w-10","h-10","rounded-full","bg-green-100","dark:bg-green-900/30","flex","items-center","justify-center","text-green-600","dark:text-green-400"],[1,"icon-size-5"],[1,"text-xl","font-bold","text-gray-900","dark:text-white"],[1,"text-sm","text-gray-500","dark:text-gray-400"],[1,"grid","grid-cols-1","md:grid-cols-2","gap-8","mb-8"],[1,"font-semibold","text-gray-900","dark:text-white","mb-4"],[1,"space-y-3"],[1,"flex","items-center","justify-between","p-4","bg-gray-50","dark:bg-gray-900/50","rounded-xl","border","border-gray-200","dark:border-gray-700"],[1,"font-medium","text-gray-700","dark:text-gray-300"],["formControlName","coinbaseEnabled","color","primary"],[1,"flex","flex-col","p-4","bg-gray-50","dark:bg-gray-900/50","rounded-xl","border","border-gray-200","dark:border-gray-700"],[1,"flex","items-center","justify-between","w-full"],["formControlName","cryptoEnabled","color","primary"],["class","mt-3 pt-3 border-t border-gray-200 dark:border-gray-700",4,"ngIf"],["formControlName","stripeEnabled","color","primary"],[1,"bg-gray-50","dark:bg-gray-900/50","rounded-xl","border","border-gray-200","dark:border-gray-700","p-4"],[1,"space-y-3","max-h-48","overflow-y-auto","mb-4","pr-2"],["class","flex items-center justify-between bg-white dark:bg-gray-800 p-3 rounded-lg shadow-sm",4,"ngFor","ngForOf"],["class","text-center py-6 text-gray-500 text-sm",4,"ngIf"],[1,"grid","grid-cols-2","gap-2","mb-2"],["type","text",1,"w-full","bg-white","dark:bg-gray-800","border","border-gray-200","dark:border-gray-700","rounded-lg","px-3","py-2","text-sm","focus:outline-none","focus:ring-2","focus:ring-green-500",3,"ngModelChange","ngModel","ngModelOptions","placeholder"],[1,"flex","gap-2"],["type","number","placeholder","Val",1,"w-full","bg-white","dark:bg-gray-800","border","border-gray-200","dark:border-gray-700","rounded-lg","px-3","py-2","text-sm","focus:outline-none","focus:ring-2","focus:ring-green-500",3,"ngModelChange","ngModel","ngModelOptions"],[1,"bg-white","dark:bg-gray-800","border","border-gray-200","dark:border-gray-700","rounded-lg","px-1","py-2","text-sm","focus:outline-none","focus:ring-2","focus:ring-green-500",3,"ngModelChange","ngModel","ngModelOptions"],["value","percentage"],["value","amount"],["type","button",1,"w-full","bg-green-500","hover:bg-green-600","text-white","font-medium","py-2","rounded-lg","transition-colors","flex","items-center","justify-center","gap-2",3,"click"],[1,"icon-size-4"],[1,"mt-3","pt-3","border-t","border-gray-200","dark:border-gray-700"],[1,"text-xs","font-semibold","text-gray-500","mb-2","uppercase","tracking-wide"],["class","flex flex-wrap gap-2 mb-3",4,"ngIf"],["class","text-sm text-gray-500 dark:text-gray-400 py-2 mb-2 italic",4,"ngIf"],["class","mt-2",4,"ngIf"],["class","mt-2 text-[10px] text-green-600/70 italic text-right",4,"ngIf"],[1,"flex","flex-wrap","gap-2","mb-3"],["class","group flex items-center gap-1.5 px-3 py-1.5 rounded-lg text-xs font-bold border shadow-sm transition-all hover:shadow-md cursor-default",3,"ngClass",4,"ngFor","ngForOf"],[1,"group","flex","items-center","gap-1.5","px-3","py-1.5","rounded-lg","text-xs","font-bold","border","shadow-sm","transition-all","hover:shadow-md","cursor-default",3,"ngClass"],["type","button",1,"opacity-60","hover:opacity-100","transition-opacity","p-0.5","rounded-full","hover:bg-black/10","dark:hover:bg-white/10",3,"click","title"],[1,"icon-size-3"],[1,"text-sm","text-gray-500","dark:text-gray-400","py-2","mb-2","italic"],[1,"mt-2"],[1,"text-[10px]","font-semibold","text-gray-400","mb-2","uppercase","tracking-wide"],[1,"flex","flex-wrap","gap-2"],["type","button","class","flex items-center gap-1.5 px-3 py-1.5 rounded-lg text-xs font-medium border border-dashed border-gray-300 dark:border-gray-600 text-gray-500 dark:text-gray-400 hover:border-gray-400 dark:hover:border-gray-500 hover:text-gray-700 dark:hover:text-gray-200 bg-gray-50/50 dark:bg-gray-800/50 transition-all hover:shadow-sm",3,"click",4,"ngFor","ngForOf"],["type","button",1,"flex","items-center","gap-1.5","px-3","py-1.5","rounded-lg","text-xs","font-medium","border","border-dashed","border-gray-300","dark:border-gray-600","text-gray-500","dark:text-gray-400","hover:border-gray-400","dark:hover:border-gray-500","hover:text-gray-700","dark:hover:text-gray-200","bg-gray-50/50","dark:bg-gray-800/50","transition-all","hover:shadow-sm",3,"click"],[1,"icon-size-3","text-green-500"],[1,"mt-2","text-[10px]","text-green-600/70","italic","text-right"],[1,"flex","items-center","justify-between","bg-white","dark:bg-gray-800","p-3","rounded-lg","shadow-sm"],[1,"font-bold","text-gray-900","dark:text-white"],[1,"text-xs","text-gray-500"],["type","button",1,"text-red-500","hover:text-red-700","transition-colors",3,"click"],[1,"text-center","py-6","text-gray-500","text-sm"]],template:function(t,i){t&1&&g(0,He,50,18,"div",0)},dependencies:[S,J,z,X,W,_e,ke,D,B,we,T,M,V,L,j,Q,F,E,R,K,I,N],encapsulation:2})}}return o})();var Je=()=>["one","two","three","four","five"],Xe=()=>["oneYear","twoYears","threeYears","fourYears","fiveYears","lifetime"],Qe=()=>({standalone:!0});function et(o,m){if(o&1&&(n(0,"th",16),l(1),me(2,"slice"),r()),o&2){let e=m.$implicit,t=c().$implicit;a(),x(" ",pe(2,1,t("license.pricing_table."+e+"_years"),0,1)," Year ")}}function tt(o,m){if(o&1){let e=v();n(0,"td",21)(1,"input",22),Y("ngModelChange",function(i){let s=f(e).$implicit,u=c().$implicit;return A(u[s],i)||(u[s]=i),h(i)}),r()()}if(o&2){let e=m.$implicit,t=c().$implicit;a(),O("ngModel",t[e]),d("ngModelOptions",P(2,Qe))}}function it(o,m){if(o&1&&(n(0,"tr")(1,"td",19),l(2),r(),g(3,tt,2,3,"td",20),r()),o&2){let e=m.$implicit;a(2),x(" ",e.length," "),a(),d("ngForOf",P(2,Xe))}}function rt(o,m){if(o&1){let e=v();n(0,"div",1)(1,"div",2)(2,"div",3)(3,"div",4)(4,"div",5)(5,"mat-icon",6),l(6,"table_chart"),r()(),n(7,"div")(8,"h2",7),l(9),r(),n(10,"p",8),l(11,"Pricing structure"),r()()(),n(12,"button",9),y("click",function(){f(e);let i=c();return h(i.resetDefault.emit())}),n(13,"mat-icon",10),l(14,"refresh"),r(),l(15),r()(),n(16,"div",11)(17,"table",12)(18,"thead",13)(19,"tr")(20,"th",14),l(21),r(),g(22,et,3,5,"th",15),n(23,"th",16),l(24,"Life"),r()()(),n(25,"tbody",17),g(26,it,4,3,"tr",18),r()()()()()}if(o&2){let e=m.$implicit,t=c();a(9),p(e("license.pricing_table.title")),a(6),x(" ",e("license.pricing_table.reset_default")," "),a(6),x(" ",e("license.pricing_table.length")," "),a(),d("ngForOf",P(5,Je)),a(4),d("ngForOf",t.rows)}}var Ge=(()=>{class o{constructor(){this.rows=[],this.resetDefault=new H}static{this.\u0275fac=function(t){return new(t||o)}}static{this.\u0275cmp=C({type:o,selectors:[["zns-pricing-table"]],inputs:{rows:"rows"},outputs:{resetDefault:"resetDefault"},decls:1,vars:0,consts:[["class","bg-white dark:bg-slate-800 rounded-3xl shadow-xl overflow-hidden mb-8 border border-gray-100 dark:border-gray-700/50",4,"transloco"],[1,"bg-white","dark:bg-slate-800","rounded-3xl","shadow-xl","overflow-hidden","mb-8","border","border-gray-100","dark:border-gray-700/50"],[1,"p-8","sm:p-10"],[1,"flex","items-center","justify-between","mb-6"],[1,"flex","items-center","gap-3"],[1,"w-10","h-10","rounded-full","bg-purple-100","dark:bg-purple-900/30","flex","items-center","justify-center","text-purple-600","dark:text-purple-400"],[1,"icon-size-5"],[1,"text-xl","font-bold","text-gray-900","dark:text-white"],[1,"text-sm","text-gray-500","dark:text-gray-400"],["type","button",1,"text-xs","font-semibold","text-gray-600","bg-gray-100","hover:bg-gray-200","px-3","py-1.5","rounded-lg","transition-colors","flex","items-center","gap-1",3,"click"],[1,"icon-size-4"],[1,"overflow-x-auto","rounded-xl","border","border-gray-200","dark:border-gray-700"],[1,"min-w-full","divide-y","divide-gray-200","dark:divide-gray-700"],[1,"bg-gray-50","dark:bg-gray-900/50"],[1,"px-4","py-3","text-left","text-xs","font-semibold","text-gray-500","uppercase","tracking-wider","sticky","left-0","bg-gray-50","dark:bg-gray-900/50","z-10"],["class","px-4 py-3 text-center text-xs font-semibold text-gray-500 uppercase tracking-wider",4,"ngFor","ngForOf"],[1,"px-4","py-3","text-center","text-xs","font-semibold","text-gray-500","uppercase","tracking-wider"],[1,"bg-white","dark:bg-gray-800","divide-y","divide-gray-200","dark:divide-gray-700"],[4,"ngFor","ngForOf"],[1,"px-4","py-3","text-sm","font-bold","text-gray-900","dark:text-white","bg-gray-50/50","dark:bg-gray-900/20","sticky","left-0","z-10"],["class","px-2 py-2 text-center",4,"ngFor","ngForOf"],[1,"px-2","py-2","text-center"],["type","number",1,"w-16","px-1.5","py-1","text-sm","text-center","border","border-gray-300","dark:border-gray-600","rounded-md","bg-transparent","focus:ring-1","focus:ring-purple-500","outline-none",3,"ngModelChange","ngModel","ngModelOptions"]],template:function(t,i){t&1&&g(0,rt,27,6,"div",0)},dependencies:[S,z,ge,j,D,B,T,Q,F,E,I,N],encapsulation:2})}}return o})();function nt(o,m){if(o&1&&(n(0,"div",1)(1,"div",2)(2,"div",3)(3,"div",4)(4,"mat-icon",5),l(5,"storage"),r()(),n(6,"div")(7,"h2",6),l(8),r(),n(9,"p",7),l(10,"Decentralized storage"),r()()(),n(11,"div",8)(12,"div",9)(13,"div",10)(14,"div",11)(15,"div",12)(16,"mat-icon",13),l(17,"cloud"),r(),n(18,"span",14),l(19),r()(),b(20,"mat-slide-toggle",15),r(),n(21,"p",16),l(22),r()(),n(23,"div",10)(24,"div",11)(25,"div",12)(26,"mat-icon",17),l(27,"archive"),r(),n(28,"span",14),l(29,"Arweave"),r()(),b(30,"mat-slide-toggle",15),r(),n(31,"p",16),l(32),r()(),n(33,"div",10)(34,"div",11)(35,"div",12)(36,"mat-icon",18),l(37,"pets"),r(),n(38,"span",14),l(39,"Walrus"),r()(),b(40,"mat-slide-toggle",15),r(),n(41,"p",16),l(42),r()()(),n(43,"div",19)(44,"label",20),l(45),r(),b(46,"input",21),r()()()()),o&2){let e=m.$implicit,t=c();a(),d("formGroup",t.formGroup),a(7),p(e(t.titleKey)),a(11),p(e("license.storage_options.ipfs_title")),a(),d("formControlName",t.ipfsControlName),a(2),p(e("license.storage_options.ipfs_description")),a(8),d("formControlName",t.arweaveControlName),a(2),p(e("license.storage_options.arweave_description")),a(8),d("formControlName",t.walrusControlName),a(2),p(e("license.storage_options.walrus_description")),a(3),p(e("license.storage_options.key_prefix")),a(),d("formControlName",t.keyPrefixControlName)("placeholder",e("license.storage_options.key_prefix_placeholder"))}}var Pe=(()=>{class o{constructor(){this.titleKey="license.storage_options.title",this.ipfsControlName="ipfsEnabled",this.arweaveControlName="arweaveEnabled",this.walrusControlName="walrusEnabled",this.keyPrefixControlName="keyPrefix"}static{this.\u0275fac=function(t){return new(t||o)}}static{this.\u0275cmp=C({type:o,selectors:[["zns-storage-options"]],inputs:{formGroup:"formGroup",titleKey:"titleKey",ipfsControlName:"ipfsControlName",arweaveControlName:"arweaveControlName",walrusControlName:"walrusControlName",keyPrefixControlName:"keyPrefixControlName"},decls:1,vars:0,consts:[["class","bg-white dark:bg-slate-800 rounded-3xl shadow-xl overflow-hidden mb-8 border border-gray-100 dark:border-gray-700/50",4,"transloco"],[1,"bg-white","dark:bg-slate-800","rounded-3xl","shadow-xl","overflow-hidden","mb-8","border","border-gray-100","dark:border-gray-700/50"],[1,"p-8","sm:p-10",3,"formGroup"],[1,"flex","items-center","gap-3","mb-6"],[1,"w-10","h-10","rounded-full","bg-indigo-100","dark:bg-indigo-900/30","flex","items-center","justify-center","text-indigo-600","dark:text-indigo-400"],[1,"icon-size-5"],[1,"text-xl","font-bold","text-gray-900","dark:text-white"],[1,"text-sm","text-gray-500","dark:text-gray-400"],[1,"space-y-6"],[1,"grid","grid-cols-1","md:grid-cols-3","gap-4"],[1,"p-4","rounded-xl","border","border-gray-200","dark:border-gray-700","hover:bg-gray-50","dark:hover:bg-gray-900/20","transition-colors"],[1,"flex","items-center","justify-between","mb-2"],[1,"flex","items-center","gap-2"],[1,"icon-size-5","text-blue-500"],[1,"font-medium","text-gray-900","dark:text-white"],[3,"formControlName"],[1,"text-xs","text-gray-500"],[1,"icon-size-5","text-green-500"],[1,"icon-size-5","text-orange-500"],[1,"space-y-1.5","max-w-md"],[1,"text-sm","font-semibold","text-gray-700","dark:text-gray-300","ml-1"],[1,"w-full","bg-gray-50","dark:bg-gray-900/50","text-gray-900","dark:text-white","border","border-gray-200","dark:border-gray-700","rounded-xl","px-4","py-3","focus:outline-none","focus:ring-2","focus:ring-indigo-500","transition-all","font-medium",3,"formControlName","placeholder"]],template:function(t,i){t&1&&g(0,nt,47,12,"div",0)},dependencies:[S,W,D,T,M,V,L,F,E,R,K,I,N],encapsulation:2})}}return o})();function ot(o,m){if(o&1&&(n(0,"div",3)(1,"div",25)(2,"div",22)(3,"div",26)(4,"mat-icon",27),l(5),r()(),n(6,"span",28),l(7),r()()()()),o&2){let e=c(2);a(),re(e.alertType==="success"?"bg-green-50 border-green-200 text-green-800 dark:bg-green-900/20 dark:border-green-800 dark:text-green-300":"bg-red-50 border-red-200 text-red-800 dark:bg-red-900/20 dark:border-red-800 dark:text-red-300"),a(2),re(e.alertType==="success"?"bg-green-100 text-green-600 dark:bg-green-800 dark:text-green-200":"bg-red-100 text-red-600 dark:bg-red-800 dark:text-red-200"),a(2),p(e.alertType==="success"?"check":"priority_high"),a(2),p(e.alertMessage)}}function at(o,m){if(o&1&&(n(0,"mat-icon",29),l(1,"refresh"),r(),n(2,"span"),l(3),r()),o&2){let e=c().$implicit;a(3),p(e("license.actions.processing"))}}function lt(o,m){if(o&1&&(n(0,"span"),l(1),r()),o&2){let e=c().$implicit;a(),p(e("license.actions.save_configuration"))}}function st(o,m){if(o&1){let e=v();n(0,"div",1)(1,"div",2),g(2,ot,8,6,"div",3),n(3,"form",4)(4,"div",5)(5,"h2",6),l(6,"Zelf Name Service"),r(),n(7,"div",7),l(8,"Manage your Zelf Name Service network settings and license details"),r()(),n(9,"div",8)(10,"mat-icon",9),l(11,"info"),r(),n(12,"div",10)(13,"h3",11),l(14,"Field Restrictions"),r(),n(15,"div",12)(16,"p")(17,"span",13),l(18,"Editable:"),r(),l(19," Domain name, rules, payments, pricing, storage, metadata"),r(),n(20,"p")(21,"span",13),l(22,"Read-only:"),r(),l(23," Dates, status, limits, Stripe data"),r(),n(24,"p")(25,"span",13),l(26,"Currencies:"),r(),l(27," BTC, ETH, SOL, USDC, USDT, BDAG, AVAX, ZNS"),r()()()(),b(28,"zns-validation-rules",14)(29,"zns-blockchain-networks",15)(30,"zns-payment-configuration",16),n(31,"zns-pricing-table",17),y("resetDefault",function(){f(e);let i=c();return h(i.resetPricingTable())}),r(),b(32,"zns-storage-options",4)(33,"zns-storage-options",18),n(34,"div",19)(35,"div",20)(36,"button",21),y("click",function(){f(e);let i=c();return h(i.cancel())}),l(37),r(),n(38,"div",22)(39,"button",23),y("click",function(){f(e);let i=c();return h(i.saveLicense())}),g(40,at,4,1)(41,lt,2,1,"span"),r()()()(),b(42,"div",24),r()()()}if(o&2){let e=m.$implicit,t=c();a(2),ne(t.showAlert?2:-1),a(),d("formGroup",t.accountForm),a(25),d("formGroup",t.accountForm)("reservedWords",t.reservedWords)("addReservedWord",t.addReservedWord.bind(t))("removeReservedWord",t.removeReservedWord.bind(t)),a(),d("networksFormGroup",t.walletNetworksFormGroup)("getNetworkLabel",t.getNetworkLabel.bind(t))("getNetworkStyle",t.getNetworkStyle.bind(t))("getNetworkGroup",t.getWalletNetworkGroup.bind(t))("toggleNetwork",t.toggleWalletNetwork.bind(t)),a(),d("formGroup",t.accountForm)("whitelistItems",t.whitelistItems)("removeWhitelistItem",t.removeWhitelistItem.bind(t))("addWhitelistItem",t.addWhitelistItem.bind(t))("newWhitelistItem",t.newWhitelistItem)("getWhitelistTypeLabel",t.getWhitelistTypeLabel.bind(t))("networksFormGroup",t.networksFormGroup),a(),d("rows",t.pricingTableRows),a(),d("formGroup",t.accountForm),a(),d("formGroup",t.accountForm),a(3),d("disabled",t.isLoading),a(),x(" ",e("license.actions.cancel")," "),a(2),d("disabled",t.isLoading||t.accountForm.invalid),a(),ne(t.isLoading?40:41)}}var si=(()=>{class o{constructor(e,t,i,s,u,w,_,ze){this._formBuilder=e,this._router=t,this._activatedRoute=i,this._saveConfirmationService=s,this._translocoService=u,this._cdr=w,this._licenseService=_,this._httpWrapper=ze,this.alertMessage="",this.alertType="success",this.currentLicense=null,this.isLoading=!1,this.pricingTableRows=[],this.reservedWords=["www","api","admin","support","help"],this.showAlert=!1,this.whitelistItems=[],this.newWhitelistItem={domain:"",discount:"",type:"percentage"},this.zelfkeysPlans=[],this.inappropriateWords=["dick","vagina","porn","sex","fuck","shit","bitch","ass","damn","hell","crap","piss","bastard","whore","slut","fag","nigger","retard","idiot","stupid","moron","dumb","hate","kill","die","death","murder","suicide"]}get networksFormGroup(){return this.accountForm.get("networks")}get walletNetworksFormGroup(){return this.accountForm.get("walletNetworks")}ngOnInit(){this.initializeWhitelistItems(),this.initializePricingTable(),this.createEmptyForm()}ngAfterViewInit(){this.loadLicense().then(()=>{this.populateFormFromLicense()})}createEmptyForm(){this.accountForm=this._formBuilder.group({domain:["",[k.required,k.pattern(/^[a-zA-Z0-9][a-zA-Z0-9-]*[a-zA-Z0-9]$/)]],status:[{value:"active",disabled:!0}],owner:["zelf-team",k.required],description:["Official Zelf domain",k.required],znsEnabled:[!0],zelfkeysEnabled:[!0],minLength:[3,[k.required,k.min(1)]],maxLength:[27,[k.required,k.min(1),k.max(27)]],holdSuffix:[".hold",k.required],contentFilterEnabled:[!0],ipfsEnabled:[!0],arweaveEnabled:[!0],walrusEnabled:[!0],keyPrefix:["tagName",k.required],zelfkeysIpfsEnabled:[!0],zelfkeysArweaveEnabled:[!0],zelfkeysWalrusEnabled:[!0],zelfkeysKeyPrefix:["tagName",k.required],coinbaseEnabled:[!0],cryptoEnabled:[!0],stripeEnabled:[!0],networks:this.createNetworksFormGroup(),walletNetworks:this.createNetworksFormGroup(null,!0),startDate:[{value:"",disabled:!0}],endDate:[{value:"",disabled:!0}],launchDate:["2023-01-01"],version:["1.0.0",k.required],documentation:["https://docs.zelf.world"],community:[""],enterprise:[""],support:["standard"]}),this.addWhitelistFormControls()}get networkKeys(){return this.networksFormGroup?Object.keys(this.networksFormGroup.controls):[]}getNetworkGroup(e){return this.networksFormGroup.get(e)}getNetworkLabel(e){return{ethereum:"Ethereum",solana:"Solana",bitcoin:"Bitcoin",blockdag:"BlockDAG",avalanche:"Avalanche",binance:"BSC",polygon:"Polygon",sui:"Sui"}[e]||e}getNetworkStyle(e){return{ethereum:{colorClass:"text-indigo-600 bg-indigo-100 dark:bg-indigo-900/30 dark:text-indigo-300",initials:"ETH"},solana:{colorClass:"text-purple-600 bg-purple-100 dark:bg-purple-900/30 dark:text-purple-300",initials:"SOL"},bitcoin:{colorClass:"text-orange-600 bg-orange-100 dark:bg-orange-900/30 dark:text-orange-300",initials:"BTC"},blockdag:{colorClass:"text-blue-600 bg-blue-100 dark:bg-blue-900/30 dark:text-blue-300",initials:"BDAG"},avalanche:{colorClass:"text-red-600 bg-red-100 dark:bg-red-900/30 dark:text-red-300",initials:"AVAX"},binance:{colorClass:"text-yellow-600 bg-yellow-100 dark:bg-yellow-900/30 dark:text-yellow-300",initials:"BSC"},polygon:{colorClass:"text-violet-600 bg-violet-100 dark:bg-violet-900/30 dark:text-violet-300",initials:"POL"},sui:{colorClass:"text-cyan-600 bg-cyan-100 dark:bg-cyan-900/30 dark:text-cyan-300",initials:"SUI"}}[e]||{colorClass:"text-gray-600 bg-gray-100",initials:e.substring(0,2).toUpperCase()}}toggleNetwork(e){let t=this.getNetworkGroup(e),i=t.get("enabled")?.value;t.get("nativeCurrency")?.get("enabled")?.setValue(i),t.get("altCoins")&&t.get("altCoins")?.get("enabled")?.setValue(i)}getWalletNetworkGroup(e){return this.walletNetworksFormGroup.get(e)}toggleWalletNetwork(e){let i=this.getWalletNetworkGroup(e).get("enabled")?.value}createNetworksFormGroup(e=null,t=!1){let i=this._formBuilder.group({}),s=ae.createEmpty("temp"),u=e||s.getNetworks();return Object.keys(u).forEach(w=>{let _=u[w];w.startsWith("other_")||(t?i.addControl(w,this._formBuilder.group({enabled:[_.enabled]})):i.addControl(w,this._formBuilder.group({enabled:[_.enabled],nativeCurrency:this._formBuilder.group({enabled:[_.nativeCurrency.enabled],code:[_.nativeCurrency.code]}),altCoins:_.altCoins?this._formBuilder.group({enabled:[_.altCoins.enabled],standard:[_.altCoins.standard],showAll:[!0],specificTokens:[[]]}):null})))}),i}initializeWhitelistItems(){this.whitelistItems=[{domain:"",discount:"",type:"percentage"}]}addWhitelistFormControls(){this.whitelistItems.forEach((e,t)=>{this.accountForm.get(`whitelistDomain_${t}`)||this.accountForm.addControl(`whitelistDomain_${t}`,new $(e.domain)),this.accountForm.get(`whitelistDiscount_${t}`)||this.accountForm.addControl(`whitelistDiscount_${t}`,new $(e.discount)),this.accountForm.get(`whitelistType_${t}`)||this.accountForm.addControl(`whitelistType_${t}`,new $(e.type))})}removeWhitelistFormControls(){this.whitelistItems.forEach((e,t)=>{this.accountForm.removeControl(`whitelistDomain_${t}`),this.accountForm.removeControl(`whitelistDiscount_${t}`),this.accountForm.removeControl(`whitelistType_${t}`)})}addReservedWord(e){e&&e.trim()&&!this.reservedWords.includes(e.trim())&&this.reservedWords.push(e.trim())}removeReservedWord(e){let t=this.reservedWords.indexOf(e);t>-1&&this.reservedWords.splice(t,1)}togglePaymentMethod(e){this.getPaymentMethods().includes(e)?e==="coinbase"?this.accountForm.get("coinbaseEnabled")?.setValue(!1):e==="crypto"?this.accountForm.get("cryptoEnabled")?.setValue(!1):e==="stripe"&&this.accountForm.get("stripeEnabled")?.setValue(!1):e==="coinbase"?this.accountForm.get("coinbaseEnabled")?.setValue(!0):e==="crypto"?this.accountForm.get("cryptoEnabled")?.setValue(!0):e==="stripe"&&this.accountForm.get("stripeEnabled")?.setValue(!0)}isPaymentMethodEnabled(e){return this.getPaymentMethods().includes(e)}getWhitelistTypeLabel(e){return e==="percentage"?"%":"$"}addWhitelistItem(){if(!this.newWhitelistItem.domain||!this.newWhitelistItem.discount)return;let e=de({},this.newWhitelistItem);this.whitelistItems.push(e),this.newWhitelistItem={domain:"",discount:"",type:"percentage"};let t=this.whitelistItems.length-1;this.accountForm.addControl(`whitelistDomain_${t}`,new $(e.domain)),this.accountForm.addControl(`whitelistDiscount_${t}`,new $(e.discount)),this.accountForm.addControl(`whitelistType_${t}`,new $(e.type))}removeWhitelistItem(e){this.whitelistItems.length>1&&(this.accountForm.removeControl(`whitelistDomain_${e}`),this.accountForm.removeControl(`whitelistDiscount_${e}`),this.accountForm.removeControl(`whitelistType_${e}`),this.whitelistItems.splice(e,1),this.removeWhitelistFormControls(),this.addWhitelistFormControls())}validateDomainName(e){if(!this.accountForm.get("contentFilterEnabled")?.value)return!0;let t=e.toLowerCase();return!this.inappropriateWords.some(i=>t.includes(i))}getPaymentMethods(){let e=[];return this.accountForm.get("coinbaseEnabled")?.value&&e.push("coinbase"),this.accountForm.get("cryptoEnabled")?.value&&e.push("crypto"),this.accountForm.get("stripeEnabled")?.value&&e.push("stripe"),e}getDefaultPricingTable(){return{1:{1:240,2:432,3:612,4:768,5:900,lifetime:3600},2:{1:120,2:216,3:306,4:384,5:450,lifetime:1800},3:{1:72,2:130,3:184,4:230,5:270,lifetime:1080},4:{1:36,2:65,3:92,4:115,5:135,lifetime:540},5:{1:30,2:54,3:76,4:96,5:112,lifetime:450},"6-15":{1:24,2:43,3:61,4:77,5:90,lifetime:360},16:{1:23,2:41,3:59,4:74,5:86,lifetime:345},17:{1:22,2:40,3:56,4:70,5:82,lifetime:330},18:{1:21,2:38,3:54,4:67,5:79,lifetime:315},19:{1:20,2:36,3:51,4:64,5:75,lifetime:300},20:{1:19,2:34,3:48,4:61,5:72,lifetime:285},21:{1:18,2:32,3:46,4:58,5:68,lifetime:270},22:{1:17,2:31,3:43,4:54,5:64,lifetime:255},23:{1:16,2:29,3:41,4:51,5:60,lifetime:240},24:{1:15,2:27,3:38,4:48,5:56,lifetime:225},25:{1:14,2:25,3:36,4:45,5:53,lifetime:210},26:{1:13,2:23,3:33,4:42,5:49,lifetime:195},27:{1:12,2:22,3:31,4:38,5:45,lifetime:180}}}cleanupInvalidData(){let e=this.getPaymentMethods(),t=e.filter(i=>["coinbase","crypto","stripe"].includes(i));t.length!==e.length&&(this.accountForm.get("coinbaseEnabled")?.setValue(t.includes("coinbase")),this.accountForm.get("cryptoEnabled")?.setValue(t.includes("crypto")),this.accountForm.get("stripeEnabled")?.setValue(t.includes("stripe")))}validateDataBeforeSend(){let e=[],i=this.getPaymentMethods().filter(s=>!["coinbase","crypto","stripe"].includes(s));return i.length>0&&e.push(`Invalid payment methods: ${i.join(", ")}. Allowed: coinbase, crypto, stripe`),{valid:e.length===0,errors:e}}buildDomainConfig(){let e=this.accountForm.value,t=this.validateDataBeforeSend();if(!t.valid)throw this.showError(`Validation failed: ${t.errors.join(", ")}`),new Error(`Validation failed: ${t.errors.join(", ")}`);let i=this.buildWhitelistFromForm();return{name:e.domain,holdSuffix:e.holdSuffix,status:this.accountForm.get("status")?.value||"active",owner:e.owner,description:e.description,tags:{minLength:e.minLength,maxLength:e.maxLength,allowedChars:/^[a-zA-Z0-9][a-zA-Z0-9-]*[a-zA-Z0-9]$/,reserved:this.reservedWords,customRules:[],payment:{methods:this.getPaymentMethods(),networks:e.networks,discounts:{yearly:.1,lifetime:.2},rewardPrice:10,whitelist:i,pricingTable:this.getPricingTableFromRows()},storage:{keyPrefix:e.keyPrefix,ipfsEnabled:e.ipfsEnabled,arweaveEnabled:e.arweaveEnabled,walrusEnabled:e.walrusEnabled},wallet:{networks:e.walletNetworks}},zelfkeys:{plans:this.zelfkeysPlans,payment:{whitelist:{},pricingTable:{}},storage:{keyPrefix:e.zelfkeysKeyPrefix,ipfsEnabled:e.zelfkeysIpfsEnabled,arweaveEnabled:e.zelfkeysArweaveEnabled,walrusEnabled:e.zelfkeysWalrusEnabled}},metadata:{launchDate:e.launchDate,version:e.version,documentation:e.documentation,community:e.community||void 0,enterprise:e.enterprise||void 0,support:e.support}}}fetchLicenseFromBackend(){return ie(this,null,function*(){try{this.isLoading=!0,this._cdr.detectChanges();let e=yield this._licenseService.getMyLicense(!0);if(!e||!e.data||!e.data.myLicense)return;this.currentLicense=ae.fromAPIResponseWithWrapper(e.data.myLicense.domainConfig),localStorage.setItem("license",JSON.stringify(this.currentLicense.toJSON()))}catch(e){console.error("Error fetching license from backend:",e),this.showAlert=!0,this.alertMessage="Failed to fetch license from server",this.alertType="error"}finally{this.isLoading=!1,this._cdr.detectChanges()}})}loadLicense(){return ie(this,null,function*(){this.currentLicense?.domain||(yield this.fetchLicenseFromBackend())})}populateFormFromLicense(){let e=this.currentLicense?.domainConfig;if(e){if(this.accountForm.get("domain")?.setValue(e.name||""),this.accountForm.get("status")?.setValue(e.status||"active"),this.accountForm.get("owner")?.setValue(e.owner||"zelf-team"),this.accountForm.get("description")?.setValue(e.description||"Official Zelf domain"),this.accountForm.get("znsEnabled")?.setValue(!0),this.accountForm.get("zelfkeysEnabled")?.setValue(!0),this.accountForm.get("minLength")?.setValue(e.tags?.minLength||3),this.accountForm.get("maxLength")?.setValue(e.tags?.maxLength||50),this.accountForm.get("holdSuffix")?.setValue(e.holdSuffix||".hold"),e.tags?.reserved&&(this.reservedWords=[...e.tags.reserved]),this.accountForm.get("ipfsEnabled")?.setValue(e.tags?.storage?.ipfsEnabled??!0),this.accountForm.get("arweaveEnabled")?.setValue(e.tags?.storage?.arweaveEnabled??!0),this.accountForm.get("walrusEnabled")?.setValue(e.tags?.storage?.walrusEnabled??!0),this.accountForm.get("keyPrefix")?.setValue(e.tags?.storage?.keyPrefix||"tagName"),this.accountForm.get("zelfkeysIpfsEnabled")?.setValue(e.zelfkeys?.storage?.ipfsEnabled??!0),this.accountForm.get("zelfkeysArweaveEnabled")?.setValue(e.zelfkeys?.storage?.arweaveEnabled??!0),this.accountForm.get("zelfkeysWalrusEnabled")?.setValue(e.zelfkeys?.storage?.walrusEnabled??!0),this.accountForm.get("zelfkeysKeyPrefix")?.setValue(e.zelfkeys?.storage?.keyPrefix||"tagName"),this.accountForm.get("coinbaseEnabled")?.setValue(e.tags?.payment?.methods?.includes("coinbase")??!0),this.accountForm.get("cryptoEnabled")?.setValue(e.tags?.payment?.methods?.includes("crypto")??!0),this.accountForm.get("stripeEnabled")?.setValue(e.tags?.payment?.methods?.includes("stripe")??!0),this.currentLicense){let t=this.currentLicense.getNetworks();this.accountForm.setControl("networks",this.createNetworksFormGroup(t));let i=e.tags?.wallet?.networks||e.wallet?.networks;this.accountForm.setControl("walletNetworks",this.createNetworksFormGroup(i,!0))}e.tags?.payment?.pricingTable&&this.loadPricingTableFromConfig(e.tags.payment.pricingTable),this.populateWhitelist(e),e.zelfkeys?.plans&&(this.zelfkeysPlans=[...e.zelfkeys.plans]),this.accountForm.get("launchDate")?.setValue(e.metadata?.launchDate||"2023-01-01"),this.accountForm.get("version")?.setValue(e.metadata?.version||"1.0.0"),this.accountForm.get("documentation")?.setValue(e.metadata?.documentation||"https://docs.zelf.world"),this.accountForm.get("community")?.setValue(e.metadata?.community||""),this.accountForm.get("enterprise")?.setValue(e.metadata?.enterprise||""),this.accountForm.get("support")?.setValue(e.metadata?.support||"standard")}this.cleanupInvalidData(),this._cdr.detectChanges()}populateWhitelist(e){e.tags?.payment?.whitelist&&(this.whitelistItems=Object.entries(e.tags.payment.whitelist).map(([t,i])=>{let s=i,u=s.match(/^(\d+(?:\.\d+)?)([%$])$/);if(u){let w=u[2],_=w==="%"?"percentage":w==="$"?"fixed":w;return{domain:t,discount:u[1],type:_}}return{domain:t,discount:s,type:"percentage"}})),this.whitelistItems.forEach((t,i)=>{this.accountForm.get(`whitelistDomain_${i}`)?.setValue(t.domain),this.accountForm.get(`whitelistDiscount_${i}`)?.setValue(t.discount),this.accountForm.get(`whitelistType_${i}`)?.setValue(t.type)})}saveLicense(){if(this.accountForm.invalid){this.showError("Please fill in all required fields correctly");return}let e=this.accountForm.get("domain")?.value,t=this.buildDomainConfig();this._saveConfirmationService.setSaveData({domain:t.name,domainConfig:t,redirectUrl:"/settings/zelf-name-service",operation:{title:this._translocoService.translate("saving_operations.license_configuration.title"),description:this._translocoService.translate("saving_operations.license_configuration.description"),action:this._translocoService.translate("saving_operations.license_configuration.action"),itemName:this._translocoService.translate("saving_operations.license_configuration.itemName")}}),this._router.navigate(["/save-confirmation"],{queryParams:{redirect:"/settings/zelf-name-service"}})}showSuccess(e){this.alertMessage=e,this.alertType="success",this.showAlert=!0,setTimeout(()=>{this.showAlert=!1},5e3)}showError(e){this.alertMessage=e,this.alertType="error",this.showAlert=!0,setTimeout(()=>{this.showAlert=!1},5e3)}cancel(){this.loadLicense()}buildWhitelistFromForm(){let e={};return this.whitelistItems.forEach(t=>{let i=t.domain?.trim(),s=t.discount?.toString().trim(),u=t.type?.trim();if(i&&s&&u){let w=u==="percentage"?"%":u==="fixed"?"$":u;e[i]=`${s}${w}`}}),e}initializePricingTable(){let e=this.getDefaultPricingTable();this.pricingTableRows=[];for(let i=1;i<=5;i++){let s=e[i]||{1:0,2:0,3:0,4:0,5:0,lifetime:0};this.pricingTableRows.push({length:i.toString(),oneYear:s[1],twoYears:s[2],threeYears:s[3],fourYears:s[4],fiveYears:s[5],lifetime:s.lifetime})}let t=e["6-15"]||{1:0,2:0,3:0,4:0,5:0,lifetime:0};this.pricingTableRows.push({length:"6-15",oneYear:t[1],twoYears:t[2],threeYears:t[3],fourYears:t[4],fiveYears:t[5],lifetime:t.lifetime});for(let i=16;i<=27;i++){let s=e[i]||{1:0,2:0,3:0,4:0,5:0,lifetime:0};this.pricingTableRows.push({length:i.toString(),oneYear:s[1],twoYears:s[2],threeYears:s[3],fourYears:s[4],fiveYears:s[5],lifetime:s.lifetime})}}resetPricingTable(){this.initializePricingTable()}getPricingTableFromRows(){let e={};return this.pricingTableRows.forEach(t=>{e[t.length]={1:t.oneYear,2:t.twoYears,3:t.threeYears,4:t.fourYears,5:t.fiveYears,lifetime:t.lifetime}}),e}loadPricingTableFromConfig(e){if(!e){this.initializePricingTable();return}this.pricingTableRows=[];for(let i=1;i<=5;i++){let s=e[i]||{1:0,2:0,3:0,4:0,5:0,lifetime:0};this.pricingTableRows.push({length:i.toString(),oneYear:s[1]||0,twoYears:s[2]||0,threeYears:s[3]||0,fourYears:s[4]||0,fiveYears:s[5]||0,lifetime:s.lifetime||0})}let t=e["6-15"]||{1:0,2:0,3:0,4:0,5:0,lifetime:0};this.pricingTableRows.push({length:"6-15",oneYear:t[1]||0,twoYears:t[2]||0,threeYears:t[3]||0,fourYears:t[4]||0,fiveYears:t[5]||0,lifetime:t.lifetime||0});for(let i=16;i<=27;i++){let s=e[i]||{1:0,2:0,3:0,4:0,5:0,lifetime:0};this.pricingTableRows.push({length:i.toString(),oneYear:s[1]||0,twoYears:s[2]||0,threeYears:s[3]||0,fourYears:s[4]||0,fiveYears:s[5]||0,lifetime:s.lifetime||0})}}static{this.\u0275fac=function(t){return new(t||o)(G(Ee),G(he),G(fe),G(Ne),G(xe),G(ue),G(Ie),G(be))}}static{this.\u0275cmp=C({type:o,selectors:[["settings-zelf-name-service"]],decls:1,vars:0,consts:[["class","flex flex-col min-h-screen bg-gray-50/50 dark:bg-gray-900 w-full",4,"transloco"],[1,"flex","flex-col","min-h-screen","bg-gray-50/50","dark:bg-gray-900","w-full"],[1,"flex-auto","px-4","py-8","sm:px-6","sm:py-12","md:px-8","w-full","max-w-4xl","mx-auto"],[1,"mb-6","animate-fade-in"],[3,"formGroup"],[1,"mb-8"],[1,"text-3xl","font-bold","tracking-tight","text-gray-900","dark:text-white"],[1,"text-secondary","text-lg","mt-1"],[1,"mb-8","p-4","bg-blue-50/50","dark:bg-blue-900/10","border","border-blue-100","dark:border-blue-800/30","rounded-2xl","flex","items-start","gap-4"],[1,"icon-size-5","text-blue-600","dark:text-blue-400","mt-0.5","shrink-0"],[1,"text-sm","text-blue-900","dark:text-blue-200"],[1,"font-semibold","mb-1"],[1,"opacity-90","space-y-1"],[1,"font-medium"],[3,"formGroup","reservedWords","addReservedWord","removeReservedWord"],[3,"networksFormGroup","getNetworkLabel","getNetworkStyle","getNetworkGroup","toggleNetwork"],[3,"formGroup","whitelistItems","removeWhitelistItem","addWhitelistItem","newWhitelistItem","getWhitelistTypeLabel","networksFormGroup"],[3,"resetDefault","rows"],["titleKey","license.storage_options.zelfkeys_title","ipfsControlName","zelfkeysIpfsEnabled","arweaveControlName","zelfkeysArweaveEnabled","walrusControlName","zelfkeysWalrusEnabled","keyPrefixControlName","zelfkeysKeyPrefix",3,"formGroup"],[1,"sticky","bottom-6","z-10","mx-auto","max-w-4xl"],[1,"bg-gray-900/90","dark:bg-slate-800/90","backdrop-blur-md","rounded-2xl","shadow-2xl","p-4","flex","items-center","justify-between","border","border-white/10"],[1,"px-4","py-2","text-gray-300","hover:text-white","text-sm","font-medium","transition-colors",3,"click","disabled"],[1,"flex","items-center","gap-3"],[1,"px-6","py-2","bg-white","text-gray-900","rounded-xl","text-sm","font-bold","hover:bg-gray-100","transition-colors","shadow-lg","disabled:opacity-50","disabled:cursor-not-allowed","flex","items-center","gap-2",3,"click","disabled"],[1,"h-12"],[1,"flex","items-center","justify-between","p-4","rounded-2xl","shadow-sm","border","transaction-all","duration-300"],[1,"w-8","h-8","rounded-full","flex","items-center","justify-center","shrink-0"],[1,"icon-size-5"],[1,"font-medium","text-sm"],[1,"icon-size-4","animate-spin"]],template:function(t,i){t&1&&g(0,st,43,25,"div",0)},dependencies:[S,j,ye,M,W,V,F,E,R,ee,I,N,Me,Ve,We,Ge,Pe],encapsulation:2,changeDetection:0})}}return o})();export{si as SettingsZelfNameServiceComponent};
