import{a as Fe,b as K}from"./chunk-7RPFOOPQ.js";import{a as Ce}from"./chunk-AXO5FG3T.js";import{a as J}from"./chunk-ROZCPRVC.js";import{a as Se}from"./chunk-WC6UW6FO.js";import{a as Z,b as B}from"./chunk-HFU72T4I.js";import{b as Ee}from"./chunk-NFUOMC3G.js";import"./chunk-IY2LCN2B.js";import"./chunk-HKZCOKJ5.js";import{c as ke}from"./chunk-7DGHLOZR.js";import{i as oe}from"./chunk-B4I74HQQ.js";import{a as me}from"./chunk-LW2DGXIP.js";import"./chunk-E6ENPQNB.js";import{a as de,b as ce,d as W}from"./chunk-CWADPOBT.js";import{A as j,b as pe,d as v,f as O,g as A,i as C,k as ue,l as ge,m as fe,o as Y,p as xe,q as G,r as he,s as be,t as ye,u as _e,v as ve,y as we,z as R}from"./chunk-OLKRQMP7.js";import{d as le}from"./chunk-AH65Y7SD.js";import{ea as se,fa as D}from"./chunk-3S5Q73EG.js";import"./chunk-HFS7MMEA.js";import{d as ae}from"./chunk-6ZNT62BP.js";import{i as z,j as P,p as re,q as V}from"./chunk-53Z5H5E5.js";import{Ab as y,Bc as E,Hc as te,Ib as d,Kc as ie,Mb as Q,Pb as F,Pc as ne,Ub as r,Vb as n,Wb as f,_b as w,ec as _,gb as a,gc as m,hb as k,qc as ee,ra as x,rc as o,sa as h,sc as p,tc as b,ub as $,xc as N,yc as I,zc as L}from"./chunk-3HE7R7QB.js";import{g as X}from"./chunk-TSRGIXR5.js";function Pe(s,g){s&1&&(r(0,"div",8),o(1," Supports ERC-20 "),n())}function Ve(s,g){if(s&1&&(r(0,"span"),o(1),n()),s&2){let e,t=m(3).$implicit,i=m();a(),b("(",(e=i.getNetworkGroup(t).get("altCoins"))==null||(e=e.get("standard"))==null?null:e.value,")")}}function De(s,g){if(s&1){let e=w();r(0,"div",14)(1,"div",15)(2,"mat-checkbox",11),_("change",function(){x(e);let i=m(2).$implicit,l=m();return h(l.toggleAltCoins(i))}),r(3,"span",12),o(4," Alt Coins "),y(5,Ve,2,1,"span",16),n()()()()}if(s&2){let e,t=m(2).$implicit,i=m();a(5),d("ngIf",((e=i.getNetworkGroup(t).get("altCoins"))==null||(e=e.get("enabled"))==null?null:e.value)&&((e=i.getNetworkGroup(t).get("altCoins"))==null||(e=e.get("standard"))==null?null:e.value))}}function We(s,g){if(s&1){let e=w();r(0,"div",9)(1,"div",10)(2,"mat-checkbox",11),_("change",function(){x(e);let i=m().$implicit,l=m();return h(l.toggleNativeCurrency(i))}),r(3,"span",12),o(4),n()()(),y(5,De,6,1,"div",13),n()}if(s&2){let e,t=m().$implicit,i=m();a(4),b(" Native: ",(e=i.getNetworkGroup(t).get("nativeCurrency"))==null||(e=e.get("code"))==null?null:e.value," "),a(),d("ngIf",i.getNetworkGroup(t).get("altCoins"))}}function Oe(s,g){if(s&1){let e=w();r(0,"div",2)(1,"div",3)(2,"mat-checkbox",4),_("change",function(){let i=x(e).$implicit,l=m();return h(l.toggleNetwork(i))}),r(3,"span",5),o(4),n()(),y(5,Pe,2,0,"div",6),n(),y(6,We,6,2,"div",7),n()}if(s&2){let e,t=g.$implicit,i=m();d("formGroupName",t),a(4),p(i.getNetworkLabel(t)),a(),d("ngIf",t==="avalanche"||t==="binance"||t==="polygon"),a(),d("ngIf",(e=i.getNetworkGroup(t).get("enabled"))==null?null:e.value)}}var Ne=(()=>{class s{get networkKeys(){return this.networksFormGroup?Object.keys(this.networksFormGroup.controls):[]}ngOnInit(){}getNetworkGroup(e){return this.networksFormGroup.get(e)}getNetworkLabel(e){return{ethereum:"Ethereum",solana:"Solana",bitcoin:"Bitcoin",blockdag:"BlockDAG",avalanche:"Avalanche",binance:"Binance Smart Chain",polygon:"Polygon",sui:"Sui"}[e]||e}toggleNetwork(e){let t=this.getNetworkGroup(e),i=t.get("enabled")?.value;t.get("nativeCurrency")?.get("enabled")?.setValue(i),t.get("altCoins")&&t.get("altCoins")?.get("enabled")?.setValue(i)}toggleNativeCurrency(e){this.checkNetworkState(e)}toggleAltCoins(e){this.checkNetworkState(e)}checkNetworkState(e){let t=this.getNetworkGroup(e),i=t.get("nativeCurrency")?.get("enabled")?.value,l=t.get("altCoins")?.get("enabled")?.value,c=!!t.get("altCoins");!i&&(!c||!l)?t.get("enabled")?.setValue(!1,{emitEvent:!1}):t.get("enabled")?.value===!1&&t.get("enabled")?.setValue(!0,{emitEvent:!1})}static{this.\u0275fac=function(t){return new(t||s)}}static{this.\u0275cmp=$({type:s,selectors:[["networks-config"]],inputs:{networksFormGroup:"networksFormGroup"},decls:2,vars:2,consts:[[1,"grid","grid-cols-1","md:grid-cols-2","gap-6",3,"formGroup"],["class","border border-gray-200 dark:border-gray-700 rounded-lg p-4",3,"formGroupName",4,"ngFor","ngForOf"],[1,"border","border-gray-200","dark:border-gray-700","rounded-lg","p-4",3,"formGroupName"],[1,"flex","items-center","mb-2"],["formControlName","enabled","color","primary",3,"change"],[1,"font-medium","text-base"],["class","ml-2 text-xs text-yellow-600 bg-yellow-100 px-2 py-0.5 rounded",4,"ngIf"],["class","ml-6 space-y-2",4,"ngIf"],[1,"ml-2","text-xs","text-yellow-600","bg-yellow-100","px-2","py-0.5","rounded"],[1,"ml-6","space-y-2"],["formGroupName","nativeCurrency",1,"flex","items-center"],["formControlName","enabled",3,"change"],[1,"text-sm"],["formGroupName","altCoins","class","space-y-2",4,"ngIf"],["formGroupName","altCoins",1,"space-y-2"],[1,"flex","items-center"],[4,"ngIf"]],template:function(t,i){t&1&&(r(0,"div",0),y(1,Oe,7,4,"div",1),n()),t&2&&(d("formGroup",i.networksFormGroup),a(),d("ngForOf",i.networkKeys))},dependencies:[V,z,P,R,O,A,j,Y,G,xe,B,Z,oe,ke,le,D,Ee,K,W],encapsulation:2,changeDetection:0})}}return s})();var Ae=()=>["coinbase","crypto","stripe","paypal"],Ye=()=>["one","two","three","four","five"],q=()=>({standalone:!0}),Ge=()=>["oneYear","twoYears","threeYears","fourYears","fiveYears","lifetime"];function Re(s,g){if(s&1&&(r(0,"div",4)(1,"div",58)(2,"div",54)(3,"div",59)(4,"mat-icon",16),o(5),n()(),r(6,"span",60),o(7),n()()()()),s&2){let e=m(2);a(),Q(e.alertType==="success"?"bg-green-50 border-green-200 text-green-800 dark:bg-green-900/20 dark:border-green-800 dark:text-green-300":"bg-red-50 border-red-200 text-red-800 dark:bg-red-900/20 dark:border-red-800 dark:text-red-300"),a(2),Q(e.alertType==="success"?"bg-green-100 text-green-600 dark:bg-green-800 dark:text-green-200":"bg-red-100 text-red-600 dark:bg-red-800 dark:text-red-200"),a(2),p(e.alertType==="success"?"check":"priority_high"),a(2),p(e.alertMessage)}}function je(s,g){if(s&1&&(r(0,"span",61),o(1),n()),s&2){let e=m().$implicit;a(),b(" ",e("license.basic_information.domain_required")," ")}}function Ze(s,g){if(s&1&&(r(0,"span",61),o(1),n()),s&2){let e=m().$implicit;a(),b(" ",e("license.basic_information.domain_pattern_error")," ")}}function Be(s,g){if(s&1&&(r(0,"span",119),o(1),n()),s&2){let e=m(2).$implicit;a(),b(" ",e("license.validation_rules.max_length_error")," ")}}function Je(s,g){if(s&1){let e=w();r(0,"span",120),o(1),r(2,"button",121),_("click",function(){let i=x(e).$implicit,l=m(3);return h(l.removeReservedWord(i))}),r(3,"mat-icon",63),o(4,"close"),n()()()}if(s&2){let e=g.$implicit;a(),b(" ",e," ")}}function Ke(s,g){if(s&1){let e=w();r(0,"div",122),_("click",function(){let i=x(e).$implicit,l=m(3);return h(l.togglePaymentMethod(i))}),r(1,"mat-checkbox",123),_("click",function(i){return x(e),h(i.stopPropagation())})("change",function(){let i=x(e).$implicit,l=m(3);return h(l.togglePaymentMethod(i))}),n(),r(2,"span",124),o(3),n()()}if(s&2){let e=g.$implicit,t=m(3);a(),d("checked",t.isPaymentMethodEnabled(e)),a(2),p(e)}}function qe(s,g){if(s&1&&(r(0,"div",92)(1,"mat-icon",125),o(2,"inbox"),n(),r(3,"p",126),o(4),n()()),s&2){let e=m(2).$implicit;a(4),p(e("license.payment_settings.no_items"))}}function He(s,g){if(s&1){let e=w();r(0,"div",128)(1,"input",129),L("ngModelChange",function(i){let l=x(e).$implicit;return I(l.domain,i)||(l.domain=i),h(i)}),n(),r(2,"div",130)(3,"input",131),L("ngModelChange",function(i){let l=x(e).$implicit;return I(l.discount,i)||(l.discount=i),h(i)}),n(),r(4,"select",132),L("ngModelChange",function(i){let l=x(e).$implicit;return I(l.type,i)||(l.type=i),h(i)}),r(5,"option",133),o(6,"%"),n(),r(7,"option",134),o(8,"$"),n()()(),r(9,"button",135),_("click",function(){let i=x(e).index,l=m(4);return h(l.removeWhitelistItem(i))}),r(10,"mat-icon",16),o(11,"delete"),n()()()}if(s&2){let e=g.$implicit,t=m(3).$implicit;a(),N("ngModel",e.domain),d("ngModelOptions",E(8,q))("placeholder",t("license.payment_settings.tag_name")),a(2),N("ngModel",e.discount),d("ngModelOptions",E(9,q))("placeholder",t("license.payment_settings.discount")),a(),N("ngModel",e.type),d("ngModelOptions",E(10,q))}}function Ue(s,g){if(s&1&&(r(0,"div",93),y(1,He,12,11,"div",127),n()),s&2){let e=m(3);a(),d("ngForOf",e.whitelistItems)}}function Xe(s,g){if(s&1&&(r(0,"th",102),o(1),te(2,"slice"),n()),s&2){let e=g.$implicit,t=m(2).$implicit;a(),b(" ",ie(2,1,t("license.pricing_table."+e+"_years"),0,1)," Year ")}}function Qe(s,g){if(s&1){let e=w();r(0,"td",138)(1,"input",139),L("ngModelChange",function(i){let l=x(e).$implicit,c=m().$implicit;return I(c[l],i)||(c[l]=i),h(i)}),n()()}if(s&2){let e=g.$implicit,t=m().$implicit;a(),N("ngModel",t[e]),d("ngModelOptions",E(2,q))}}function et(s,g){if(s&1&&(r(0,"tr")(1,"td",136),o(2),n(),y(3,Qe,2,3,"td",137),n()),s&2){let e=g.$implicit;a(2),b(" ",e.length," "),a(),d("ngForOf",E(2,Ge))}}function tt(s,g){if(s&1){let e=w();r(0,"div",40)(1,"div",14)(2,"span",62)(3,"mat-icon",63),o(4,"dns"),n(),o(5," Zelf Name Service "),n(),f(6,"div",64),n(),r(7,"div",12)(8,"div",13)(9,"div",14)(10,"div",65)(11,"mat-icon",16),o(12,"rule"),n()(),r(13,"div")(14,"h2",17),o(15),n(),r(16,"p",18),o(17,"Rules for subdomains"),n()()(),r(18,"div",66)(19,"div",20)(20,"label",21),o(21),n(),f(22,"input",67),n(),r(23,"div",20)(24,"div",68)(25,"label",21),o(26),n(),r(27,"span",69),o(28),n()(),f(29,"input",70),y(30,Be,2,1,"span",71),n(),r(31,"div",20)(32,"label",21),o(33),n(),f(34,"input",72),n()(),r(35,"div",73)(36,"label",74),o(37),n(),r(38,"div",75),y(39,Je,5,1,"span",76),n(),r(40,"div",77)(41,"input",78,0),_("keyup.enter",function(){x(e);let i=ee(42);return m(2).addReservedWord(i.value),h(i.value="")}),n(),r(43,"button",79),_("click",function(){x(e);let i=ee(42);return m(2).addReservedWord(i.value),h(i.value="")}),r(44,"mat-icon",16),o(45,"add"),n()()()(),r(46,"div",80)(47,"div",81)(48,"mat-icon",82),o(49,"block"),n(),r(50,"div")(51,"h4",38),o(52),n(),r(53,"p",18),o(54),n()()(),f(55,"mat-slide-toggle",83),n()()(),r(56,"div",12)(57,"div",13)(58,"div",14)(59,"div",35)(60,"mat-icon",16),o(61,"payment"),n()(),r(62,"div")(63,"h2",17),o(64),n(),r(65,"p",18),o(66,"Methods and whitelisting"),n()()(),r(67,"div",84)(68,"div")(69,"label",85),o(70),n(),r(71,"div",86),y(72,Ke,4,2,"div",87),n()(),f(73,"div",88),r(74,"div")(75,"label",85),o(76," Supported Networks "),n(),f(77,"networks-config",89),n(),f(78,"div",88),r(79,"div")(80,"div",90)(81,"label",21),o(82),n(),r(83,"button",91),_("click",function(){x(e);let i=m(2);return h(i.addWhitelistItem())}),o(84),n()(),y(85,qe,5,1,"div",92)(86,Ue,2,1,"div",93),n()()()(),r(87,"div",12)(88,"div",13)(89,"div",94)(90,"div",54)(91,"div",95)(92,"mat-icon",16),o(93,"table_chart"),n()(),r(94,"div")(95,"h2",17),o(96),n(),r(97,"p",18),o(98,"Pricing structure"),n()()(),r(99,"button",96),_("click",function(){x(e);let i=m(2);return h(i.resetPricingTable())}),r(100,"mat-icon",63),o(101,"refresh"),n(),o(102),n()(),r(103,"div",97)(104,"table",98)(105,"thead",99)(106,"tr")(107,"th",100),o(108),n(),y(109,Xe,3,5,"th",101),r(110,"th",102),o(111,"Life"),n()()(),r(112,"tbody",103),y(113,et,4,3,"tr",104),n()()()()(),r(114,"div",12)(115,"div",13)(116,"div",14)(117,"div",105)(118,"mat-icon",16),o(119,"storage"),n()(),r(120,"div")(121,"h2",17),o(122),n(),r(123,"p",18),o(124,"Decentralized storage"),n()()(),r(125,"div",106)(126,"div",107)(127,"div",108)(128,"div",109)(129,"div",110)(130,"mat-icon",111),o(131,"cloud"),n(),r(132,"span",112),o(133),n()(),f(134,"mat-slide-toggle",113),n(),r(135,"p",114),o(136),n()(),r(137,"div",108)(138,"div",109)(139,"div",110)(140,"mat-icon",115),o(141,"archive"),n(),r(142,"span",112),o(143,"Arweave"),n()(),f(144,"mat-slide-toggle",113),n(),r(145,"p",114),o(146),n()(),r(147,"div",108)(148,"div",109)(149,"div",110)(150,"mat-icon",116),o(151,"pets"),n(),r(152,"span",112),o(153,"Walrus"),n()(),f(154,"mat-slide-toggle",113),n(),r(155,"p",114),o(156),n()()(),r(157,"div",117)(158,"label",21),o(159),n(),f(160,"input",118),n()()()()()}if(s&2){let e,t=m().$implicit,i=m();a(15),p(t("license.validation_rules.title")),a(6),p(t("license.validation_rules.min_length")),a(),d("formControlName","minLength")("placeholder",t("license.validation_rules.min_length_placeholder")),a(4),p(t("license.validation_rules.max_length")),a(2),p(t("license.validation_rules.max_length_hint")),a(),d("formControlName","maxLength")("placeholder",t("license.validation_rules.max_length_placeholder")),a(),d("ngIf",(e=i.accountForm.get("maxLength"))==null?null:e.hasError("max")),a(3),p(t("license.validation_rules.hold_suffix")),a(),d("formControlName","holdSuffix")("placeholder",t("license.validation_rules.hold_suffix_placeholder")),a(3),p(t("license.validation_rules.reserved_words")),a(2),d("ngForOf",i.reservedWords),a(2),d("placeholder",t("license.validation_rules.add_reserved_word")),a(11),b(" ",t("license.validation_rules.content_filter")," "),a(2),b(" ",t("license.validation_rules.content_filter_description")," "),a(),d("formControlName","contentFilterEnabled")("color","warn"),a(9),p(t("license.payment_settings.title")),a(6),p(t("license.payment_settings.payment_methods")),a(2),d("ngForOf",E(42,Ae)),a(5),d("networksFormGroup",i.networksFormGroup),a(5),b(" ",t("license.payment_settings.whitelist_title")," "),a(2),b(" + ",t("license.payment_settings.add_item")," "),a(),F(i.whitelistItems.length===0?85:86),a(11),p(t("license.pricing_table.title")),a(6),b(" ",t("license.pricing_table.reset_default")," "),a(6),b(" ",t("license.pricing_table.length")," "),a(),d("ngForOf",E(43,Ye)),a(4),d("ngForOf",i.pricingTableRows),a(9),b("",t("license.storage_options.title")," (ZNS)"),a(11),p(t("license.storage_options.ipfs_title")),a(),d("formControlName","ipfsEnabled"),a(2),p(t("license.storage_options.ipfs_description")),a(8),d("formControlName","arweaveEnabled"),a(2),p(t("license.storage_options.arweave_description")),a(8),d("formControlName","walrusEnabled"),a(2),p(t("license.storage_options.walrus_description")),a(3),p(t("license.storage_options.key_prefix")),a(),d("formControlName","keyPrefix")("placeholder",t("license.storage_options.key_prefix_placeholder"))}}function it(s,g){if(s&1&&(r(0,"div",41)(1,"div",14)(2,"span",140)(3,"mat-icon",63),o(4,"vpn_key"),n(),o(5," ZelfKeys "),n(),f(6,"div",141),n(),r(7,"div",142)(8,"div",13)(9,"div",14)(10,"div",15)(11,"mat-icon",16),o(12,"vpn_key"),n()(),r(13,"div")(14,"h2",17),o(15),n(),r(16,"p",18),o(17,"Key storage settings"),n()()(),r(18,"div",143)(19,"div",144)(20,"div",145)(21,"span",112),o(22,"IPFS"),n(),f(23,"mat-slide-toggle",113),n()(),r(24,"div",144)(25,"div",145)(26,"span",112),o(27,"Arweave"),n(),f(28,"mat-slide-toggle",113),n()(),r(29,"div",144)(30,"div",145)(31,"span",112),o(32,"Walrus"),n(),f(33,"mat-slide-toggle",113),n()()(),r(34,"div",117)(35,"label",21),o(36),n(),f(37,"input",146),n()()()()),s&2){let e=m().$implicit;a(15),b(" ",e("license.storage_options.title")," (ZelfKeys) "),a(8),d("formControlName","zelfkeysIpfsEnabled"),a(5),d("formControlName","zelfkeysArweaveEnabled"),a(5),d("formControlName","zelfkeysWalrusEnabled"),a(3),p(e("license.storage_options.key_prefix")),a(),d("formControlName","zelfkeysKeyPrefix")}}function nt(s,g){if(s&1&&(r(0,"mat-icon",147),o(1,"refresh"),n(),r(2,"span"),o(3),n()),s&2){let e=m().$implicit;a(3),p(e("license.actions.processing"))}}function rt(s,g){if(s&1&&(r(0,"span"),o(1),n()),s&2){let e=m().$implicit;a(),p(e("license.actions.save_configuration"))}}function at(s,g){if(s&1){let e=w();r(0,"div",2)(1,"div",3),y(2,Re,8,6,"div",4),r(3,"form",5)(4,"div",6)(5,"mat-icon",7),o(6,"info"),n(),r(7,"div",8)(8,"h3",9),o(9,"Field Restrictions"),n(),r(10,"div",10)(11,"p")(12,"span",11),o(13,"Editable:"),n(),o(14," Domain name, rules, payments, pricing, storage, metadata"),n(),r(15,"p")(16,"span",11),o(17,"Read-only:"),n(),o(18," Dates, status, limits, Stripe data"),n(),r(19,"p")(20,"span",11),o(21,"Currencies:"),n(),o(22," BTC, ETH, SOL, USDC, USDT, BDAG, AVAX, ZNS"),n()()()(),r(23,"div",12)(24,"div",13)(25,"div",14)(26,"div",15)(27,"mat-icon",16),o(28,"info"),n()(),r(29,"div")(30,"h2",17),o(31),n(),r(32,"p",18),o(33,"General domain settings"),n()()(),r(34,"div",19)(35,"div",20)(36,"label",21),o(37),n(),r(38,"div",22)(39,"span",23),o(40,"johndoe"),n(),r(41,"span",24),o(42,"."),n(),f(43,"input",25),n(),r(44,"div",26),y(45,je,2,1,"span",27)(46,Ze,2,1,"span",27),n()(),r(47,"div",20)(48,"label",21),o(49),n(),f(50,"input",28),n(),r(51,"div",20)(52,"label",21),o(53),n(),f(54,"input",29),n(),r(55,"div",20)(56,"label",30),o(57),r(58,"span",31),o(59,"System"),n()(),f(60,"input",32),n(),r(61,"div",20)(62,"label",30),o(63),r(64,"span",31),o(65,"System"),n()(),f(66,"input",32),n(),r(67,"div",33)(68,"label",21),o(69),n(),f(70,"textarea",34),n()()()(),r(71,"div",12)(72,"div",13)(73,"div",14)(74,"div",35)(75,"mat-icon",16),o(76,"extension"),n()(),r(77,"div")(78,"h2",17),o(79),n(),r(80,"p",18),o(81,"Enable services"),n()()(),r(82,"div",36)(83,"div",37),_("click",function(){let i;x(e);let l=m();return h((i=l.accountForm.get("znsEnabled"))==null?null:i.setValue(!((i=l.accountForm.get("znsEnabled"))!=null&&i.value)))}),r(84,"div")(85,"h3",38),o(86),n(),r(87,"p",18),o(88),n()(),r(89,"mat-slide-toggle",39),_("click",function(i){return x(e),h(i.stopPropagation())}),n()(),r(90,"div",37),_("click",function(){let i;x(e);let l=m();return h((i=l.accountForm.get("zelfkeysEnabled"))==null?null:i.setValue(!((i=l.accountForm.get("zelfkeysEnabled"))!=null&&i.value)))}),r(91,"div")(92,"h3",38),o(93),n(),r(94,"p",18),o(95),n()(),r(96,"mat-slide-toggle",39),_("click",function(i){return x(e),h(i.stopPropagation())}),n()()()()(),y(97,tt,161,44,"div",40)(98,it,38,6,"div",41),r(99,"div",12)(100,"div",13)(101,"div",14)(102,"div",42)(103,"mat-icon",16),o(104,"description"),n()(),r(105,"div")(106,"h2",17),o(107),n(),r(108,"p",18),o(109,"Additional information"),n()()(),r(110,"div",19)(111,"div",20)(112,"label",21),o(113),n(),f(114,"input",43),n(),r(115,"div",20)(116,"label",21),o(117),n(),f(118,"input",44),n(),r(119,"div",20)(120,"label",21),o(121),n(),f(122,"input",44),n(),r(123,"div",20)(124,"label",21),o(125),n(),r(126,"div",45)(127,"select",46)(128,"option",47),o(129),n(),r(130,"option",48),o(131),n(),r(132,"option",49),o(133),n()(),r(134,"mat-icon",50),o(135,"expand_more"),n()()()()()(),r(136,"div",51)(137,"div",52)(138,"button",53),_("click",function(){x(e);let i=m();return h(i.cancel())}),o(139),n(),r(140,"div",54)(141,"button",55),o(142," Reset "),n(),r(143,"button",56),_("click",function(){x(e);let i=m();return h(i.saveLicense())}),y(144,nt,4,1)(145,rt,2,1,"span"),n()()()(),f(146,"div",57),n()()()}if(s&2){let e,t,i,l,c=g.$implicit,u=m();a(2),F(u.showAlert?2:-1),a(),d("formGroup",u.accountForm),a(28),p(c("license.basic_information.title")),a(6),p(c("license.basic_information.domain_name")),a(6),d("formControlName","domain")("placeholder",c("license.basic_information.domain_placeholder")),a(2),d("ngIf",((e=u.accountForm.get("domain"))==null?null:e.hasError("required"))&&((e=u.accountForm.get("domain"))==null?null:e.touched)),a(),d("ngIf",((t=u.accountForm.get("domain"))==null?null:t.hasError("pattern"))&&((t=u.accountForm.get("domain"))==null?null:t.touched)),a(3),p(c("license.basic_information.status")),a(),d("formControlName","status"),a(3),p(c("license.basic_information.owner")),a(),d("formControlName","owner")("placeholder",c("license.basic_information.owner_placeholder")),a(3),b(" ",c("license.basic_information.start_date")," "),a(3),d("formControlName","startDate"),a(3),b(" ",c("license.basic_information.end_date")," "),a(3),d("formControlName","endDate"),a(3),p(c("license.basic_information.description")),a(),d("formControlName","description")("placeholder",c("license.basic_information.description_placeholder")),a(9),p(c("license.features.title")),a(7),p(c("license.features.zns_title")),a(2),p(c("license.features.zns_description")),a(),d("formControlName","znsEnabled"),a(4),p(c("license.features.zelfkeys_title")),a(2),p(c("license.features.zelfkeys_description")),a(),d("formControlName","zelfkeysEnabled"),a(),F((i=u.accountForm.get("znsEnabled"))!=null&&i.value?97:-1),a(),F((l=u.accountForm.get("zelfkeysEnabled"))!=null&&l.value?98:-1),a(9),p(c("license.metadata.title")),a(6),p(c("license.metadata.launch_date")),a(),d("formControlName","launchDate"),a(3),p(c("license.metadata.version")),a(),d("formControlName","version"),a(3),p(c("license.metadata.documentation_url")),a(),d("formControlName","documentation"),a(3),p(c("license.metadata.support_level")),a(2),d("formControlName","support"),a(2),p(c("license.metadata.support_standard")),a(2),p(c("license.metadata.support_premium")),a(2),p(c("license.metadata.support_enterprise")),a(5),d("disabled",u.isLoading),a(),b(" ",c("license.actions.cancel")," "),a(2),d("disabled",u.isLoading),a(2),d("disabled",u.isLoading||u.accountForm.invalid),a(),F(u.isLoading?144:145)}}var Tt=(()=>{class s{constructor(e,t,i,l,c,u,S){this._formBuilder=e,this._router=t,this._saveConfirmationService=i,this._translocoService=l,this._cdr=c,this._licenseService=u,this._httpWrapper=S,this.alertMessage="",this.alertType="success",this.currentLicense=null,this.isLoading=!1,this.pricingTableRows=[],this.reservedWords=["www","api","admin","support","help"],this.showAlert=!1,this.whitelistItems=[],this.zelfkeysPlans=[],this.inappropriateWords=["dick","vagina","porn","sex","fuck","shit","bitch","ass","damn","hell","crap","piss","bastard","whore","slut","fag","nigger","retard","idiot","stupid","moron","dumb","hate","kill","die","death","murder","suicide"]}get networksFormGroup(){return this.accountForm.get("networks")}ngOnInit(){this.initializeWhitelistItems(),this.initializePricingTable(),this.createEmptyForm()}ngAfterViewInit(){this.loadLicense().then(()=>{this.populateFormFromLicense()})}createEmptyForm(){this.accountForm=this._formBuilder.group({domain:["",[v.required,v.pattern(/^[a-zA-Z0-9][a-zA-Z0-9-]*[a-zA-Z0-9]$/)]],status:[{value:"active",disabled:!0}],owner:["zelf-team",v.required],description:["Official Zelf domain",v.required],znsEnabled:[!0],zelfkeysEnabled:[!0],minLength:[3,[v.required,v.min(1)]],maxLength:[27,[v.required,v.min(1),v.max(27)]],holdSuffix:[".hold",v.required],contentFilterEnabled:[!0],ipfsEnabled:[!0],arweaveEnabled:[!0],walrusEnabled:[!0],keyPrefix:["tagName",v.required],zelfkeysIpfsEnabled:[!0],zelfkeysArweaveEnabled:[!0],zelfkeysWalrusEnabled:[!0],zelfkeysKeyPrefix:["tagName",v.required],coinbaseEnabled:[!0],cryptoEnabled:[!0],stripeEnabled:[!0],networks:this.createNetworksFormGroup(),startDate:[{value:"",disabled:!0}],endDate:[{value:"",disabled:!0}],launchDate:["2023-01-01"],version:["1.0.0",v.required],documentation:["https://docs.zelf.world"],community:[""],enterprise:[""],support:["standard"]}),this.addWhitelistFormControls()}createNetworksFormGroup(e=null){let t=this._formBuilder.group({}),i=J.createEmpty("temp"),l=e||i.getNetworks();return Object.keys(l).forEach(c=>{let u=l[c];c.startsWith("other_")||t.addControl(c,this._formBuilder.group({enabled:[u.enabled],nativeCurrency:this._formBuilder.group({enabled:[u.nativeCurrency.enabled],code:[u.nativeCurrency.code]}),altCoins:u.altCoins?this._formBuilder.group({enabled:[u.altCoins.enabled],standard:[u.altCoins.standard]}):null}))}),t}initializeWhitelistItems(){this.whitelistItems=[{domain:"",discount:"",type:"percentage"}]}addWhitelistFormControls(){this.whitelistItems.forEach((e,t)=>{this.accountForm.get(`whitelistDomain_${t}`)||this.accountForm.addControl(`whitelistDomain_${t}`,new C(e.domain)),this.accountForm.get(`whitelistDiscount_${t}`)||this.accountForm.addControl(`whitelistDiscount_${t}`,new C(e.discount)),this.accountForm.get(`whitelistType_${t}`)||this.accountForm.addControl(`whitelistType_${t}`,new C(e.type))})}removeWhitelistFormControls(){this.whitelistItems.forEach((e,t)=>{this.accountForm.removeControl(`whitelistDomain_${t}`),this.accountForm.removeControl(`whitelistDiscount_${t}`),this.accountForm.removeControl(`whitelistType_${t}`)})}addReservedWord(e){e&&e.trim()&&!this.reservedWords.includes(e.trim())&&this.reservedWords.push(e.trim())}removeReservedWord(e){let t=this.reservedWords.indexOf(e);t>-1&&this.reservedWords.splice(t,1)}togglePaymentMethod(e){this.getPaymentMethods().includes(e)?e==="coinbase"?this.accountForm.get("coinbaseEnabled")?.setValue(!1):e==="crypto"?this.accountForm.get("cryptoEnabled")?.setValue(!1):e==="stripe"&&this.accountForm.get("stripeEnabled")?.setValue(!1):e==="coinbase"?this.accountForm.get("coinbaseEnabled")?.setValue(!0):e==="crypto"?this.accountForm.get("cryptoEnabled")?.setValue(!0):e==="stripe"&&this.accountForm.get("stripeEnabled")?.setValue(!0)}isPaymentMethodEnabled(e){return this.getPaymentMethods().includes(e)}addWhitelistItem(){let e={domain:"",discount:"",type:"percentage"};this.whitelistItems.push(e);let t=this.whitelistItems.length-1;this.accountForm.addControl(`whitelistDomain_${t}`,new C("")),this.accountForm.addControl(`whitelistDiscount_${t}`,new C("")),this.accountForm.addControl(`whitelistType_${t}`,new C("percentage"))}trackByWhitelistItem(e,t){return e}removeWhitelistItem(e){this.whitelistItems.length>1&&(this.accountForm.removeControl(`whitelistDomain_${e}`),this.accountForm.removeControl(`whitelistDiscount_${e}`),this.accountForm.removeControl(`whitelistType_${e}`),this.whitelistItems.splice(e,1),this.removeWhitelistFormControls(),this.addWhitelistFormControls())}validateDomainName(e){if(!this.accountForm.get("contentFilterEnabled")?.value)return!0;let t=e.toLowerCase();return!this.inappropriateWords.some(i=>t.includes(i))}getPaymentMethods(){let e=[];return this.accountForm.get("coinbaseEnabled")?.value&&e.push("coinbase"),this.accountForm.get("cryptoEnabled")?.value&&e.push("crypto"),this.accountForm.get("stripeEnabled")?.value&&e.push("stripe"),e}getDefaultPricingTable(){return{1:{1:240,2:432,3:612,4:768,5:900,lifetime:3600},2:{1:120,2:216,3:306,4:384,5:450,lifetime:1800},3:{1:72,2:130,3:184,4:230,5:270,lifetime:1080},4:{1:36,2:65,3:92,4:115,5:135,lifetime:540},5:{1:30,2:54,3:76,4:96,5:112,lifetime:450},"6-15":{1:24,2:43,3:61,4:77,5:90,lifetime:360},16:{1:23,2:41,3:59,4:74,5:86,lifetime:345},17:{1:22,2:40,3:56,4:70,5:82,lifetime:330},18:{1:21,2:38,3:54,4:67,5:79,lifetime:315},19:{1:20,2:36,3:51,4:64,5:75,lifetime:300},20:{1:19,2:34,3:48,4:61,5:72,lifetime:285},21:{1:18,2:32,3:46,4:58,5:68,lifetime:270},22:{1:17,2:31,3:43,4:54,5:64,lifetime:255},23:{1:16,2:29,3:41,4:51,5:60,lifetime:240},24:{1:15,2:27,3:38,4:48,5:56,lifetime:225},25:{1:14,2:25,3:36,4:45,5:53,lifetime:210},26:{1:13,2:23,3:33,4:42,5:49,lifetime:195},27:{1:12,2:22,3:31,4:38,5:45,lifetime:180}}}hasLicenseChanges(e){if(!this.currentLicense)return!0;let t=this.accountForm.value,i=this.currentLicense.domainConfig;if(this.currentLicense.domain!==e||i.name!==e||i.holdSuffix!==t.holdSuffix||i.status!==t.status||i.owner!==t.owner||i.description!==t.description)return!0;let l=!0,c=!0;if(l!==t.znsEnabled||c!==t.zelfkeysEnabled||i.tags?.minLength!==t.minLength||i.tags?.maxLength!==t.maxLength||i.tags?.storage?.keyPrefix!==t.keyPrefix||i.tags?.storage?.ipfsEnabled!==t.ipfsEnabled||i.tags?.storage?.arweaveEnabled!==t.arweaveEnabled||i.tags?.storage?.walrusEnabled!==t.walrusEnabled||i.zelfkeys?.storage?.keyPrefix!==t.zelfkeysKeyPrefix||i.zelfkeys?.storage?.ipfsEnabled!==t.zelfkeysIpfsEnabled||i.zelfkeys?.storage?.arweaveEnabled!==t.zelfkeysArweaveEnabled||i.zelfkeys?.storage?.walrusEnabled!==t.zelfkeysWalrusEnabled)return!0;let u=i.tags?.payment?.methods||[],S=this.getPaymentMethods();if(JSON.stringify(u.sort())!==JSON.stringify(S.sort()))return!0;let M=i.tags?.payment?.networks||this.currentLicense.getNetworks(),T=t.networks;if(JSON.stringify(M)!==JSON.stringify(T))return!0;let H=i.tags?.payment?.whitelist||{},U=this.buildWhitelistFromForm();if(JSON.stringify(H)!==JSON.stringify(U))return!0;let Ie=i.tags?.payment?.pricingTable||{},Le=this.getPricingTableFromRows();return JSON.stringify(Ie)!==JSON.stringify(Le)||i.metadata.launchDate!==t.launchDate||i.metadata.version!==t.version||i.metadata.documentation!==t.documentation||i.metadata.community!==t.community||i.metadata.enterprise!==t.enterprise||i.metadata.support!==t.support}getLicenseChanges(e){if(!this.currentLicense)return["Creating new license"];let t=[],i=this.accountForm.value,l=this.currentLicense.domainConfig;return this.getBasicInfoChanges(l,e,i,t),this.getFeatureChanges(i,t),this.getValidationChanges(l,i,t),this.getStorageChanges(l,i,t),this.getPaymentChanges(l,i,t),this.getMetadataChanges(l,i,t),t}getBasicInfoChanges(e,t,i,l){this.currentLicense?.domain!==t&&l.push(`Domain: ${this.currentLicense?.domain} \u2192 ${t}`),e.name!==t&&l.push(`Name: ${e.name} \u2192 ${t}`),e.holdSuffix!==i.holdSuffix&&l.push(`Hold Suffix: ${e.holdSuffix} \u2192 ${i.holdSuffix}`),e.status!==i.status&&l.push(`Status: ${e.status} \u2192 ${i.status}`),e.owner!==i.owner&&l.push(`Owner: ${e.owner} \u2192 ${i.owner}`),e.description!==i.description&&l.push(`Description: ${e.description} \u2192 ${i.description}`)}getFeatureChanges(e,t){e.znsEnabled!==!0&&t.push(`ZNS Feature: true \u2192 ${e.znsEnabled}`),e.zelfkeysEnabled!==!0&&t.push(`Zelfkeys Feature: true \u2192 ${e.zelfkeysEnabled}`)}getValidationChanges(e,t,i){e.tags?.minLength!==t.minLength&&i.push(`Min Length: ${e.tags?.minLength} \u2192 ${t.minLength}`),e.tags?.maxLength!==t.maxLength&&i.push(`Max Length: ${e.tags?.maxLength} \u2192 ${t.maxLength}`)}getStorageChanges(e,t,i){e.tags?.storage?.keyPrefix!==t.keyPrefix&&i.push(`ZNS Key Prefix: ${e.tags?.storage?.keyPrefix} \u2192 ${t.keyPrefix}`),e.tags?.storage?.ipfsEnabled!==t.ipfsEnabled&&i.push(`ZNS IPFS Enabled: ${e.tags?.storage?.ipfsEnabled} \u2192 ${t.ipfsEnabled}`),e.tags?.storage?.arweaveEnabled!==t.arweaveEnabled&&i.push(`ZNS Arweave Enabled: ${e.tags?.storage?.arweaveEnabled} \u2192 ${t.arweaveEnabled}`),e.tags?.storage?.walrusEnabled!==t.walrusEnabled&&i.push(`ZNS Walrus Enabled: ${e.tags?.storage?.walrusEnabled} \u2192 ${t.walrusEnabled}`),e.zelfkeys?.storage?.keyPrefix!==t.zelfkeysKeyPrefix&&i.push(`ZelfKeys Key Prefix: ${e.zelfkeys?.storage?.keyPrefix} \u2192 ${t.zelfkeysKeyPrefix}`),e.zelfkeys?.storage?.ipfsEnabled!==t.zelfkeysIpfsEnabled&&i.push(`ZelfKeys IPFS Enabled: ${e.zelfkeys?.storage?.ipfsEnabled} \u2192 ${t.zelfkeysIpfsEnabled}`),e.zelfkeys?.storage?.arweaveEnabled!==t.zelfkeysArweaveEnabled&&i.push(`ZelfKeys Arweave Enabled: ${e.zelfkeys?.storage?.arweaveEnabled} \u2192 ${t.zelfkeysArweaveEnabled}`),e.zelfkeys?.storage?.walrusEnabled!==t.zelfkeysWalrusEnabled&&i.push(`ZelfKeys Walrus Enabled: ${e.zelfkeys?.storage?.walrusEnabled} \u2192 ${t.zelfkeysWalrusEnabled}`)}getPaymentChanges(e,t,i){let l=e.tags?.payment?.methods||[],c=this.getPaymentMethods();JSON.stringify(l.sort())!==JSON.stringify(c.sort())&&i.push(`Payment Methods: ${l.join(", ")} \u2192 ${c.join(", ")}`);let u=e.tags?.payment?.networks||this.currentLicense?.getNetworks(),S=t.networks;JSON.stringify(u)!==JSON.stringify(S)&&i.push("Networks configuration updated");let M=e.tags?.payment?.whitelist||{},T=this.buildWhitelistFromForm();JSON.stringify(M)!==JSON.stringify(T)&&i.push(`Whitelist: ${Object.keys(M).length} \u2192 ${Object.keys(T).length} entries`);let H=e.tags?.payment?.pricingTable||{},U=this.getPricingTableFromRows();JSON.stringify(H)!==JSON.stringify(U)&&i.push("Pricing Table: Updated")}getMetadataChanges(e,t,i){e.metadata.launchDate!==t.launchDate&&i.push(`Launch Date: ${e.metadata.launchDate} \u2192 ${t.launchDate}`),e.metadata.version!==t.version&&i.push(`Version: ${e.metadata.version} \u2192 ${t.version}`),e.metadata.documentation!==t.documentation&&i.push(`Documentation: ${e.metadata.documentation} \u2192 ${t.documentation}`),e.metadata.community!==t.community&&i.push(`Community: ${e.metadata.community} \u2192 ${t.community}`),e.metadata.enterprise!==t.enterprise&&i.push(`Enterprise: ${e.metadata.enterprise} \u2192 ${t.enterprise}`),e.metadata.support!==t.support&&i.push(`Support: ${e.metadata.support} \u2192 ${t.support}`)}buildWhitelistFromForm(){let e={};return this.whitelistItems.forEach(t=>{let i=t.domain?.trim(),l=t.discount?.toString().trim(),c=t.type?.trim();if(i&&l&&c){let u=c==="percentage"?"%":c==="fixed"?"$":c;e[i]=`${l}${u}`}}),e}cleanupInvalidData(){let e=this.getPaymentMethods(),t=e.filter(i=>["coinbase","crypto","stripe"].includes(i));if(t.length!==e.length){let i=e.filter(l=>!["coinbase","crypto","stripe"].includes(l));this.accountForm.get("coinbaseEnabled")?.setValue(t.includes("coinbase")),this.accountForm.get("cryptoEnabled")?.setValue(t.includes("crypto")),this.accountForm.get("stripeEnabled")?.setValue(t.includes("stripe")),i.length>0&&this.showError(`Removed invalid payment methods: ${i.join(", ")}. These are no longer supported.`)}}validateDataBeforeSend(){let e=[],i=this.getPaymentMethods().filter(l=>!["coinbase","crypto","stripe"].includes(l));return i.length>0&&e.push(`Invalid payment methods: ${i.join(", ")}. Allowed: coinbase, crypto, stripe`),{valid:e.length===0,errors:e}}buildDomainConfig(){let e=this.accountForm.value,t=this.validateDataBeforeSend();if(!t.valid)throw this.showError(`Validation failed: ${t.errors.join(", ")}`),new Error(`Validation failed: ${t.errors.join(", ")}`);let i=this.buildWhitelistFromForm();return{name:e.domain,holdSuffix:e.holdSuffix,status:this.accountForm.get("status")?.value||"active",owner:e.owner,description:e.description,tags:{minLength:e.minLength,maxLength:e.maxLength,allowedChars:/^[a-zA-Z0-9][a-zA-Z0-9-]*[a-zA-Z0-9]$/,reserved:this.reservedWords,customRules:[],payment:{methods:this.getPaymentMethods(),networks:e.networks,discounts:{yearly:.1,lifetime:.2},rewardPrice:10,whitelist:i,pricingTable:this.getPricingTableFromRows()},storage:{keyPrefix:e.keyPrefix,ipfsEnabled:e.ipfsEnabled,arweaveEnabled:e.arweaveEnabled,walrusEnabled:e.walrusEnabled}},zelfkeys:{plans:this.zelfkeysPlans,payment:{whitelist:{},pricingTable:{}},storage:{keyPrefix:e.zelfkeysKeyPrefix,ipfsEnabled:e.zelfkeysIpfsEnabled,arweaveEnabled:e.zelfkeysArweaveEnabled,walrusEnabled:e.zelfkeysWalrusEnabled}},metadata:{launchDate:e.launchDate,version:e.version,documentation:e.documentation,community:e.community||void 0,enterprise:e.enterprise||void 0,support:e.support}}}loadCurrentLicense(){let e=localStorage.getItem("license");if(e)try{let t=JSON.parse(e);this.currentLicense=J.fromJSON(t)}catch(t){console.error("Error parsing stored license:",t)}}fetchLicenseFromBackend(){return X(this,null,function*(){try{this.isLoading=!0,this._cdr.detectChanges();let e=yield this._licenseService.getMyLicense(!0);if(!e||!e.data||!e.data.myLicense)return;this.currentLicense=J.fromAPIResponseWithWrapper(e.data.myLicense.domainConfig),localStorage.setItem("license",JSON.stringify(this.currentLicense.toJSON()))}catch(e){console.error("Error fetching license from backend:",e),this.showAlert=!0,this.alertMessage="Failed to fetch license from server",this.alertType="error"}finally{this.isLoading=!1,this._cdr.detectChanges()}})}loadLicense(){return X(this,null,function*(){this.currentLicense?.domain||(yield this.fetchLicenseFromBackend())})}populateFormFromLicense(){let e=this.currentLicense?.domainConfig;e&&(this.populateBasicInfo(e),this.populateFeatures(e),this.populateValidationRules(e),this.populateStorageOptions(e),this.populatePaymentSettings(e),this.populateMetadata(e)),this.cleanupInvalidData(),this._cdr.detectChanges()}populateBasicInfo(e){this.accountForm.get("domain")?.setValue(e.name||""),this.accountForm.get("status")?.setValue(e.status||"active"),this.accountForm.get("owner")?.setValue(e.owner||"zelf-team"),this.accountForm.get("description")?.setValue(e.description||"Official Zelf domain"),this.accountForm.get("startDate")?.setValue(e.startDate||""),this.accountForm.get("endDate")?.setValue(e.endDate||"")}populateFeatures(e){this.accountForm.get("znsEnabled")?.setValue(!0),this.accountForm.get("zelfkeysEnabled")?.setValue(!0)}populateValidationRules(e){this.accountForm.get("minLength")?.setValue(e.tags?.minLength||3),this.accountForm.get("maxLength")?.setValue(e.tags?.maxLength||50),this.accountForm.get("holdSuffix")?.setValue(e.holdSuffix||".hold"),e.tags?.reserved&&(this.reservedWords=[...e.tags.reserved])}populateStorageOptions(e){this.accountForm.get("ipfsEnabled")?.setValue(e.tags?.storage?.ipfsEnabled??!0),this.accountForm.get("arweaveEnabled")?.setValue(e.tags?.storage?.arweaveEnabled??!0),this.accountForm.get("walrusEnabled")?.setValue(e.tags?.storage?.walrusEnabled??!0),this.accountForm.get("keyPrefix")?.setValue(e.tags?.storage?.keyPrefix||"tagName"),this.accountForm.get("zelfkeysIpfsEnabled")?.setValue(e.zelfkeys?.storage?.ipfsEnabled??!0),this.accountForm.get("zelfkeysArweaveEnabled")?.setValue(e.zelfkeys?.storage?.arweaveEnabled??!0),this.accountForm.get("zelfkeysWalrusEnabled")?.setValue(e.zelfkeys?.storage?.walrusEnabled??!0),this.accountForm.get("zelfkeysKeyPrefix")?.setValue(e.zelfkeys?.storage?.keyPrefix||"tagName")}populatePaymentSettings(e){if(this.accountForm.get("coinbaseEnabled")?.setValue(e.tags?.payment?.methods?.includes("coinbase")??!0),this.accountForm.get("cryptoEnabled")?.setValue(e.tags?.payment?.methods?.includes("crypto")??!0),this.accountForm.get("stripeEnabled")?.setValue(e.tags?.payment?.methods?.includes("stripe")??!0),this.currentLicense){let t=this.currentLicense.getNetworks();this.accountForm.setControl("networks",this.createNetworksFormGroup(t))}e.tags?.payment?.pricingTable&&this.loadPricingTableFromConfig(e.tags.payment.pricingTable),this.populateWhitelist(e),e.zelfkeys?.plans&&(this.zelfkeysPlans=[...e.zelfkeys.plans])}populateWhitelist(e){e.tags?.payment?.whitelist&&(this.whitelistItems=Object.entries(e.tags.payment.whitelist).map(([t,i])=>{let l=i,c=l.match(/^(\d+(?:\.\d+)?)([%$])$/);if(c){let u=c[2],S=u==="%"?"percentage":u==="$"?"fixed":u;return{domain:t,discount:c[1],type:S}}return{domain:t,discount:l,type:"percentage"}})),this.whitelistItems.forEach((t,i)=>{this.accountForm.get(`whitelistDomain_${i}`)?.setValue(t.domain),this.accountForm.get(`whitelistDiscount_${i}`)?.setValue(t.discount),this.accountForm.get(`whitelistType_${i}`)?.setValue(t.type)})}populateMetadata(e){this.accountForm.get("launchDate")?.setValue(e.metadata?.launchDate||"2023-01-01"),this.accountForm.get("version")?.setValue(e.metadata?.version||"1.0.0"),this.accountForm.get("documentation")?.setValue(e.metadata?.documentation||"https://docs.zelf.world"),this.accountForm.get("community")?.setValue(e.metadata?.community||""),this.accountForm.get("enterprise")?.setValue(e.metadata?.enterprise||""),this.accountForm.get("support")?.setValue(e.metadata?.support||"standard")}saveLicense(){if(this.accountForm.invalid){this.showError("Please fill in all required fields correctly");return}let e=this.accountForm.get("domain")?.value;if(!e){this.showError("Domain is required");return}if(!this.validateDomainName(e)){this.showError("Domain name contains inappropriate content. Please choose a different name.");return}if(this.currentLicense&&!this.hasLicenseChanges(e)){this.showError("No changes detected. Please modify at least one field before saving.");return}let t=this.buildDomainConfig();this._saveConfirmationService.setSaveData({domain:t.name,domainConfig:t,redirectUrl:"/settings/license",operation:{title:this._translocoService.translate("saving_operations.license_configuration.title"),description:this._translocoService.translate("saving_operations.license_configuration.description"),action:this._translocoService.translate("saving_operations.license_configuration.action"),itemName:this._translocoService.translate("saving_operations.license_configuration.itemName")}}),this._router.navigate(["/save-confirmation"],{queryParams:{redirect:"/settings/license"}})}showSuccess(e){this.alertMessage=e,this.alertType="success",this.showAlert=!0,setTimeout(()=>{this.showAlert=!1},5e3)}showError(e){this.alertMessage=e,this.alertType="error",this.showAlert=!0,setTimeout(()=>{this.showAlert=!1},5e3)}cancel(){this.loadCurrentLicense()}getCurrentLicense(){return this.currentLicense}isLicenseActive(){return this.currentLicense?.isActive()||!1}licenseSupportsFeature(e){return this.currentLicense?.supportsFeature(e)||!1}getTagPrice(e,t="1",i=""){return this.currentLicense?.getPrice(e,t,i)||null}validateTagName(e){return this.currentLicense?.validateTagName(e)||{valid:!1,error:"No license found"}}generateHoldDomain(e){return this.currentLicense?.generateHoldDomain(e)||""}initializePricingTable(){let e=this.getDefaultPricingTable();this.pricingTableRows=[];for(let i=1;i<=5;i++){let l=e[i]||{1:0,2:0,3:0,4:0,5:0,lifetime:0};this.pricingTableRows.push({length:i.toString(),oneYear:l[1]||0,twoYears:l[2]||0,threeYears:l[3]||0,fourYears:l[4]||0,fiveYears:l[5]||0,lifetime:l.lifetime||0})}let t=e["6-15"]||{1:0,2:0,3:0,4:0,5:0,lifetime:0};this.pricingTableRows.push({length:"6-15",oneYear:t[1]||0,twoYears:t[2]||0,threeYears:t[3]||0,fourYears:t[4]||0,fiveYears:t[5]||0,lifetime:t.lifetime||0});for(let i=16;i<=27;i++){let l=e[i]||{1:0,2:0,3:0,4:0,5:0,lifetime:0};this.pricingTableRows.push({length:i.toString(),oneYear:l[1]||0,twoYears:l[2]||0,threeYears:l[3]||0,fourYears:l[4]||0,fiveYears:l[5]||0,lifetime:l.lifetime||0})}}resetPricingTable(){this.initializePricingTable()}trackByPricingRow(e,t){return t.length}getPricingTableFromRows(){let e={};return this.pricingTableRows.forEach(t=>{e[t.length]={1:t.oneYear||0,2:t.twoYears||0,3:t.threeYears||0,4:t.fourYears||0,5:t.fiveYears||0,lifetime:t.lifetime||0}}),e}loadPricingTableFromConfig(e){if(!e){this.initializePricingTable();return}this.pricingTableRows=[];for(let i=1;i<=5;i++){let l=e[i]||{1:0,2:0,3:0,4:0,5:0,lifetime:0};this.pricingTableRows.push({length:i.toString(),oneYear:l[1]||0,twoYears:l[2]||0,threeYears:l[3]||0,fourYears:l[4]||0,fiveYears:l[5]||0,lifetime:l.lifetime||0})}let t=e["6-15"]||{1:0,2:0,3:0,4:0,5:0,lifetime:0};this.pricingTableRows.push({length:"6-15",oneYear:t[1]||0,twoYears:t[2]||0,threeYears:t[3]||0,fourYears:t[4]||0,fiveYears:t[5]||0,lifetime:t.lifetime||0});for(let i=16;i<=27;i++){let l=e[i]||{1:0,2:0,3:0,4:0,5:0,lifetime:0};this.pricingTableRows.push({length:i.toString(),oneYear:l[1]||0,twoYears:l[2]||0,threeYears:l[3]||0,fourYears:l[4]||0,fiveYears:l[5]||0,lifetime:l.lifetime||0})}}static{this.\u0275fac=function(t){return new(t||s)(k(we),k(ae),k(Se),k(de),k(ne),k(Ce),k(me))}}static{this.\u0275cmp=$({type:s,selectors:[["settings-license"]],decls:1,vars:0,consts:[["newReservedWord",""],["class","flex flex-col min-h-screen bg-gray-50/50 dark:bg-gray-900 w-full",4,"transloco"],[1,"flex","flex-col","min-h-screen","bg-gray-50/50","dark:bg-gray-900","w-full"],[1,"flex-auto","px-4","py-8","sm:px-6","sm:py-12","md:px-8","w-full","max-w-4xl","mx-auto"],[1,"mb-6","animate-fade-in"],[3,"formGroup"],[1,"mb-8","p-4","bg-blue-50/50","dark:bg-blue-900/10","border","border-blue-100","dark:border-blue-800/30","rounded-2xl","flex","items-start","gap-4"],[1,"icon-size-5","text-blue-600","dark:text-blue-400","mt-0.5","shrink-0"],[1,"text-sm","text-blue-900","dark:text-blue-200"],[1,"font-semibold","mb-1"],[1,"opacity-90","space-y-1"],[1,"font-medium"],[1,"bg-white","dark:bg-slate-800","rounded-3xl","shadow-xl","overflow-hidden","mb-8","border","border-gray-100","dark:border-gray-700/50"],[1,"p-8","sm:p-10"],[1,"flex","items-center","gap-3","mb-6"],[1,"w-10","h-10","rounded-full","bg-blue-100","dark:bg-blue-900/30","flex","items-center","justify-center","text-blue-600","dark:text-blue-400"],[1,"icon-size-5"],[1,"text-xl","font-bold","text-gray-900","dark:text-white"],[1,"text-sm","text-gray-500","dark:text-gray-400"],[1,"grid","grid-cols-1","md:grid-cols-2","gap-6"],[1,"space-y-1.5"],[1,"text-sm","font-semibold","text-gray-700","dark:text-gray-300","ml-1"],[1,"flex","items-center","w-full","bg-gray-50","dark:bg-gray-900/50","border","border-gray-200","dark:border-gray-700","rounded-xl","px-4","focus-within:border-gray-400","dark:focus-within:border-gray-500","focus-within:ring-4","focus-within:ring-gray-100","dark:focus-within:ring-gray-800","transition-all"],[1,"text-gray-500","font-medium","select-none","text-base"],[1,"text-gray-400","dark:text-gray-500","font-medium","select-none","mx-0.5"],[1,"flex-1","bg-transparent","border-none","focus:ring-0","text-gray-900","dark:text-white","py-3","font-semibold","text-base","placeholder-gray-400",3,"formControlName","placeholder"],[1,"h-4","pl-1"],["class","text-xs text-red-500 font-medium",4,"ngIf"],["readonly","",1,"w-full","bg-gray-100","dark:bg-gray-800","text-gray-500","dark:text-gray-400","border","border-gray-200","dark:border-gray-700","rounded-xl","px-4","py-3","cursor-not-allowed","font-medium","uppercase",3,"formControlName"],[1,"w-full","bg-gray-50","dark:bg-gray-900/50","text-gray-900","dark:text-white","border","border-gray-200","dark:border-gray-700","rounded-xl","px-4","py-3","focus:outline-none","focus:ring-2","focus:ring-gray-900","dark:focus:ring-gray-100","transition-all","font-medium",3,"formControlName","placeholder"],[1,"text-sm","font-semibold","text-gray-700","dark:text-gray-300","ml-1","flex","items-center","justify-between"],[1,"text-xs","font-normal","text-orange-500","bg-orange-50","dark:bg-orange-900/20","px-2","py-0.5","rounded-full"],["type","date","readonly","",1,"w-full","bg-gray-100","dark:bg-gray-800","text-gray-500","dark:text-gray-400","border","border-gray-200","dark:border-gray-700","rounded-xl","px-4","py-3","cursor-not-allowed","font-medium",3,"formControlName"],[1,"md:col-span-2","space-y-1.5"],["rows","3",1,"w-full","bg-gray-50","dark:bg-gray-900/50","text-gray-900","dark:text-white","border","border-gray-200","dark:border-gray-700","rounded-xl","px-4","py-3","focus:outline-none","focus:ring-2","focus:ring-gray-900","dark:focus:ring-gray-100","transition-all","font-medium","resize-none",3,"formControlName","placeholder"],[1,"w-10","h-10","rounded-full","bg-green-100","dark:bg-green-900/30","flex","items-center","justify-center","text-green-600","dark:text-green-400"],[1,"grid","grid-cols-1","md:grid-cols-2","gap-4"],[1,"flex","items-center","justify-between","p-5","rounded-2xl","border","border-gray-100","dark:border-gray-700/50","hover:bg-gray-50","dark:hover:bg-gray-700/30","transition-all","cursor-pointer",3,"click"],[1,"font-semibold","text-gray-900","dark:text-white"],[3,"click","formControlName"],[1,"mb-8","animate-fade-in","pl-4","border-l-2","border-green-500"],[1,"mb-8","animate-fade-in","pl-4","border-l-2","border-blue-500"],[1,"w-10","h-10","rounded-full","bg-cyan-100","dark:bg-cyan-900/30","flex","items-center","justify-center","text-cyan-600","dark:text-cyan-400"],["type","date",1,"w-full","bg-gray-50","dark:bg-gray-900/50","text-gray-900","dark:text-white","border","border-gray-200","dark:border-gray-700","rounded-xl","px-4","py-3","focus:outline-none","focus:ring-2","focus:ring-cyan-500","transition-all","font-medium",3,"formControlName"],[1,"w-full","bg-gray-50","dark:bg-gray-900/50","text-gray-900","dark:text-white","border","border-gray-200","dark:border-gray-700","rounded-xl","px-4","py-3","focus:outline-none","focus:ring-2","focus:ring-cyan-500","transition-all","font-medium",3,"formControlName"],[1,"relative"],[1,"w-full","bg-gray-50","dark:bg-gray-900/50","text-gray-900","dark:text-white","border","border-gray-200","dark:border-gray-700","rounded-xl","px-4","py-3","focus:outline-none","focus:ring-2","focus:ring-cyan-500","transition-all","font-medium","appearance-none",3,"formControlName"],["value","standard"],["value","premium"],["value","enterprise"],[1,"absolute","right-4","top-1/2","-translate-y-1/2","icon-size-4","text-gray-500","pointer-events-none"],[1,"sticky","bottom-6","z-10","mx-auto","max-w-4xl"],[1,"bg-gray-900/90","dark:bg-slate-800/90","backdrop-blur-md","rounded-2xl","shadow-2xl","p-4","flex","items-center","justify-between","border","border-white/10"],[1,"px-4","py-2","text-gray-300","hover:text-white","text-sm","font-medium","transition-colors",3,"click","disabled"],[1,"flex","items-center","gap-3"],[1,"px-4","py-2","text-gray-300","hover:text-white","text-sm","font-medium","transition-colors",3,"disabled"],[1,"px-6","py-2","bg-white","text-gray-900","rounded-xl","text-sm","font-bold","hover:bg-gray-100","transition-colors","shadow-lg","disabled:opacity-50","disabled:cursor-not-allowed","flex","items-center","gap-2",3,"click","disabled"],[1,"h-12"],[1,"flex","items-center","justify-between","p-4","rounded-2xl","shadow-sm","border","transaction-all","duration-300"],[1,"w-8","h-8","rounded-full","flex","items-center","justify-center","shrink-0"],[1,"font-medium","text-sm"],[1,"text-xs","text-red-500","font-medium"],[1,"px-4","py-1.5","bg-green-100","dark:bg-green-900/30","text-green-700","dark:text-green-300","rounded-full","text-sm","font-bold","border","border-green-200","dark:border-green-800","flex","items-center","gap-2","shadow-sm"],[1,"icon-size-4"],[1,"h-px","bg-green-200","dark:bg-green-800/50","flex-1"],[1,"w-10","h-10","rounded-full","bg-orange-100","dark:bg-orange-900/30","flex","items-center","justify-center","text-orange-600","dark:text-orange-400"],[1,"grid","grid-cols-1","md:grid-cols-3","gap-6","mb-8"],["type","number",1,"w-full","bg-gray-50","dark:bg-gray-900/50","text-gray-900","dark:text-white","border","border-gray-200","dark:border-gray-700","rounded-xl","px-4","py-3","focus:outline-none","focus:ring-2","focus:ring-orange-500","transition-all","font-medium",3,"formControlName","placeholder"],[1,"flex","justify-between"],[1,"text-xs","text-gray-400"],["type","number","min","1","max","27",1,"w-full","bg-gray-50","dark:bg-gray-900/50","text-gray-900","dark:text-white","border","border-gray-200","dark:border-gray-700","rounded-xl","px-4","py-3","focus:outline-none","focus:ring-2","focus:ring-orange-500","transition-all","font-medium",3,"formControlName","placeholder"],["class","text-xs text-red-500 pl-1 block mb-1",4,"ngIf"],[1,"w-full","bg-gray-50","dark:bg-gray-900/50","text-gray-900","dark:text-white","border","border-gray-200","dark:border-gray-700","rounded-xl","px-4","py-3","focus:outline-none","focus:ring-2","focus:ring-orange-500","transition-all","font-medium",3,"formControlName","placeholder"],[1,"mb-8"],[1,"block","text-sm","font-semibold","text-gray-700","dark:text-gray-300","mb-3","ml-1"],[1,"flex","flex-wrap","gap-2","mb-3"],["class","inline-flex items-center px-3 py-1.5 rounded-full text-sm font-medium bg-red-50 dark:bg-red-900/20 text-red-700 dark:text-red-300 border border-red-100 dark:border-red-800",4,"ngFor","ngForOf"],[1,"flex","items-center","gap-2","max-w-sm"],["type","text",1,"flex-1","bg-gray-50","dark:bg-gray-900/50","text-gray-900","dark:text-white","border","border-gray-200","dark:border-gray-700","rounded-xl","px-4","py-2.5","text-sm","focus:outline-none","focus:ring-2","focus:ring-red-500",3,"keyup.enter","placeholder"],["type","button",1,"p-2.5","bg-gray-100","dark:bg-gray-800","text-gray-600","dark:text-gray-300","rounded-xl","hover:bg-gray-200","dark:hover:bg-gray-700","transition-colors",3,"click"],[1,"flex","flex-col","sm:flex-row","sm:items-center","justify-between","p-5","bg-red-50/50","dark:bg-red-900/10","rounded-2xl","border","border-red-100","dark:border-red-800/30"],[1,"flex","items-center","gap-3","mb-2","sm:mb-0"],[1,"text-red-500","icon-size-5"],[3,"formControlName","color"],[1,"space-y-8"],[1,"text-sm","font-semibold","text-gray-700","dark:text-gray-300","ml-1","block","mb-3"],[1,"flex","flex-wrap","gap-4"],["class","flex items-center px-4 py-2 bg-gray-50 dark:bg-gray-900/50 border border-gray-200 dark:border-gray-700 rounded-xl cursor-pointer hover:bg-gray-100 dark:hover:bg-gray-800 transition-colors",3,"click",4,"ngFor","ngForOf"],[1,"h-px","bg-gray-100","dark:bg-gray-700"],[3,"networksFormGroup"],[1,"flex","items-center","justify-between","mb-4"],["type","button",1,"text-xs","font-semibold","text-blue-600","bg-blue-50","hover:bg-blue-100","px-3","py-1.5","rounded-lg","transition-colors",3,"click"],[1,"text-center","py-8","bg-gray-50/50","dark:bg-gray-900/30","rounded-2xl","border-2","border-dashed","border-gray-200","dark:border-gray-700"],[1,"space-y-3"],[1,"flex","items-center","justify-between","mb-6"],[1,"w-10","h-10","rounded-full","bg-purple-100","dark:bg-purple-900/30","flex","items-center","justify-center","text-purple-600","dark:text-purple-400"],["type","button",1,"text-xs","font-semibold","text-gray-600","bg-gray-100","hover:bg-gray-200","px-3","py-1.5","rounded-lg","transition-colors","flex","items-center","gap-1",3,"click"],[1,"overflow-x-auto","rounded-xl","border","border-gray-200","dark:border-gray-700"],[1,"min-w-full","divide-y","divide-gray-200","dark:divide-gray-700"],[1,"bg-gray-50","dark:bg-gray-900/50"],[1,"px-4","py-3","text-left","text-xs","font-semibold","text-gray-500","uppercase","tracking-wider","sticky","left-0","bg-gray-50","dark:bg-gray-900/50","z-10"],["class","px-4 py-3 text-center text-xs font-semibold text-gray-500 uppercase tracking-wider",4,"ngFor","ngForOf"],[1,"px-4","py-3","text-center","text-xs","font-semibold","text-gray-500","uppercase","tracking-wider"],[1,"bg-white","dark:bg-gray-800","divide-y","divide-gray-200","dark:divide-gray-700"],[4,"ngFor","ngForOf"],[1,"w-10","h-10","rounded-full","bg-indigo-100","dark:bg-indigo-900/30","flex","items-center","justify-center","text-indigo-600","dark:text-indigo-400"],[1,"space-y-6"],[1,"grid","grid-cols-1","md:grid-cols-3","gap-4"],[1,"p-4","rounded-xl","border","border-gray-200","dark:border-gray-700","hover:bg-gray-50","dark:hover:bg-gray-900/20","transition-colors"],[1,"flex","items-center","justify-between","mb-2"],[1,"flex","items-center","gap-2"],[1,"icon-size-5","text-blue-500"],[1,"font-medium","text-gray-900","dark:text-white"],[3,"formControlName"],[1,"text-xs","text-gray-500"],[1,"icon-size-5","text-green-500"],[1,"icon-size-5","text-orange-500"],[1,"space-y-1.5","max-w-md"],[1,"w-full","bg-gray-50","dark:bg-gray-900/50","text-gray-900","dark:text-white","border","border-gray-200","dark:border-gray-700","rounded-xl","px-4","py-3","focus:outline-none","focus:ring-2","focus:ring-indigo-500","transition-all","font-medium",3,"formControlName","placeholder"],[1,"text-xs","text-red-500","pl-1","block","mb-1"],[1,"inline-flex","items-center","px-3","py-1.5","rounded-full","text-sm","font-medium","bg-red-50","dark:bg-red-900/20","text-red-700","dark:text-red-300","border","border-red-100","dark:border-red-800"],["type","button",1,"ml-2","text-red-400","hover:text-red-600","transition-colors",3,"click"],[1,"flex","items-center","px-4","py-2","bg-gray-50","dark:bg-gray-900/50","border","border-gray-200","dark:border-gray-700","rounded-xl","cursor-pointer","hover:bg-gray-100","dark:hover:bg-gray-800","transition-colors",3,"click"],["color","primary",3,"click","change","checked"],[1,"ml-2","font-medium","text-gray-700","dark:text-gray-300","capitalize"],[1,"text-gray-400","icon-size-8","mb-2"],[1,"text-gray-500","text-sm"],["class","flex flex-col sm:flex-row gap-3 p-4 bg-gray-50 dark:bg-gray-900/50 rounded-xl border border-gray-200 dark:border-gray-700",4,"ngFor","ngForOf"],[1,"flex","flex-col","sm:flex-row","gap-3","p-4","bg-gray-50","dark:bg-gray-900/50","rounded-xl","border","border-gray-200","dark:border-gray-700"],[1,"flex-[2]","bg-white","dark:bg-gray-800","border-gray-200","dark:border-gray-600","rounded-lg","px-3","py-2","text-sm","focus:ring-2","focus:ring-blue-500","outline-none",3,"ngModelChange","ngModel","ngModelOptions","placeholder"],[1,"flex","gap-3","flex-[2]"],["type","number",1,"flex-1","bg-white","dark:bg-gray-800","border-gray-200","dark:border-gray-600","rounded-lg","px-3","py-2","text-sm","focus:ring-2","focus:ring-blue-500","outline-none",3,"ngModelChange","ngModel","ngModelOptions","placeholder"],[1,"flex-1","bg-white","dark:bg-gray-800","border-gray-200","dark:border-gray-600","rounded-lg","px-3","py-2","text-sm","focus:ring-2","focus:ring-blue-500","outline-none",3,"ngModelChange","ngModel","ngModelOptions"],["value","percentage"],["value","fixed"],["type","button",1,"p-2","sm:p-0","text-red-500","hover:text-red-700","flex","items-center","justify-center","bg-white","sm:bg-transparent","rounded-lg","border","sm:border-0","border-gray-200",3,"click"],[1,"px-4","py-3","text-sm","font-bold","text-gray-900","dark:text-white","bg-gray-50/50","dark:bg-gray-900/20","sticky","left-0","z-10"],["class","px-2 py-2 text-center",4,"ngFor","ngForOf"],[1,"px-2","py-2","text-center"],["type","number",1,"w-16","px-1.5","py-1","text-sm","text-center","border","border-gray-300","dark:border-gray-600","rounded-md","bg-transparent","focus:ring-1","focus:ring-purple-500","outline-none",3,"ngModelChange","ngModel","ngModelOptions"],[1,"px-4","py-1.5","bg-blue-100","dark:bg-blue-900/30","text-blue-700","dark:text-blue-300","rounded-full","text-sm","font-bold","border","border-blue-200","dark:border-blue-800","flex","items-center","gap-2","shadow-sm"],[1,"h-px","bg-blue-200","dark:bg-blue-800/50","flex-1"],[1,"bg-white","dark:bg-slate-800","rounded-3xl","shadow-xl","overflow-hidden","border","border-gray-100","dark:border-gray-700/50"],[1,"grid","grid-cols-1","md:grid-cols-3","gap-4","mb-6"],[1,"p-4","rounded-xl","border","border-gray-200","dark:border-gray-700","hover:bg-gray-50","dark:hover:bg-gray-900/20"],[1,"flex","justify-between","items-center","mb-2"],[1,"w-full","bg-gray-50","dark:bg-gray-900/50","text-gray-900","dark:text-white","border","border-gray-200","dark:border-gray-700","rounded-xl","px-4","py-3","focus:outline-none","focus:ring-2","focus:ring-blue-500","transition-all","font-medium",3,"formControlName"],[1,"icon-size-4","animate-spin"]],template:function(t,i){t&1&&y(0,at,147,46,"div",1)},dependencies:[V,z,P,re,R,ge,be,ye,pe,fe,he,O,A,ve,_e,ue,j,Y,G,D,se,K,Fe,B,Z,W,ce,Ne],encapsulation:2,changeDetection:0})}}return s})();export{Tt as SettingsLicenseComponent};
