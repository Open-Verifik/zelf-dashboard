<div class="w-full max-w-3xl">
    <!-- Form -->
    <form [formGroup]="planBillingForm">
        <!-- Section -->
        <div class="w-full">
            <div class="text-xl">Change your plan</div>
            <div class="text-secondary">
                Upgrade or downgrade your current plan.
            </div>
        </div>
        <div class="mt-8 grid w-full gap-6 sm:grid-cols-3">
            <!-- Plan -->
            <div class="sm:col-span-3">
                <fuse-alert [appearance]="'outline'" [type]="'info'">
                    Changing the plan will take effect immediately. You will be
                    charged for the rest of the current month.
                </fuse-alert>
            </div>
            <mat-radio-group
                class="pointer-events-none invisible absolute h-0 w-0"
                [formControlName]="'plan'"
                #planRadioGroup="matRadioGroup"
            >
                @for (plan of plans; track trackByFn($index, plan)) {
                    <mat-radio-button [value]="plan.value"></mat-radio-button>
                }
            </mat-radio-group>
            @for (plan of plans; track trackByFn($index, plan)) {
                <div
                    class="bg-card relative flex cursor-pointer flex-col items-start justify-start rounded-md p-6 shadow"
                    [ngClass]="{
                        'ring ring-inset ring-primary':
                            planRadioGroup.value === plan.value,
                    }"
                    (click)="planRadioGroup.value = plan.value"
                >
                    @if (planRadioGroup.value === plan.value) {
                        <mat-icon
                            class="absolute right-0 top-0 mr-3 mt-3 text-primary icon-size-7"
                            [svgIcon]="'heroicons_solid:check-circle'"
                        ></mat-icon>
                    }
                    <div class="font-semibold">{{ plan.label }}</div>
                    <div class="text-secondary mt-1 whitespace-normal">
                        {{ plan.details }}
                    </div>
                    <div class="flex-auto"></div>
                    <div class="mt-8 text-lg">
                        <span>{{
                            plan.price | currency: 'USD' : 'symbol' : '1.0'
                        }}</span>
                        <span class="text-secondary"> / month</span>
                    </div>
                </div>
            }
        </div>

        <!-- Divider -->
        <div class="mb-10 mt-12 border-t"></div>

        <!-- Divider -->
        <div class="mb-10 mt-11 border-t"></div>

        <!-- Actions -->
        <div class="flex items-center justify-end">
            <button mat-stroked-button type="button">Cancel</button>
            <button
                class="ml-4"
                mat-flat-button
                type="button"
                [color]="'primary'"
            >
                Save
            </button>
        </div>
    </form>
</div>
